import{a as $e,b as Ln,d as ce,e as d}from"./chunk-DVOCWXDE.js";function D(e){return typeof e=="function"}function Zt(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Sr=Zt(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function pt(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Q=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(D(r))try{r()}catch(i){t=i instanceof Sr?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{Tc(i)}catch(s){t=t??[],s instanceof Sr?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Sr(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Tc(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&pt(n,t)}remove(t){let{_finalizers:n}=this;n&&pt(n,t),t instanceof e&&t._removeParent(this)}};Q.EMPTY=(()=>{let e=new Q;return e.closed=!0,e})();var Ci=Q.EMPTY;function xr(e){return e instanceof Q||e&&"closed"in e&&D(e.remove)&&D(e.add)&&D(e.unsubscribe)}function Tc(e){D(e)?e():e.unsubscribe()}var De={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Xt={setTimeout(e,t,...n){let{delegate:r}=Xt;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Xt;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Ar(e){Xt.setTimeout(()=>{let{onUnhandledError:t}=De;if(t)t(e);else throw e})}function gt(){}var Sc=Ti("C",void 0,void 0);function xc(e){return Ti("E",void 0,e)}function Ac(e){return Ti("N",e,void 0)}function Ti(e,t,n){return{kind:e,value:t,error:n}}var mt=null;function en(e){if(De.useDeprecatedSynchronousErrorHandling){let t=!mt;if(t&&(mt={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=mt;if(mt=null,n)throw r}}else e()}function Mc(e){De.useDeprecatedSynchronousErrorHandling&&mt&&(mt.errorThrown=!0,mt.error=e)}var yt=class extends Q{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,xr(t)&&t.add(this)):this.destination=Fh}static create(t,n,r){return new tn(t,n,r)}next(t){this.isStopped?xi(Ac(t),this):this._next(t)}error(t){this.isStopped?xi(xc(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?xi(Sc,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},kh=Function.prototype.bind;function Si(e,t){return kh.call(e,t)}var Ai=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Mr(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Mr(r)}else Mr(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Mr(n)}}},tn=class extends yt{constructor(t,n,r){super();let o;if(D(t)||!t)o={next:t??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&De.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&Si(t.next,i),error:t.error&&Si(t.error,i),complete:t.complete&&Si(t.complete,i)}):o=t}this.destination=new Ai(o)}};function Mr(e){De.useDeprecatedSynchronousErrorHandling?Mc(e):Ar(e)}function Ph(e){throw e}function xi(e,t){let{onStoppedNotification:n}=De;n&&Xt.setTimeout(()=>n(e,t))}var Fh={closed:!0,next:gt,error:Ph,complete:gt};var nn=typeof Symbol=="function"&&Symbol.observable||"@@observable";function te(e){return e}function Lh(...e){return Mi(e)}function Mi(e){return e.length===0?te:e.length===1?e[0]:function(n){return e.reduce((r,o)=>o(r),n)}}var R=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,o){let i=$h(n)?n:new tn(n,r,o);return en(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Nc(r),new r((o,i)=>{let s=new tn({next:a=>{try{n(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[nn](){return this}pipe(...n){return Mi(n)(this)}toPromise(n){return n=Nc(n),new n((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return e.create=t=>new e(t),e})();function Nc(e){var t;return(t=e??De.Promise)!==null&&t!==void 0?t:Promise}function jh(e){return e&&D(e.next)&&D(e.error)&&D(e.complete)}function $h(e){return e&&e instanceof yt||jh(e)&&xr(e)}var{isArray:Uh}=Array,{getPrototypeOf:Vh,prototype:Bh,keys:Hh}=Object;function Nr(e){if(e.length===1){let t=e[0];if(Uh(t))return{args:t,keys:null};if(qh(t)){let n=Hh(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function qh(e){return e&&typeof e=="object"&&Vh(e)===Bh}function wt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function Or(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?i(l.value):o(l.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}function Oc(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function vt(e){return this instanceof vt?(this.v=e,this):new vt(e)}function Rc(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(h){return function(g){return Promise.resolve(g).then(h,f)}}function a(h,g){r[h]&&(o[h]=function(m){return new Promise(function(v,y){i.push([h,m,v,y])>1||c(h,m)})},g&&(o[h]=g(o[h])))}function c(h,g){try{u(r[h](g))}catch(m){p(i[0][3],m)}}function u(h){h.value instanceof vt?Promise.resolve(h.value.v).then(l,f):p(i[0][2],h)}function l(h){c("next",h)}function f(h){c("throw",h)}function p(h,g){h(g),i.shift(),i.length&&c(i[0][0],i[0][1])}}function kc(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Oc=="function"?Oc(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,c){s=e[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},s)}}var rn=e=>e&&typeof e.length=="number"&&typeof e!="function";function Rr(e){return D(e?.then)}function kr(e){return D(e[nn])}function Pr(e){return Symbol.asyncIterator&&D(e?.[Symbol.asyncIterator])}function Fr(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Wh(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Lr=Wh();function jr(e){return D(e?.[Lr])}function $r(e){return Rc(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:o}=yield vt(n.read());if(o)return yield vt(void 0);yield yield vt(r)}}finally{n.releaseLock()}})}function Ur(e){return D(e?.getReader)}function j(e){if(e instanceof R)return e;if(e!=null){if(kr(e))return Gh(e);if(rn(e))return zh(e);if(Rr(e))return Kh(e);if(Pr(e))return Pc(e);if(jr(e))return Yh(e);if(Ur(e))return Jh(e)}throw Fr(e)}function Gh(e){return new R(t=>{let n=e[nn]();if(D(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function zh(e){return new R(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Kh(e){return new R(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Ar)})}function Yh(e){return new R(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function Pc(e){return new R(t=>{Qh(e,t).catch(n=>t.error(n))})}function Jh(e){return Pc($r(e))}function Qh(e,t){var n,r,o,i;return Or(this,void 0,void 0,function*(){try{for(n=kc(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}t.complete()})}function ue(e,t,n,r=0,o=!1){let i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function Ni(e){return D(e?.lift)}function N(e){return t=>{if(Ni(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function T(e,t,n,r,o){return new Oi(e,t,n,r,o)}var Oi=class extends yt{constructor(t,n,r,o,i,s){super(t),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Vr(e,t=0){return N((n,r)=>{n.subscribe(T(r,o=>ue(r,e,()=>r.next(o),t),()=>ue(r,e,()=>r.complete(),t),o=>ue(r,e,()=>r.error(o),t)))})}function Br(e,t=0){return N((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Fc(e,t){return j(e).pipe(Br(t),Vr(t))}function Lc(e,t){return j(e).pipe(Br(t),Vr(t))}function jc(e,t){return new R(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function $c(e,t){return new R(n=>{let r;return ue(n,t,()=>{r=e[Lr](),ue(n,t,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){n.error(s);return}i?n.complete():n.next(o)},0,!0)}),()=>D(r?.return)&&r.return()})}function Hr(e,t){if(!e)throw new Error("Iterable cannot be null");return new R(n=>{ue(n,t,()=>{let r=e[Symbol.asyncIterator]();ue(n,t,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function Uc(e,t){return Hr($r(e),t)}function Vc(e,t){if(e!=null){if(kr(e))return Fc(e,t);if(rn(e))return jc(e,t);if(Rr(e))return Lc(e,t);if(Pr(e))return Hr(e,t);if(jr(e))return $c(e,t);if(Ur(e))return Uc(e,t)}throw Fr(e)}function Ze(e,t){return t?Vc(e,t):j(e)}function Re(e,t){return N((n,r)=>{let o=0;n.subscribe(T(r,i=>{r.next(e.call(t,i,o++))}))})}var{isArray:Zh}=Array;function Xh(e,t){return Zh(t)?e(...t):e(t)}function on(e){return Re(t=>Xh(e,t))}function qr(e){return e&&D(e.schedule)}function Bc(e){return e[e.length-1]}function Xe(e){return D(Bc(e))?e.pop():void 0}function et(e){return qr(Bc(e))?e.pop():void 0}function Wr(e,t){return e.reduce((n,r,o)=>(n[r]=t[o],n),{})}function ep(...e){let t=et(e),n=Xe(e),{args:r,keys:o}=Nr(e);if(r.length===0)return Ze([],t);let i=new R(tp(r,t,o?s=>Wr(o,s):te));return n?i.pipe(on(n)):i}function tp(e,t,n=te){return r=>{Hc(t,()=>{let{length:o}=e,i=new Array(o),s=o,a=o;for(let c=0;c<o;c++)Hc(t,()=>{let u=Ze(e[c],t),l=!1;u.subscribe(T(r,f=>{i[c]=f,l||(l=!0,a--),a||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Hc(e,t,n){e?ue(n,e,t):t()}function Ri(){return N((e,t)=>{let n=null;e._refCount++;let r=T(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let o=e._connection,i=n;n=null,o&&(!i||o===i)&&o.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var ki=class extends R{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ni(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Q;let n=this.getSubject();t.add(this.source.subscribe(T(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Q.EMPTY)}return t}refCount(){return Ri()(this)}};var qc=Zt(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var tt=(()=>{class e extends R{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Gr(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new qc}next(n){en(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){en(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){en(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:i}=this;return r||o?Ci:(this.currentObservers=null,i.push(n),new Q(()=>{this.currentObservers=null,pt(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){let n=new R;return n.source=this,n}}return e.create=(t,n)=>new Gr(t,n),e})(),Gr=class extends tt{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Ci}};var jn=class extends tt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Pi={now(){return(Pi.delegate||Date).now()},delegate:void 0};var zr=class extends Q{constructor(t,n){super()}schedule(t,n=0){return this}};var $n={setInterval(e,t,...n){let{delegate:r}=$n;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=$n;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Kr=class extends zr{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let o=this.id,i=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(i,o,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(i,this.id,n),this}requestAsyncId(t,n,r=0){return $n.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&$n.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,o;try{this.work(t)}catch(i){r=!0,o=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,pt(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var sn=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};sn.now=Pi.now;var Yr=class extends sn{constructor(t,n=sn.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var Fi=new Yr(Kr),Wc=Fi;var _t=new R(e=>e.complete());function Li(...e){let t=et(e);return Ze(e,t)}function np(e,t){let n=D(e)?e:()=>e,r=o=>o.error(n());return new R(t?o=>t.schedule(r,0,o):r)}function rp(e){return!!e&&(e instanceof R||D(e.lift)&&D(e.subscribe))}var bt=Zt(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Gc(e){return e instanceof Date&&!isNaN(e)}function zc(e,t,n,r,o,i,s,a){let c=[],u=0,l=0,f=!1,p=()=>{f&&!c.length&&!u&&t.complete()},h=m=>u<r?g(m):c.push(m),g=m=>{i&&t.next(m),u++;let v=!1;j(n(m,l++)).subscribe(T(t,y=>{o?.(y),i?h(y):t.next(y)},()=>{v=!0},void 0,()=>{if(v)try{for(u--;c.length&&u<r;){let y=c.shift();s?ue(t,s,()=>g(y)):g(y)}p()}catch(y){t.error(y)}}))};return e.subscribe(T(t,h,()=>{f=!0,p()})),()=>{a?.()}}function Ue(e,t,n=1/0){return D(t)?Ue((r,o)=>Re((i,s)=>t(r,i,o,s))(j(e(r,o))),n):(typeof t=="number"&&(n=t),N((r,o)=>zc(r,o,e,n)))}function ji(e=1/0){return Ue(te,e)}function Kc(){return ji(1)}function an(...e){return Kc()(Ze(e,et(e)))}function op(e){return new R(t=>{j(e()).subscribe(t)})}function ip(...e){let t=Xe(e),{args:n,keys:r}=Nr(e),o=new R(i=>{let{length:s}=n;if(!s){i.complete();return}let a=new Array(s),c=s,u=s;for(let l=0;l<s;l++){let f=!1;j(n[l]).subscribe(T(i,p=>{f||(f=!0,u--),a[l]=p},()=>c--,void 0,()=>{(!c||!f)&&(u||i.next(r?Wr(r,a):a),i.complete())}))}});return t?o.pipe(on(t)):o}var sp=["addListener","removeListener"],ap=["addEventListener","removeEventListener"],cp=["on","off"];function $i(e,t,n,r){if(D(n)&&(r=n,n=void 0),r)return $i(e,t,n).pipe(on(r));let[o,i]=dp(e)?ap.map(s=>a=>e[s](t,a,n)):up(e)?sp.map(Yc(e,t)):lp(e)?cp.map(Yc(e,t)):[];if(!o&&rn(e))return Ue(s=>$i(s,t,n))(j(e));if(!o)throw new TypeError("Invalid event target");return new R(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return o(a),()=>i(a)})}function Yc(e,t){return n=>r=>e[n](t,r)}function up(e){return D(e.addListener)&&D(e.removeListener)}function lp(e){return D(e.on)&&D(e.off)}function dp(e){return D(e.addEventListener)&&D(e.removeEventListener)}function fp(e=0,t,n=Wc){let r=-1;return t!=null&&(qr(t)?n=t:r=t),new R(o=>{let i=Gc(e)?+e-n.now():e;i<0&&(i=0);let s=0;return n.schedule(function(){o.closed||(o.next(s++),0<=r?this.schedule(void 0,r):o.complete())},i)})}var{isArray:hp}=Array;function Jr(e){return e.length===1&&hp(e[0])?e[0]:e}function Un(e,t){return N((n,r)=>{let o=0;n.subscribe(T(r,i=>e.call(t,i,o++)&&r.next(i)))})}function pp(...e){return e=Jr(e),e.length===1?j(e[0]):new R(gp(e))}function gp(e){return t=>{let n=[];for(let r=0;n&&!t.closed&&r<e.length;r++)n.push(j(e[r]).subscribe(T(t,o=>{if(n){for(let i=0;i<n.length;i++)i!==r&&n[i].unsubscribe();n=null}t.next(o)})))}}function mp(...e){let t=Xe(e),n=Jr(e);return n.length?new R(r=>{let o=n.map(()=>[]),i=n.map(()=>!1);r.add(()=>{o=i=null});for(let s=0;!r.closed&&s<n.length;s++)j(n[s]).subscribe(T(r,a=>{if(o[s].push(a),o.every(c=>c.length)){let c=o.map(u=>u.shift());r.next(t?t(...c):c),o.some((u,l)=>!u.length&&i[l])&&r.complete()}},()=>{i[s]=!0,!o[s].length&&r.complete()}));return()=>{o=i=null}}):_t}function Jc(e){return N((t,n)=>{let r=null,o=!1,i;r=t.subscribe(T(n,void 0,void 0,s=>{i=j(e(s,Jc(e)(t))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function Qc(e,t,n,r,o){return(i,s)=>{let a=n,c=t,u=0;i.subscribe(T(s,l=>{let f=u++;c=a?e(c,l,f):(a=!0,l),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}function yp(e,t){return D(t)?Ue(e,t,1):Ue(e,1)}function vp(e,t=Fi){return N((n,r)=>{let o=null,i=null,s=null,a=()=>{if(o){o.unsubscribe(),o=null;let u=i;i=null,r.next(u)}};function c(){let u=s+e,l=t.now();if(l<u){o=this.schedule(void 0,u-l),r.add(o);return}a()}n.subscribe(T(r,u=>{i=u,s=t.now(),o||(o=t.schedule(c,e),r.add(o))},()=>{a(),r.complete()},void 0,()=>{i=o=null}))})}function Vn(e){return N((t,n)=>{let r=!1;t.subscribe(T(n,o=>{r=!0,n.next(o)},()=>{r||n.next(e),n.complete()}))})}function Ui(e){return e<=0?()=>_t:N((t,n)=>{let r=0;t.subscribe(T(n,o=>{++r<=e&&(n.next(o),e<=r&&n.complete())}))})}function wp(e){return Re(()=>e)}function _p(e,t=te){return e=e??bp,N((n,r)=>{let o,i=!0;n.subscribe(T(r,s=>{let a=t(s);(i||!e(o,a))&&(i=!1,o=a,r.next(s))}))})}function bp(e,t){return e===t}function Qr(e=Ep){return N((t,n)=>{let r=!1;t.subscribe(T(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(e())))})}function Ep(){return new bt}function Dp(...e){return t=>an(t,Li(...e))}function Ip(e){return N((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Zc(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Un((o,i)=>e(o,i,r)):te,Ui(1),n?Vn(t):Qr(()=>new bt))}function Vi(e){return e<=0?()=>_t:N((t,n)=>{let r=[];t.subscribe(T(n,o=>{r.push(o),e<r.length&&r.shift()},()=>{for(let o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function Cp(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Un((o,i)=>e(o,i,r)):te,Vi(1),n?Vn(t):Qr(()=>new bt))}function Tp(e,t){return N(Qc(e,t,arguments.length>=2,!0))}function Sp(...e){let t=et(e);return N((n,r)=>{(t?an(e,n,t):an(e,n)).subscribe(r)})}function xp(e,t){return N((n,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();n.subscribe(T(r,c=>{o?.unsubscribe();let u=0,l=i++;j(e(c,l)).subscribe(o=T(r,f=>r.next(t?t(c,f,l,u++):f),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Ap(e){return N((t,n)=>{j(e).subscribe(T(n,()=>n.complete(),gt)),!n.closed&&t.subscribe(n)})}function Mp(e,t,n){let r=D(e)||t||n?{next:e,error:t,complete:n}:e;return r?N((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(T(i,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),i.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),i.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):te}function Np(...e){let t=Xe(e);return N((n,r)=>{let o=e.length,i=new Array(o),s=e.map(()=>!1),a=!1;for(let c=0;c<o;c++)j(e[c]).subscribe(T(r,u=>{i[c]=u,!a&&!s[c]&&(s[c]=!0,(a=s.every(te))&&(s=null))},gt));n.subscribe(T(r,c=>{if(a){let u=[c,...i];r.next(t?t(...u):u)}}))})}var Xc=null;var Bi=1,Hi=Symbol("SIGNAL");function L(e){let t=Xc;return Xc=e,t}var eu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Op(e){if(!(Gi(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Bi)){if(!e.producerMustRecompute(e)&&!qi(e)){e.dirty=!1,e.lastCleanEpoch=Bi;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=Bi}}function tu(e){return e&&(e.nextProducerIndex=0),L(e)}function nu(e,t){if(L(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Gi(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Wi(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function qi(e){Zr(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Op(n),r!==n.version))return!0}return!1}function ru(e){if(Zr(e),Gi(e))for(let t=0;t<e.producerNode.length;t++)Wi(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Wi(e,t){if(Rp(e),Zr(e),e.liveConsumerNode.length===1)for(let r=0;r<e.producerNode.length;r++)Wi(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],o=e.liveConsumerNode[t];Zr(o),o.producerIndexOfThis[r]=t}}function Gi(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Zr(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Rp(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function kp(){throw new Error}var Pp=kp;function ou(e){Pp=e}var Vu="https://g.co/ng/security#xss",F=class extends Error{constructor(t,n){super(Bu(t,n)),this.code=t}};function Bu(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function er(e){return{toString:e}.toString()}var Xr="__parameters__";function Fp(e){return function(...n){if(e){let r=e(...n);for(let o in r)this[o]=r[o]}}}function Hu(e,t,n){return er(()=>{let r=Fp(t);function o(...i){if(this instanceof o)return r.apply(this,i),this;let s=new o(...i);return a.annotation=s,a;function a(c,u,l){let f=c.hasOwnProperty(Xr)?c[Xr]:Object.defineProperty(c,Xr,{value:[]})[Xr];for(;f.length<=l;)f.push(null);return(f[l]=f[l]||[]).push(s),c}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}var ke=globalThis;function U(e){for(let t in e)if(e[t]===U)return t;throw Error("Could not find renamed property on target object.")}function Lp(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function ae(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(ae).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function us(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var jp=U({__forward_ref__:U});function qu(e){return e.__forward_ref__=qu,e.toString=function(){return ae(this())},e}function se(e){return Wu(e)?e():e}function Wu(e){return typeof e=="function"&&e.hasOwnProperty(jp)&&e.__forward_ref__===qu}function H(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Gu(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ro(e){return iu(e,zu)||iu(e,Ku)}function qx(e){return Ro(e)!==null}function iu(e,t){return e.hasOwnProperty(t)?e[t]:null}function $p(e){let t=e&&(e[zu]||e[Ku]);return t||null}function su(e){return e&&(e.hasOwnProperty(au)||e.hasOwnProperty(Up))?e[au]:null}var zu=U({\u0275prov:U}),au=U({\u0275inj:U}),Ku=U({ngInjectableDef:U}),Up=U({ngInjectorDef:U}),B=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=H({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Yu(e){return e&&!!e.\u0275providers}var Vp=U({\u0275cmp:U}),Bp=U({\u0275dir:U}),Hp=U({\u0275pipe:U}),qp=U({\u0275mod:U}),uo=U({\u0275fac:U}),Bn=U({__NG_ELEMENT_ID__:U}),cu=U({__NG_ENV_ID__:U});function Ve(e){return typeof e=="string"?e:e==null?"":String(e)}function Wp(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Ve(e)}function Gp(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new F(-200,e)}function ia(e,t){throw new F(-201,!1)}var k=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(k||{}),ls;function Ju(){return ls}function le(e){let t=ls;return ls=e,t}function Qu(e,t,n){let r=Ro(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&k.Optional)return null;if(t!==void 0)return t;ia(e,"Injector")}var zp={},Hn=zp,ds="__NG_DI_FLAG__",lo="ngTempTokenPath",Kp="ngTokenPath",Yp=/\n/gm,Jp="\u0275",uu="__source",fn;function Qp(){return fn}function nt(e){let t=fn;return fn=e,t}function Zp(e,t=k.Default){if(fn===void 0)throw new F(-203,!1);return fn===null?Qu(e,void 0,t):fn.get(e,t&k.Optional?null:void 0,t)}function oe(e,t=k.Default){return(Ju()||Zp)(se(e),t)}function $(e,t=k.Default){return oe(e,ko(t))}function ko(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function fs(e){let t=[];for(let n=0;n<e.length;n++){let r=se(e[n]);if(Array.isArray(r)){if(r.length===0)throw new F(900,!1);let o,i=k.Default;for(let s=0;s<r.length;s++){let a=r[s],c=Xp(a);typeof c=="number"?c===-1?o=a.token:i|=c:o=a}t.push(oe(o,i))}else t.push(oe(r))}return t}function Zu(e,t){return e[ds]=t,e.prototype[ds]=t,e}function Xp(e){return e[ds]}function eg(e,t,n,r){let o=e[lo];throw t[uu]&&o.unshift(t[uu]),e.message=tg(`
`+e.message,o,n,r),e[Kp]=o,e[lo]=null,e}function tg(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==Jp?e.slice(2):e;let o=ae(t);if(Array.isArray(t))o=t.map(ae).join(" -> ");else if(typeof t=="object"){let i=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];i.push(s+":"+(typeof a=="string"?JSON.stringify(a):ae(a)))}o=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${e.replace(Yp,`
  `)}`}var ng=Zu(Hu("Optional"),8);var rg=Zu(Hu("SkipSelf"),4);function Tt(e,t){let n=e.hasOwnProperty(uo);return n?e[uo]:null}function og(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let o=e[r],i=t[r];if(n&&(o=n(o),i=n(i)),i!==o)return!1}return!0}function ig(e){return e.flat(Number.POSITIVE_INFINITY)}function sa(e,t){e.forEach(n=>Array.isArray(n)?sa(n,t):t(n))}function Xu(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function fo(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function sg(e,t){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function ag(e,t,n,r){let o=e.length;if(o==t)e.push(n,r);else if(o===1)e.push(r,e[0]),e[0]=n;else{for(o--,e.push(e[o-1],e[o]);o>t;){let i=o-2;e[o]=e[i],o--}e[t]=n,e[t+1]=r}}function Po(e,t,n){let r=tr(e,t);return r>=0?e[r|1]=n:(r=~r,ag(e,r,t,n)),r}function zi(e,t){let n=tr(e,t);if(n>=0)return e[n|1]}function tr(e,t){return cg(e,t,1)}function cg(e,t,n){let r=0,o=e.length>>n;for(;o!==r;){let i=r+(o-r>>1),s=e[i<<n];if(t===s)return i<<n;s>t?o=i:r=i+1}return~(o<<n)}var pn={},de=[],ho=new B(""),el=new B("",-1),tl=new B(""),po=class{get(t,n=Hn){if(n===Hn){let r=new Error(`NullInjectorError: No provider for ${ae(t)}!`);throw r.name="NullInjectorError",r}return n}},nl=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(nl||{}),qn=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(qn||{}),ot=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(ot||{});function ug(e,t,n){let r=e.length;for(;;){let o=e.indexOf(t,n);if(o===-1)return o;if(o===0||e.charCodeAt(o-1)<=32){let i=t.length;if(o+i===r||e.charCodeAt(o+i)<=32)return o}n=o+1}}function hs(e,t,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let i=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,i)}else{let i=o,s=n[++r];lg(i)?e.setProperty(t,i,s):e.setAttribute(t,i,s),r++}}return r}function rl(e){return e===3||e===4||e===6}function lg(e){return e.charCodeAt(0)===64}function Wn(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let o=t[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?lu(e,n,o,null,t[++r]):lu(e,n,o,null,null))}}return e}function lu(e,t,n,r,o){let i=0,s=e.length;if(t===-1)s=-1;else for(;i<e.length;){let a=e[i++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=i-1;break}}}for(;i<e.length;){let a=e[i];if(typeof a=="number")break;if(a===n){if(r===null){o!==null&&(e[i+1]=o);return}else if(r===e[i+1]){e[i+2]=o;return}}i++,r!==null&&i++,o!==null&&i++}s!==-1&&(e.splice(s,0,t),i=s+1),e.splice(i++,0,n),r!==null&&e.splice(i++,0,r),o!==null&&e.splice(i++,0,o)}var ol="ng-template";function dg(e,t,n,r){let o=0;if(r){for(;o<t.length&&typeof t[o]=="string";o+=2)if(t[o]==="class"&&ug(t[o+1].toLowerCase(),n,0)!==-1)return!0}else if(aa(e))return!1;if(o=t.indexOf(1,o),o>-1){let i;for(;++o<t.length&&typeof(i=t[o])=="string";)if(i.toLowerCase()===n)return!0}return!1}function aa(e){return e.type===4&&e.value!==ol}function fg(e,t,n){let r=e.type===4&&!n?ol:e.value;return t===r}function hg(e,t,n){let r=4,o=e.attrs,i=o!==null?mg(o):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Ie(r)&&!Ie(c))return!1;if(s&&Ie(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!fg(e,c,n)||c===""&&t.length===1){if(Ie(r))return!1;s=!0}}else if(r&8){if(o===null||!dg(e,o,c,n)){if(Ie(r))return!1;s=!0}}else{let u=t[++a],l=pg(c,o,aa(e),n);if(l===-1){if(Ie(r))return!1;s=!0;continue}if(u!==""){let f;if(l>i?f="":f=o[l+1].toLowerCase(),r&2&&u!==f){if(Ie(r))return!1;s=!0}}}}return Ie(r)||s}function Ie(e){return(e&1)===0}function pg(e,t,n,r){if(t===null)return-1;let o=0;if(r||!n){let i=!1;for(;o<t.length;){let s=t[o];if(s===e)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=t[++o];for(;typeof a=="string";)a=t[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return yg(t,e)}function il(e,t,n=!1){for(let r=0;r<t.length;r++)if(hg(e,t[r],n))return!0;return!1}function gg(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if(!(n&1))return t[n+1]}return null}function mg(e){for(let t=0;t<e.length;t++){let n=e[t];if(rl(n))return t}return e.length}function yg(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function vg(e,t){e:for(let n=0;n<t.length;n++){let r=t[n];if(e.length===r.length){for(let o=0;o<e.length;o++)if(e[o]!==r[o])continue e;return!0}}return!1}function du(e,t){return e?":not("+t.trim()+")":t}function wg(e){let t=e[0],n=1,r=2,o="",i=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!Ie(s)&&(t+=du(i,o),o=""),r=s,i=i||!Ie(r);n++}return o!==""&&(t+=du(i,o)),t}function _g(e){return e.map(wg).join(",")}function bg(e){let t=[],n=[],r=1,o=2;for(;r<e.length;){let i=e[r];if(typeof i=="string")o===2?i!==""&&t.push(i,e[++r]):o===8&&n.push(i);else{if(!Ie(o))break;o=i}r++}return{attrs:t,classes:n}}function Wx(e){return er(()=>{let t=ll(e),n=Ln($e({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===nl.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||qn.Emulated,styles:e.styles||de,_:null,schemas:e.schemas||null,tView:null,id:""});dl(n);let r=e.dependencies;return n.directiveDefs=hu(r,!1),n.pipeDefs=hu(r,!0),n.id=Cg(n),n})}function Eg(e){return Be(e)||al(e)}function Dg(e){return e!==null}function sl(e){return er(()=>({type:e.type,bootstrap:e.bootstrap||de,declarations:e.declarations||de,imports:e.imports||de,exports:e.exports||de,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function fu(e,t){if(e==null)return pn;let n={};for(let r in e)if(e.hasOwnProperty(r)){let o=e[r],i,s,a=ot.None;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i):(i=o,s=o),t?(n[i]=a!==ot.None?[r,a]:r,t[i]=s):n[i]=r}return n}function Fo(e){return er(()=>{let t=ll(e);return dl(t),t})}function ca(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone===!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function Be(e){return e[Vp]||null}function al(e){return e[Bp]||null}function cl(e){return e[Hp]||null}function Ig(e){let t=Be(e)||al(e)||cl(e);return t!==null?t.standalone:!1}function ul(e,t){let n=e[qp]||null;if(!n&&t===!0)throw new Error(`Type ${ae(e)} does not have '\u0275mod' property.`);return n}function ll(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||pn,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||de,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:fu(e.inputs,t),outputs:fu(e.outputs),debugInfo:null}}function dl(e){e.features?.forEach(t=>t(e))}function hu(e,t){if(!e)return null;let n=t?cl:Eg;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(Dg)}function Cg(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let o of n)t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Tg(e){return{\u0275providers:e}}function Sg(...e){return{\u0275providers:fl(!0,e),\u0275fromNgModule:!0}}function fl(e,...t){let n=[],r=new Set,o,i=s=>{n.push(s)};return sa(t,s=>{let a=s;ps(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&hl(o,i),n}function hl(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:o}=e[n];ua(o,i=>{t(i,r)})}}function ps(e,t,n,r){if(e=se(e),!e)return!1;let o=null,i=su(e),s=!i&&Be(e);if(!i&&!s){let c=e.ngModule;if(i=su(c),i)o=c;else return!1}else{if(s&&!s.standalone)return!1;o=e}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)ps(u,t,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let u;try{sa(i.imports,l=>{ps(l,t,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&hl(u,t)}if(!a){let u=Tt(o)||(()=>new o);t({provide:o,useFactory:u,deps:de},o),t({provide:tl,useValue:o,multi:!0},o),t({provide:ho,useValue:()=>oe(o),multi:!0},o)}let c=i.providers;if(c!=null&&!a){let u=e;ua(c,l=>{t(l,u)})}}else return!1;return o!==e&&e.providers!==void 0}function ua(e,t){for(let n of e)Yu(n)&&(n=n.\u0275providers),Array.isArray(n)?ua(n,t):t(n)}var xg=U({provide:String,useValue:U});function pl(e){return e!==null&&typeof e=="object"&&xg in e}function Ag(e){return!!(e&&e.useExisting)}function Mg(e){return!!(e&&e.useFactory)}function gn(e){return typeof e=="function"}function Ng(e){return!!e.useClass}var gl=new B(""),ro={},Og={},Ki;function Lo(){return Ki===void 0&&(Ki=new po),Ki}var it=class{},Gn=class extends it{get destroyed(){return this._destroyed}constructor(t,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ms(t,s=>this.processProvider(s)),this.records.set(el,cn(void 0,this)),o.has("environment")&&this.records.set(it,cn(void 0,this));let i=this.records.get(gl);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(tl,de,k.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=L(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),L(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=nt(this),r=le(void 0),o;try{return t()}finally{nt(n),le(r)}}get(t,n=Hn,r=k.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(cu))return t[cu](this);r=ko(r);let o,i=nt(this),s=le(void 0);try{if(!(r&k.SkipSelf)){let c=this.records.get(t);if(c===void 0){let u=Lg(t)&&Ro(t);u&&this.injectableDefInScope(u)?c=cn(gs(t),ro):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let a=r&k.Self?Lo():this.parent;return n=r&k.Optional&&n===Hn?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[lo]=a[lo]||[]).unshift(ae(t)),i)throw a;return eg(a,t,"R3InjectorError",this.source)}else throw a}finally{le(s),nt(i)}}resolveInjectorInitializers(){let t=L(null),n=nt(this),r=le(void 0),o;try{let i=this.get(ho,de,k.Self);for(let s of i)s()}finally{nt(n),le(r),L(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(ae(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new F(205,!1)}processProvider(t){t=se(t);let n=gn(t)?t:se(t&&t.provide),r=kg(t);if(!gn(t)&&t.multi===!0){let o=this.records.get(n);o||(o=cn(void 0,ro,!0),o.factory=()=>fs(o.multi),this.records.set(n,o)),n=t,o.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=L(null);try{return n.value===ro&&(n.value=Og,n.value=n.factory()),typeof n.value=="object"&&n.value&&Fg(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{L(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=se(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function gs(e){let t=Ro(e),n=t!==null?t.factory:Tt(e);if(n!==null)return n;if(e instanceof B)throw new F(204,!1);if(e instanceof Function)return Rg(e);throw new F(204,!1)}function Rg(e){if(e.length>0)throw new F(204,!1);let n=$p(e);return n!==null?()=>n.factory(e):()=>new e}function kg(e){if(pl(e))return cn(void 0,e.useValue);{let t=ml(e);return cn(t,ro)}}function ml(e,t,n){let r;if(gn(e)){let o=se(e);return Tt(o)||gs(o)}else if(pl(e))r=()=>se(e.useValue);else if(Mg(e))r=()=>e.useFactory(...fs(e.deps||[]));else if(Ag(e))r=()=>oe(se(e.useExisting));else{let o=se(e&&(e.useClass||e.provide));if(Pg(e))r=()=>new o(...fs(e.deps));else return Tt(o)||gs(o)}return r}function cn(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Pg(e){return!!e.deps}function Fg(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function Lg(e){return typeof e=="function"||typeof e=="object"&&e instanceof B}function ms(e,t){for(let n of e)Array.isArray(n)?ms(n,t):n&&Yu(n)?ms(n.\u0275providers,t):t(n)}function jg(e,t){e instanceof Gn&&e.assertNotDestroyed();let n,r=nt(e),o=le(void 0);try{return t()}finally{nt(r),le(o)}}function yl(){return Ju()!==void 0||Qp()!=null}function $g(e){if(!yl())throw new F(-203,!1)}function Ug(e){return typeof e=="function"}var qe=0,O=1,S=2,ne=3,Te=4,ge=5,zn=6,Kn=7,Se=8,mn=9,xe=10,K=11,Yn=12,pu=13,_n=14,Ae=15,nr=16,un=17,He=18,jo=19,vl=20,rt=21,Yi=22,St=23,pe=25,wl=1;var xt=7,go=8,yn=9,he=10,la=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(la||{});function It(e){return Array.isArray(e)&&typeof e[wl]=="object"}function We(e){return Array.isArray(e)&&e[wl]===!0}function da(e){return(e.flags&4)!==0}function $o(e){return e.componentOffset>-1}function Uo(e){return(e.flags&1)===1}function st(e){return!!e.template}function Vg(e){return(e[S]&512)!==0}var ys=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function _l(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function bl(){return El}function El(e){return e.type.prototype.ngOnChanges&&(e.setInput=Hg),Bg}bl.ngInherit=!0;function Bg(){let e=Il(this),t=e?.current;if(t){let n=e.previous;if(n===pn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Hg(e,t,n,r,o){let i=this.declaredInputs[r],s=Il(e)||qg(e,{previous:pn,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[i];a[i]=new ys(u&&u.currentValue,n,c===pn),_l(e,t,o,n)}var Dl="__ngSimpleChanges__";function Il(e){return e[Dl]||null}function qg(e,t){return e[Dl]=t}var gu=null;var Pe=function(e,t,n){gu?.(e,t,n)},Cl="svg",Wg="math",Gg=!1;function zg(){return Gg}function Le(e){for(;Array.isArray(e);)e=e[qe];return e}function Tl(e,t){return Le(t[e])}function ve(e,t){return Le(t[e.index])}function Sl(e,t){return e.data[t]}function xl(e,t){return e[t]}function ut(e,t){let n=t[e];return It(n)?n:n[qe]}function Kg(e){return(e[S]&4)===4}function fa(e){return(e[S]&128)===128}function Yg(e){return We(e[ne])}function vn(e,t){return t==null?null:e[t]}function Al(e){e[un]=0}function Jg(e){e[S]&1024||(e[S]|=1024,fa(e)&&Jn(e))}function Qg(e,t){for(;e>0;)t=t[_n],e--;return t}function ha(e){return!!(e[S]&9216||e[St]?.dirty)}function vs(e){e[xe].changeDetectionScheduler?.notify(1),ha(e)?Jn(e):e[S]&64&&(zg()?(e[S]|=1024,Jn(e)):e[xe].changeDetectionScheduler?.notify())}function Jn(e){e[xe].changeDetectionScheduler?.notify();let t=Qn(e);for(;t!==null&&!(t[S]&8192||(t[S]|=8192,!fa(t)));)t=Qn(t)}function Ml(e,t){if((e[S]&256)===256)throw new F(911,!1);e[rt]===null&&(e[rt]=[]),e[rt].push(t)}function Zg(e,t){if(e[rt]===null)return;let n=e[rt].indexOf(t);n!==-1&&e[rt].splice(n,1)}function Qn(e){let t=e[ne];return We(t)?t[ne]:t}var M={lFrame:jl(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Xg(){return M.lFrame.elementDepthCount}function em(){M.lFrame.elementDepthCount++}function tm(){M.lFrame.elementDepthCount--}function Nl(){return M.bindingsEnabled}function Ol(){return M.skipHydrationRootTNode!==null}function nm(e){return M.skipHydrationRootTNode===e}function rm(){M.skipHydrationRootTNode=null}function x(){return M.lFrame.lView}function J(){return M.lFrame.tView}function Gx(e){return M.lFrame.contextLView=e,e[Se]}function zx(e){return M.lFrame.contextLView=null,e}function ie(){let e=Rl();for(;e!==null&&e.type===64;)e=e.parent;return e}function Rl(){return M.lFrame.currentTNode}function om(){let e=M.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Lt(e,t){let n=M.lFrame;n.currentTNode=e,n.isParent=t}function pa(){return M.lFrame.isParent}function ga(){M.lFrame.isParent=!1}function im(){return M.lFrame.contextLView}function jt(){let e=M.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function kl(){return M.lFrame.bindingIndex}function sm(e){return M.lFrame.bindingIndex=e}function Vo(){return M.lFrame.bindingIndex++}function Bo(e){let t=M.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function am(){return M.lFrame.inI18n}function cm(e,t){let n=M.lFrame;n.bindingIndex=n.bindingRootIndex=e,ws(t)}function um(){return M.lFrame.currentDirectiveIndex}function ws(e){M.lFrame.currentDirectiveIndex=e}function lm(e){let t=M.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function Pl(){return M.lFrame.currentQueryIndex}function ma(e){M.lFrame.currentQueryIndex=e}function dm(e){let t=e[O];return t.type===2?t.declTNode:t.type===1?e[ge]:null}function Fl(e,t,n){if(n&k.SkipSelf){let o=t,i=e;for(;o=o.parent,o===null&&!(n&k.Host);)if(o=dm(i),o===null||(i=i[_n],o.type&10))break;if(o===null)return!1;t=o,e=i}let r=M.lFrame=Ll();return r.currentTNode=t,r.lView=e,!0}function ya(e){let t=Ll(),n=e[O];M.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Ll(){let e=M.lFrame,t=e===null?null:e.child;return t===null?jl(e):t}function jl(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function $l(){let e=M.lFrame;return M.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Ul=$l;function va(){let e=$l();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function fm(e){return(M.lFrame.contextLView=Qg(e,M.lFrame.contextLView))[Se]}function Ge(){return M.lFrame.selectedIndex}function At(e){M.lFrame.selectedIndex=e}function wa(){let e=M.lFrame;return Sl(e.tView,e.selectedIndex)}function Kx(){M.lFrame.currentNamespace=Cl}function hm(){return M.lFrame.currentNamespace}var Vl=!0;function Ho(){return Vl}function qo(e){Vl=e}function pm(e,t,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=t.type.prototype;if(r){let s=El(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}o&&(n.preOrderHooks??=[]).push(0-e,o),i&&((n.preOrderHooks??=[]).push(e,i),(n.preOrderCheckHooks??=[]).push(e,i))}function Wo(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let i=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=i;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),u&&((e.viewHooks??=[]).push(n,u),(e.viewCheckHooks??=[]).push(n,u)),l!=null&&(e.destroyHooks??=[]).push(n,l)}}function oo(e,t,n){Bl(e,t,3,n)}function io(e,t,n,r){(e[S]&3)===n&&Bl(e,t,n,r)}function Ji(e,t){let n=e[S];(n&3)===t&&(n&=16383,n+=1,e[S]=n)}function Bl(e,t,n,r){let o=r!==void 0?e[un]&65535:0,i=r??-1,s=t.length-1,a=0;for(let c=o;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[un]+=65536),(a<i||i==-1)&&(gm(e,n,t,c),e[un]=(e[un]&4294901760)+c+2),c++}function mu(e,t){Pe(4,e,t);let n=L(null);try{t.call(e)}finally{L(n),Pe(5,e,t)}}function gm(e,t,n,r){let o=n[r]<0,i=n[r+1],s=o?-n[r]:n[r],a=e[s];o?e[S]>>14<e[un]>>16&&(e[S]&3)===t&&(e[S]+=16384,mu(a,i)):mu(a,i)}var hn=-1,Mt=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function mm(e){return e instanceof Mt}function ym(e){return(e.flags&8)!==0}function vm(e){return(e.flags&16)!==0}function Hl(e){return e!==hn}function mo(e){return e&32767}function wm(e){return e>>16}function yo(e,t){let n=wm(e),r=t;for(;n>0;)r=r[_n],n--;return r}var _s=!0;function vo(e){let t=_s;return _s=e,t}var _m=256,ql=_m-1,Wl=5,bm=0,Fe={};function Em(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Bn)&&(r=n[Bn]),r==null&&(r=n[Bn]=bm++);let o=r&ql,i=1<<o;t.data[e+(o>>Wl)]|=i}function wo(e,t){let n=Gl(e,t);if(n!==-1)return n;let r=t[O];r.firstCreatePass&&(e.injectorIndex=t.length,Qi(r.data,e),Qi(t,null),Qi(r.blueprint,null));let o=_a(e,t),i=e.injectorIndex;if(Hl(o)){let s=mo(o),a=yo(o,t),c=a[O].data;for(let u=0;u<8;u++)t[i+u]=a[s+u]|c[s+u]}return t[i+8]=o,i}function Qi(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Gl(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function _a(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,o=t;for(;o!==null;){if(r=Ql(o),r===null)return hn;if(n++,o=o[_n],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return hn}function bs(e,t,n){Em(e,t,n)}function Dm(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,o=0;for(;o<r;){let i=n[o];if(rl(i))break;if(i===0)o=o+2;else if(typeof i=="number")for(o++;o<r&&typeof n[o]=="string";)o++;else{if(i===t)return n[o+1];o=o+2}}}return null}function zl(e,t,n){if(n&k.Optional||e!==void 0)return e;ia(t,"NodeInjector")}function Kl(e,t,n,r){if(n&k.Optional&&r===void 0&&(r=null),!(n&(k.Self|k.Host))){let o=e[mn],i=le(void 0);try{return o?o.get(t,r,n&k.Optional):Qu(t,r,n&k.Optional)}finally{le(i)}}return zl(r,t,n)}function Yl(e,t,n,r=k.Default,o){if(e!==null){if(t[S]&2048&&!(r&k.Self)){let s=Sm(e,t,n,r,Fe);if(s!==Fe)return s}let i=Jl(e,t,n,r,Fe);if(i!==Fe)return i}return Kl(t,n,r,o)}function Jl(e,t,n,r,o){let i=Cm(n);if(typeof i=="function"){if(!Fl(t,e,r))return r&k.Host?zl(o,n,r):Kl(t,n,r,o);try{let s;if(s=i(r),s==null&&!(r&k.Optional))ia(n);else return s}finally{Ul()}}else if(typeof i=="number"){let s=null,a=Gl(e,t),c=hn,u=r&k.Host?t[Ae][ge]:null;for((a===-1||r&k.SkipSelf)&&(c=a===-1?_a(e,t):t[a+8],c===hn||!vu(r,!1)?a=-1:(s=t[O],a=mo(c),t=yo(c,t)));a!==-1;){let l=t[O];if(yu(i,a,l.data)){let f=Im(a,t,n,s,r,u);if(f!==Fe)return f}c=t[a+8],c!==hn&&vu(r,t[O].data[a+8]===u)&&yu(i,a,t)?(s=l,a=mo(c),t=yo(c,t)):a=-1}}return o}function Im(e,t,n,r,o,i){let s=t[O],a=s.data[e+8],c=r==null?$o(a)&&_s:r!=s&&(a.type&3)!==0,u=o&k.Host&&i===a,l=so(a,s,n,c,u);return l!==null?Nt(t,s,l,a):Fe}function so(e,t,n,r,o){let i=e.providerIndexes,s=t.data,a=i&1048575,c=e.directiveStart,u=e.directiveEnd,l=i>>20,f=r?a:a+l,p=o?a+l:u;for(let h=f;h<p;h++){let g=s[h];if(h<c&&n===g||h>=c&&g.type===n)return h}if(o){let h=s[c];if(h&&st(h)&&h.type===n)return c}return null}function Nt(e,t,n,r){let o=e[n],i=t.data;if(mm(o)){let s=o;s.resolving&&Gp(Wp(i[n]));let a=vo(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?le(s.injectImpl):null,l=Fl(e,r,k.Default);try{o=e[n]=s.factory(void 0,i,e,r),t.firstCreatePass&&n>=r.directiveStart&&pm(n,i[n],t)}finally{u!==null&&le(u),vo(a),s.resolving=!1,Ul()}}return o}function Cm(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Bn)?e[Bn]:void 0;return typeof t=="number"?t>=0?t&ql:Tm:t}function yu(e,t,n){let r=1<<e;return!!(n[t+(e>>Wl)]&r)}function vu(e,t){return!(e&k.Self)&&!(e&k.Host&&t)}var Ct=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Yl(this._tNode,this._lView,t,ko(r),n)}};function Tm(){return new Ct(ie(),x())}function Yx(e){return er(()=>{let t=e.prototype.constructor,n=t[uo]||Es(t),r=Object.prototype,o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==r;){let i=o[uo]||Es(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Es(e){return Wu(e)?()=>{let t=Es(se(e));return t&&t()}:Tt(e)}function Sm(e,t,n,r,o){let i=e,s=t;for(;i!==null&&s!==null&&s[S]&2048&&!(s[S]&512);){let a=Jl(i,s,n,r|k.Self,Fe);if(a!==Fe)return a;let c=i.parent;if(!c){let u=s[vl];if(u){let l=u.get(n,Fe,r);if(l!==Fe)return l}c=Ql(s),s=s[_n]}i=c}return o}function Ql(e){let t=e[O],n=t.type;return n===2?t.declTNode:n===1?e[ge]:null}function xm(e){return Dm(ie(),e)}function wu(e,t=null,n=null,r){let o=Zl(e,t,n,r);return o.resolveInjectorInitializers(),o}function Zl(e,t=null,n=null,r,o=new Set){let i=[n||de,Sg(e)];return r=r||(typeof e=="object"?void 0:ae(e)),new Gn(i,t||Lo(),r||null,o)}var rr=(()=>{class e{static{this.THROW_IF_NOT_FOUND=Hn}static{this.NULL=new po}static create(n,r){if(Array.isArray(n))return wu({name:""},r,n,"");{let o=n.name??"";return wu({name:o},n.parent,n.providers,o)}}static{this.\u0275prov=H({token:e,providedIn:"any",factory:()=>oe(el)})}static{this.__NG_ELEMENT_ID__=-1}}return e})();var Am="ngOriginalError";function Zi(e){return e[Am]}var Ot=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Zi(t);for(;n&&Zi(n);)n=Zi(n);return n||null}},Xl=new B("",{providedIn:"root",factory:()=>$(Ot).handleError.bind(void 0)}),ba=(()=>{class e{static{this.__NG_ELEMENT_ID__=Mm}static{this.__NG_ENV_ID__=n=>n}}return e})(),Ds=class extends ba{constructor(t){super(),this._lView=t}onDestroy(t){return Ml(this._lView,t),()=>Zg(this._lView,t)}};function Mm(){return new Ds(x())}function Nm(){return bn(ie(),x())}function bn(e,t){return new $t(ve(e,t))}var $t=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=Nm}}return e})();function Om(e){return e instanceof $t?e.nativeElement:e}var Is=class extends tt{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,yl()&&(this.destroyRef=$(ba,{optional:!0})??void 0)}emit(t){let n=L(null);try{super.next(t)}finally{L(n)}}subscribe(t,n,r){let o=t,i=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=Xi(i),o&&(o=Xi(o)),s&&(s=Xi(s)));let a=super.subscribe({next:o,error:i,complete:s});return t instanceof Q&&t.add(a),a}};function Xi(e){return t=>{setTimeout(e,void 0,t)}}var Dt=Is;function Rm(){return this._results[Symbol.iterator]()}var Cs=class e{get changes(){return this._changes??=new Dt}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=Rm)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=ig(t);(this._changesDetected=!og(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function ed(e){return(e.flags&128)===128}var td=new Map,km=0;function Pm(){return km++}function Fm(e){td.set(e[jo],e)}function Lm(e){td.delete(e[jo])}var _u="__ngContext__";function at(e,t){It(t)?(e[_u]=t[jo],Fm(t)):e[_u]=t}function nd(e){return od(e[Yn])}function rd(e){return od(e[Te])}function od(e){for(;e!==null&&!We(e);)e=e[Te];return e}var Ts;function Jx(e){Ts=e}function jm(){if(Ts!==void 0)return Ts;if(typeof document<"u")return document;throw new F(210,!1)}var Qx=new B("",{providedIn:"root",factory:()=>$m}),$m="ng",Um=new B(""),Ea=new B("",{providedIn:"platform",factory:()=>"unknown"});var Zx=new B(""),Xx=new B("",{providedIn:"root",factory:()=>jm().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Vm="h",Bm="b";var Hm=()=>null;function Da(e,t,n=!1){return Hm(e,t,n)}var id=!1,qm=new B("",{providedIn:"root",factory:()=>id});var eo;function Wm(){if(eo===void 0&&(eo=null,ke.trustedTypes))try{eo=ke.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return eo}function bu(e){return Wm()?.createScriptURL(e)||e}var _o=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Vu})`}};function or(e){return e instanceof _o?e.changingThisBreaksApplicationSecurity:e}function sd(e,t){let n=Gm(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Vu})`)}return n===t}function Gm(e){return e instanceof _o&&e.getTypeName()||null}var zm=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Km(e){return e=String(e),e.match(zm)?e:"unsafe:"+e}var Ia=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Ia||{});function Ym(e){let t=ad();return t?t.sanitize(Ia.URL,e)||"":sd(e,"URL")?or(e):Km(Ve(e))}function Jm(e){let t=ad();if(t)return bu(t.sanitize(Ia.RESOURCE_URL,e)||"");if(sd(e,"ResourceURL"))return bu(or(e));throw new F(904,!1)}function Qm(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?Jm:Ym}function eA(e,t,n){return Qm(t,n)(e)}function ad(){let e=x();return e&&e[xe].sanitizer}var Zm=/^>|^->|<!--|-->|--!>|<!-$/g,Xm=/(<|>)/g,ey="\u200B$1\u200B";function ty(e){return e.replace(Zm,t=>t.replace(Xm,ey))}function tA(e){return e.ownerDocument}function cd(e){return e instanceof Function?e():e}function ny(e){return(e??$(rr)).get(Ea)==="browser"}var bo=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(bo||{}),ry;function Ca(e,t){return ry(e,t)}function ln(e,t,n,r,o){if(r!=null){let i,s=!1;We(r)?i=r:It(r)&&(s=!0,r=r[qe]);let a=Le(r);e===0&&n!==null?o==null?pd(t,n,a):Eo(t,n,a,o||null,!0):e===1&&n!==null?Eo(t,n,a,o||null,!0):e===2?wy(t,a,s):e===3&&t.destroyNode(a),i!=null&&by(t,e,i,n,o)}}function oy(e,t){return e.createText(t)}function iy(e,t,n){e.setValue(t,n)}function sy(e,t){return e.createComment(ty(t))}function ud(e,t,n){return e.createElement(t,n)}function ay(e,t){ld(e,t),t[qe]=null,t[ge]=null}function cy(e,t,n,r,o,i){r[qe]=o,r[ge]=t,zo(e,r,n,1,o,i)}function ld(e,t){t[xe].changeDetectionScheduler?.notify(1),zo(e,t,t[K],2,null,null)}function uy(e){let t=e[Yn];if(!t)return es(e[O],e);for(;t;){let n=null;if(It(t))n=t[Yn];else{let r=t[he];r&&(n=r)}if(!n){for(;t&&!t[Te]&&t!==e;)It(t)&&es(t[O],t),t=t[ne];t===null&&(t=e),It(t)&&es(t[O],t),n=t&&t[Te]}t=n}}function ly(e,t,n,r){let o=he+r,i=n.length;r>0&&(n[o-1][Te]=t),r<i-he?(t[Te]=n[o],Xu(n,he+r,t)):(n.push(t),t[Te]=null),t[ne]=n;let s=t[nr];s!==null&&n!==s&&dy(s,t);let a=t[He];a!==null&&a.insertView(e),vs(t),t[S]|=128}function dy(e,t){let n=e[yn],o=t[ne][ne][Ae];t[Ae]!==o&&(e[S]|=la.HasTransplantedViews),n===null?e[yn]=[t]:n.push(t)}function dd(e,t){let n=e[yn],r=n.indexOf(t);n.splice(r,1)}function Ss(e,t){if(e.length<=he)return;let n=he+t,r=e[n];if(r){let o=r[nr];o!==null&&o!==e&&dd(o,r),t>0&&(e[n-1][Te]=r[Te]);let i=fo(e,he+t);ay(r[O],r);let s=i[He];s!==null&&s.detachView(i[O]),r[ne]=null,r[Te]=null,r[S]&=-129}return r}function fd(e,t){if(!(t[S]&256)){let n=t[K];n.destroyNode&&zo(e,t,n,3,null,null),uy(t)}}function es(e,t){if(t[S]&256)return;let n=L(null);try{t[S]&=-129,t[S]|=256,t[St]&&ru(t[St]),hy(e,t),fy(e,t),t[O].type===1&&t[K].destroy();let r=t[nr];if(r!==null&&We(t[ne])){r!==t[ne]&&dd(r,t);let o=t[He];o!==null&&o.detachView(e)}Lm(t)}finally{L(n)}}function fy(e,t){let n=e.cleanup,r=t[Kn];if(n!==null)for(let i=0;i<n.length-1;i+=2)if(typeof n[i]=="string"){let s=n[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else{let s=r[n[i+1]];n[i].call(s)}r!==null&&(t[Kn]=null);let o=t[rt];if(o!==null){t[rt]=null;for(let i=0;i<o.length;i++){let s=o[i];s()}}}function hy(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=t[n[r]];if(!(o instanceof Mt)){let i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],c=i[s+1];Pe(4,a,c);try{c.call(a)}finally{Pe(5,a,c)}}else{Pe(4,o,i);try{i.call(o)}finally{Pe(5,o,i)}}}}}function hd(e,t,n){return py(e,t.parent,n)}function py(e,t,n){let r=t;for(;r!==null&&r.type&40;)t=r,r=t.parent;if(r===null)return n[qe];{let{componentOffset:o}=r;if(o>-1){let{encapsulation:i}=e.data[r.directiveStart+o];if(i===qn.None||i===qn.Emulated)return null}return ve(r,n)}}function Eo(e,t,n,r,o){e.insertBefore(t,n,r,o)}function pd(e,t,n){e.appendChild(t,n)}function Eu(e,t,n,r,o){r!==null?Eo(e,t,n,r,o):pd(e,t,n)}function gy(e,t,n,r){e.removeChild(t,n,r)}function Ta(e,t){return e.parentNode(t)}function my(e,t){return e.nextSibling(t)}function gd(e,t,n){return vy(e,t,n)}function yy(e,t,n){return e.type&40?ve(e,n):null}var vy=yy,Du;function Go(e,t,n,r){let o=hd(e,r,t),i=t[K],s=r.parent||t[ge],a=gd(s,r,t);if(o!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Eu(i,o,n[c],a,!1);else Eu(i,o,n,a,!1);Du!==void 0&&Du(i,r,t,n,o)}function ao(e,t){if(t!==null){let n=t.type;if(n&3)return ve(t,e);if(n&4)return xs(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return ao(e,r);{let o=e[t.index];return We(o)?xs(-1,o):Le(o)}}else{if(n&32)return Ca(t,e)()||Le(e[t.index]);{let r=md(e,t);if(r!==null){if(Array.isArray(r))return r[0];let o=Qn(e[Ae]);return ao(o,r)}else return ao(e,t.next)}}}return null}function md(e,t){if(t!==null){let r=e[Ae][ge],o=t.projection;return r.projection[o]}return null}function xs(e,t){let n=he+e+1;if(n<t.length){let r=t[n],o=r[O].firstChild;if(o!==null)return ao(r,o)}return t[xt]}function wy(e,t,n){let r=Ta(e,t);r&&gy(e,r,t,n)}function Sa(e,t,n,r,o,i,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&t===0&&(a&&at(Le(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Sa(e,t,n.child,r,o,i,!1),ln(t,e,o,a,i);else if(c&32){let u=Ca(n,r),l;for(;l=u();)ln(t,e,o,l,i);ln(t,e,o,a,i)}else c&16?yd(e,t,r,n,o,i):ln(t,e,o,a,i);n=s?n.projectionNext:n.next}}function zo(e,t,n,r,o,i){Sa(n,r,e.firstChild,t,o,i,!1)}function _y(e,t,n){let r=t[K],o=hd(e,n,t),i=n.parent||t[ge],s=gd(i,n,t);yd(r,0,t,n,o,s)}function yd(e,t,n,r,o,i){let s=n[Ae],c=s[ge].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];ln(t,e,o,l,i)}else{let u=c,l=s[ne];ed(r)&&(u.flags|=128),Sa(e,t,u,l,o,i,!0)}}function by(e,t,n,r,o){let i=n[xt],s=Le(n);i!==s&&ln(t,e,r,i,o);for(let a=he;a<n.length;a++){let c=n[a];zo(c[O],c,e,t,r,i)}}function Ey(e,t,n,r,o){if(t)o?e.addClass(n,r):e.removeClass(n,r);else{let i=r.indexOf("-")===-1?void 0:bo.DashCase;o==null?e.removeStyle(n,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=bo.Important),e.setStyle(n,r,o,i))}}function Dy(e,t,n){e.setAttribute(t,"style",n)}function vd(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function wd(e,t,n){let{mergedAttrs:r,classes:o,styles:i}=n;r!==null&&hs(e,t,r),o!==null&&vd(e,t,o),i!==null&&Dy(e,t,i)}var fe={};function nA(e=1){_d(J(),x(),Ge()+e,!1)}function _d(e,t,n,r){if(!r)if((t[S]&3)===3){let i=e.preOrderCheckHooks;i!==null&&oo(t,i,n)}else{let i=e.preOrderHooks;i!==null&&io(t,i,0,n)}At(n)}function me(e,t=k.Default){let n=x();if(n===null)return oe(e,t);let r=ie();return Yl(r,n,se(e),t)}function rA(){let e="invalid";throw new Error(e)}function bd(e,t,n,r,o,i){let s=L(null);try{let a=null;o&ot.SignalBased&&(a=t[r][Hi]),a!==null&&a.transformFn!==void 0&&(i=a.transformFn(i)),o&ot.HasDecoratorInputTransform&&(i=e.inputTransforms[r].call(t,i)),e.setInput!==null?e.setInput(t,a,i,n,r):_l(t,a,r,i)}finally{L(s)}}function Iy(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)At(~o);else{let i=o,s=n[++r],a=n[++r];cm(s,i);let c=t[i];a(2,c)}}}finally{At(-1)}}function Ko(e,t,n,r,o,i,s,a,c,u,l){let f=t.blueprint.slice();return f[qe]=o,f[S]=r|4|128|8|64,(u!==null||e&&e[S]&2048)&&(f[S]|=2048),Al(f),f[ne]=f[_n]=e,f[Se]=n,f[xe]=s||e&&e[xe],f[K]=a||e&&e[K],f[mn]=c||e&&e[mn]||null,f[ge]=i,f[jo]=Pm(),f[zn]=l,f[vl]=u,f[Ae]=t.type==2?e[Ae]:f,f}function En(e,t,n,r,o){let i=e.data[t];if(i===null)i=Cy(e,t,n,r,o),am()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=o;let s=om();i.injectorIndex=s===null?-1:s.injectorIndex}return Lt(i,!0),i}function Cy(e,t,n,r,o){let i=Rl(),s=pa(),a=s?i:i&&i.parent,c=e.data[t]=Ny(e,a,n,t,r,o);return e.firstChild===null&&(e.firstChild=c),i!==null&&(s?i.child==null&&c.parent!==null&&(i.child=c):i.next===null&&(i.next=c,c.prev=i)),c}function Ed(e,t,n,r){if(n===0)return-1;let o=t.length;for(let i=0;i<n;i++)t.push(r),e.blueprint.push(r),e.data.push(null);return o}function Dd(e,t,n,r,o){let i=Ge(),s=r&2;try{At(-1),s&&t.length>pe&&_d(e,t,pe,!1),Pe(s?2:0,o),n(r,o)}finally{At(i),Pe(s?3:1,o)}}function xa(e,t,n){if(da(t)){let r=L(null);try{let o=t.directiveStart,i=t.directiveEnd;for(let s=o;s<i;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{L(r)}}}function Aa(e,t,n){Nl()&&(Ly(e,t,n,ve(n,t)),(n.flags&64)===64&&Sd(e,t,n))}function Ma(e,t,n=ve){let r=t.localNames;if(r!==null){let o=t.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?n(t,e):e[s];e[o++]=a}}}function Id(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Na(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Na(e,t,n,r,o,i,s,a,c,u,l){let f=pe+r,p=f+o,h=Ty(f,p),g=typeof u=="function"?u():u;return h[O]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:l}}function Ty(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:fe);return n}function Sy(e,t,n,r){let i=r.get(qm,id)||n===qn.ShadowDom,s=e.selectRootElement(t,i);return xy(s),s}function xy(e){Ay(e)}var Ay=()=>null;function My(e,t,n,r){let o=Md(t);o.push(n),e.firstCreatePass&&Nd(e).push(r,o.length-1)}function Ny(e,t,n,r,o,i){let s=t?t.injectorIndex:-1,a=0;return Ol()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Iu(e,t,n,r,o){for(let i in t){if(!t.hasOwnProperty(i))continue;let s=t[i];if(s===void 0)continue;r??={};let a,c=ot.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=i;if(o!==null){if(!o.hasOwnProperty(i))continue;u=o[i]}e===0?Cu(r,n,u,a,c):Cu(r,n,u,a)}return r}function Cu(e,t,n,r,o){let i;e.hasOwnProperty(n)?(i=e[n]).push(t,r):i=e[n]=[t,r],o!==void 0&&i.push(o)}function Oy(e,t,n){let r=t.directiveStart,o=t.directiveEnd,i=e.data,s=t.attrs,a=[],c=null,u=null;for(let l=r;l<o;l++){let f=i[l],p=n?n.get(f):null,h=p?p.inputs:null,g=p?p.outputs:null;c=Iu(0,f.inputs,l,c,h),u=Iu(1,f.outputs,l,u,g);let m=c!==null&&s!==null&&!aa(t)?Ky(c,l,s):null;a.push(m)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=u}function Ry(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function Cd(e,t,n,r,o,i,s,a){let c=ve(t,n),u=t.inputs,l;!a&&u!=null&&(l=u[r])?(Ra(e,n,l,r,o),$o(t)&&ky(n,t.index)):t.type&3?(r=Ry(r),o=s!=null?s(o,t.value||"",r):o,i.setProperty(c,r,o)):t.type&12}function ky(e,t){let n=ut(t,e);n[S]&16||(n[S]|=64)}function Oa(e,t,n,r){if(Nl()){let o=r===null?null:{"":-1},i=$y(e,n),s,a;i===null?s=a=null:[s,a]=i,s!==null&&Td(e,t,n,s,o,a),o&&Uy(n,r,o)}n.mergedAttrs=Wn(n.mergedAttrs,n.attrs)}function Td(e,t,n,r,o,i){for(let u=0;u<r.length;u++)bs(wo(n,t),e,r[u].type);By(n,e.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=Ed(e,t,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=Wn(n.mergedAttrs,l.hostAttrs),Hy(e,n,t,c,l),Vy(c,l,o),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let f=l.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}Oy(e,n,i)}function Py(e,t,n,r,o){let i=o.hostBindings;if(i){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;Fy(s)!=a&&s.push(a),s.push(n,r,i)}}function Fy(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function Ly(e,t,n,r){let o=n.directiveStart,i=n.directiveEnd;$o(n)&&qy(t,n,e.data[o+n.componentOffset]),e.firstCreatePass||wo(n,t),at(r,t);let s=n.initialInputs;for(let a=o;a<i;a++){let c=e.data[a],u=Nt(t,e,a,n);if(at(u,t),s!==null&&zy(t,a-o,u,c,n,s),st(c)){let l=ut(n.index,t);l[Se]=Nt(t,e,a,n)}}}function Sd(e,t,n){let r=n.directiveStart,o=n.directiveEnd,i=n.index,s=um();try{At(i);for(let a=r;a<o;a++){let c=e.data[a],u=t[a];ws(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&jy(c,u)}}finally{At(-1),ws(s)}}function jy(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function $y(e,t){let n=e.directiveRegistry,r=null,o=null;if(n)for(let i=0;i<n.length;i++){let s=n[i];if(il(t,s.selectors,!1))if(r||(r=[]),st(s))if(s.findHostDirectiveDefs!==null){let a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s);let c=a.length;As(e,t,c)}else r.unshift(s),As(e,t,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return r===null?null:[r,o]}function As(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function Uy(e,t,n){if(t){let r=e.localNames=[];for(let o=0;o<t.length;o+=2){let i=n[t[o+1]];if(i==null)throw new F(-301,!1);r.push(t[o],i)}}}function Vy(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;st(t)&&(n[""]=e)}}function By(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Hy(e,t,n,r,o){e.data[r]=o;let i=o.factory||(o.factory=Tt(o.type,!0)),s=new Mt(i,st(o),me);e.blueprint[r]=s,n[r]=s,Py(e,t,r,Ed(e,n,o.hostVars,fe),o)}function qy(e,t,n){let r=ve(t,e),o=Id(n),i=e[xe].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Yo(e,Ko(e,o,null,s,r,t,null,i.createRenderer(r,n),null,null,null));e[t.index]=a}function Wy(e,t,n,r,o,i){let s=ve(e,t);Gy(t[K],s,i,e.value,n,r,o)}function Gy(e,t,n,r,o,i,s){if(i==null)e.removeAttribute(t,o,n);else{let a=s==null?Ve(i):s(i,r||"",o);e.setAttribute(t,o,a,n)}}function zy(e,t,n,r,o,i){let s=i[t];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],l=s[a++],f=s[a++];bd(r,n,c,u,l,f)}}function Ky(e,t,n){let r=null,o=0;for(;o<n.length;){let i=n[o];if(i===0){o+=4;continue}else if(i===5){o+=2;continue}if(typeof i=="number")break;if(e.hasOwnProperty(i)){r===null&&(r=[]);let s=e[i];for(let a=0;a<s.length;a+=3)if(s[a]===t){r.push(i,s[a+1],s[a+2],n[o+1]);break}}o+=2}return r}function xd(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function Ad(e,t){let n=e.contentQueries;if(n!==null){let r=L(null);try{for(let o=0;o<n.length;o+=2){let i=n[o],s=n[o+1];if(s!==-1){let a=e.data[s];ma(i),a.contentQueries(2,t[s],s)}}}finally{L(r)}}}function Yo(e,t){return e[Yn]?e[pu][Te]=t:e[Yn]=t,e[pu]=t,t}function Ms(e,t,n){ma(0);let r=L(null);try{t(e,n)}finally{L(r)}}function Md(e){return e[Kn]||(e[Kn]=[])}function Nd(e){return e.cleanup||(e.cleanup=[])}function Od(e,t){let n=e[mn],r=n?n.get(Ot,null):null;r&&r.handleError(t)}function Ra(e,t,n,r,o){for(let i=0;i<n.length;){let s=n[i++],a=n[i++],c=n[i++],u=t[s],l=e.data[s];bd(l,u,r,a,c,o)}}function ka(e,t,n){let r=Tl(t,e);iy(e[K],r,n)}function Yy(e,t){let n=ut(t,e),r=n[O];Jy(r,n);let o=n[qe];o!==null&&n[zn]===null&&(n[zn]=Da(o,n[mn])),Pa(r,n,n[Se])}function Jy(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Pa(e,t,n){ya(t);try{let r=e.viewQuery;r!==null&&Ms(1,r,n);let o=e.template;o!==null&&Dd(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[He]?.finishViewCreation(e),e.staticContentQueries&&Ad(e,t),e.staticViewQueries&&Ms(2,e.viewQuery,n);let i=e.components;i!==null&&Qy(t,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[S]&=-5,va()}}function Qy(e,t){for(let n=0;n<t.length;n++)Yy(e,t[n])}function Zy(e,t,n,r){let o=L(null);try{let i=t.tView,a=e[S]&4096?4096:16,c=Ko(e,i,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=e[t.index];c[nr]=u;let l=e[He];return l!==null&&(c[He]=l.createEmbeddedView(i)),Pa(i,c,n),c}finally{L(o)}}function Tu(e,t){return!t||t.firstChild===null||ed(e)}function Xy(e,t,n,r=!0){let o=t[O];if(ly(o,t,e,n),r){let s=xs(n,e),a=t[K],c=Ta(a,e[xt]);c!==null&&cy(o,e[ge],a,t,c,s)}let i=t[zn];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function Do(e,t,n,r,o=!1){for(;n!==null;){let i=t[n.index];i!==null&&r.push(Le(i)),We(i)&&ev(i,r);let s=n.type;if(s&8)Do(e,t,n.child,r);else if(s&32){let a=Ca(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=md(t,n);if(Array.isArray(a))r.push(...a);else{let c=Qn(t[Ae]);Do(c[O],c,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function ev(e,t){for(let n=he;n<e.length;n++){let r=e[n],o=r[O].firstChild;o!==null&&Do(r[O],r,o,t)}e[xt]!==e[qe]&&t.push(e[xt])}var Rd=[];function tv(e){return e[St]??nv(e)}function nv(e){let t=Rd.pop()??Object.create(ov);return t.lView=e,t}function rv(e){e.lView[St]!==e&&(e.lView=null,Rd.push(e))}var ov=Ln($e({},eu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Jn(e.lView)},consumerOnSignalRead(){this.lView[St]=this}}),kd=100;function Pd(e,t=!0,n=0){let r=e[xe],o=r.rendererFactory,i=!1;i||o.begin?.();try{iv(e,n)}catch(s){throw t&&Od(e,s),s}finally{i||(o.end?.(),r.inlineEffectRunner?.flush())}}function iv(e,t){Ns(e,t);let n=0;for(;ha(e);){if(n===kd)throw new F(103,!1);n++,Ns(e,1)}}function sv(e,t,n,r){let o=t[S];if((o&256)===256)return;let i=!1;!i&&t[xe].inlineEffectRunner?.flush(),ya(t);let s=null,a=null;!i&&av(e)&&(a=tv(t),s=tu(a));try{Al(t),sm(e.bindingStartIndex),n!==null&&Dd(e,t,n,2,r);let c=(o&3)===3;if(!i)if(c){let f=e.preOrderCheckHooks;f!==null&&oo(t,f,null)}else{let f=e.preOrderHooks;f!==null&&io(t,f,0,null),Ji(t,0)}if(cv(t),Fd(t,0),e.contentQueries!==null&&Ad(e,t),!i)if(c){let f=e.contentCheckHooks;f!==null&&oo(t,f)}else{let f=e.contentHooks;f!==null&&io(t,f,1),Ji(t,1)}Iy(e,t);let u=e.components;u!==null&&jd(t,u,0);let l=e.viewQuery;if(l!==null&&Ms(2,l,r),!i)if(c){let f=e.viewCheckHooks;f!==null&&oo(t,f)}else{let f=e.viewHooks;f!==null&&io(t,f,2),Ji(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Yi]){for(let f of t[Yi])f();t[Yi]=null}i||(t[S]&=-73)}catch(c){throw Jn(t),c}finally{a!==null&&(nu(a,s),rv(a)),va()}}function av(e){return e.type!==2}function Fd(e,t){for(let n=nd(e);n!==null;n=rd(n))for(let r=he;r<n.length;r++){let o=n[r];Ld(o,t)}}function cv(e){for(let t=nd(e);t!==null;t=rd(t)){if(!(t[S]&la.HasTransplantedViews))continue;let n=t[yn];for(let r=0;r<n.length;r++){let o=n[r],i=o[ne];Jg(o)}}}function uv(e,t,n){let r=ut(t,e);Ld(r,n)}function Ld(e,t){fa(e)&&Ns(e,t)}function Ns(e,t){let r=e[O],o=e[S],i=e[St],s=!!(t===0&&o&16);if(s||=!!(o&64&&t===0),s||=!!(o&1024),s||=!!(i?.dirty&&qi(i)),i&&(i.dirty=!1),e[S]&=-9217,s)sv(r,e,r.template,e[Se]);else if(o&8192){Fd(e,1);let a=r.components;a!==null&&jd(e,a,1)}}function jd(e,t,n){for(let r=0;r<t.length;r++)uv(e,t[r],n)}function Fa(e){for(e[xe].changeDetectionScheduler?.notify();e;){e[S]|=64;let t=Qn(e);if(Vg(e)&&!t)return e;e=t}return null}var Rt=class{get rootNodes(){let t=this._lView,n=t[O];return Do(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Se]}set context(t){this._lView[Se]=t}get destroyed(){return(this._lView[S]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[ne];if(We(t)){let n=t[go],r=n?n.indexOf(this):-1;r>-1&&(Ss(t,r),fo(n,r))}this._attachedToViewContainer=!1}fd(this._lView[O],this._lView)}onDestroy(t){Ml(this._lView,t)}markForCheck(){Fa(this._cdRefInjectingView||this._lView)}detach(){this._lView[S]&=-129}reattach(){vs(this._lView),this._lView[S]|=128}detectChanges(){this._lView[S]|=1024,Pd(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new F(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,ld(this._lView[O],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new F(902,!1);this._appRef=t,vs(this._lView)}},kt=(()=>{class e{static{this.__NG_ELEMENT_ID__=fv}}return e})(),lv=kt,dv=class extends lv{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let o=Zy(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new Rt(o)}};function fv(){return Jo(ie(),x())}function Jo(e,t){return e.type&4?new dv(t,e,bn(e,t)):null}var iA=new RegExp(`^(\\d+)*(${Bm}|${Vm})*(.*)`);var hv=()=>null;function Su(e,t){return hv(e,t)}var Io=class{},Os=class{},Co=class{};function pv(e){let t=Error(`No component factory found for ${ae(e)}.`);return t[gv]=e,t}var gv="ngComponent";var Rs=class{resolveComponentFactory(t){throw pv(t)}},Qo=(()=>{class e{static{this.NULL=new Rs}}return e})(),ks=class{},La=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>mv()}}return e})();function mv(){let e=x(),t=ie(),n=ut(t.index,e);return(It(n)?n:e)[K]}var yv=(()=>{class e{static{this.\u0275prov=H({token:e,providedIn:"root",factory:()=>null})}}return e})(),ts={};var xu=new Set;function ja(e){xu.has(e)||(xu.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function Au(...e){}function vv(){let e=typeof ke.requestAnimationFrame=="function",t=ke[e?"requestAnimationFrame":"setTimeout"],n=ke[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);let o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}var ye=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Dt(!1),this.onMicrotaskEmpty=new Dt(!1),this.onStable=new Dt(!1),this.onError=new Dt(!1),typeof Zone>"u")throw new F(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&n,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=vv().nativeRequestAnimationFrame,bv(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new F(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new F(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,t,wv,Au,Au);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},wv={};function $a(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function _v(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ke,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Ps(e),e.isCheckStableRunning=!0,$a(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Ps(e))}function bv(e){let t=()=>{_v(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,o,i,s,a)=>{if(Ev(a))return n.invokeTask(o,i,s,a);try{return Mu(e),n.invokeTask(o,i,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&i.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Nu(e)}},onInvoke:(n,r,o,i,s,a,c)=>{try{return Mu(e),n.invoke(o,i,s,a,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),Nu(e)}},onHasTask:(n,r,o,i)=>{n.hasTask(o,i),r===o&&(i.change=="microTask"?(e._hasPendingMicrotasks=i.microTask,Ps(e),$a(e)):i.change=="macroTask"&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(n,r,o,i)=>(n.handleError(o,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}function Ps(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Mu(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Nu(e){e._nesting--,$a(e)}function Ev(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}var dn=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(dn||{}),Dv={destroy(){}};function Iv(e,t){!t&&$g(Iv);let n=t?.injector??$(rr);if(!ny(n))return Dv;ja("NgAfterNextRender");let r=n.get(Ua),o=r.handler??=new Ls,i=t?.phase??dn.MixedReadWrite,s=()=>{o.unregister(c),a()},a=n.get(ba).onDestroy(s),c=jg(n,()=>new Fs(i,()=>{s(),e()}));return o.register(c),{destroy:s}}var Fs=class{constructor(t,n){this.phase=t,this.callbackFn=n,this.zone=$(ye),this.errorHandler=$(Ot,{optional:!0}),$(Io,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(t){this.errorHandler?.handleError(t)}}},Ls=class{constructor(){this.executingCallbacks=!1,this.buckets={[dn.EarlyRead]:new Set,[dn.Write]:new Set,[dn.MixedReadWrite]:new Set,[dn.Read]:new Set},this.deferredCallbacks=new Set}register(t){(this.executingCallbacks?this.deferredCallbacks:this.buckets[t.phase]).add(t)}unregister(t){this.buckets[t.phase].delete(t),this.deferredCallbacks.delete(t)}execute(){this.executingCallbacks=!0;for(let t of Object.values(this.buckets))for(let n of t)n.invoke();this.executingCallbacks=!1;for(let t of this.deferredCallbacks)this.buckets[t.phase].add(t);this.deferredCallbacks.clear()}destroy(){for(let t of Object.values(this.buckets))t.clear();this.deferredCallbacks.clear()}},Ua=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=H({token:e,providedIn:"root",factory:()=>new e})}}return e})();function To(e,t,n){let r=n?e.styles:null,o=n?e.classes:null,i=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")i=a;else if(i==1)o=us(o,a);else if(i==2){let c=a,u=t[++s];r=us(r,c+": "+u+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=o:e.classesWithoutHost=o}var So=class extends Qo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Be(t);return new Pt(n,this.ngModule)}};function Ou(e){let t=[];for(let n in e){if(!e.hasOwnProperty(n))continue;let r=e[n];r!==void 0&&t.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return t}function Cv(e){let t=e.toLowerCase();return t==="svg"?Cl:t==="math"?Wg:null}var js=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=ko(r);let o=this.injector.get(t,ts,r);return o!==ts||n===ts?o:this.parentInjector.get(t,n,r)}},Pt=class extends Co{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=Ou(t.inputs);if(n!==null)for(let o of r)n.hasOwnProperty(o.propName)&&(o.transform=n[o.propName]);return r}get outputs(){return Ou(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=_g(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,o){let i=L(null);try{o=o||this.ngModule;let s=o instanceof it?o:o?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new js(t,s):t,c=a.get(ks,null);if(c===null)throw new F(407,!1);let u=a.get(yv,null),l=a.get(Ua,null),f=a.get(Io,null),p={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:f},h=c.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",m=r?Sy(h,r,this.componentDef.encapsulation,a):ud(h,g,Cv(g)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let y=null;m!==null&&(y=Da(m,a,!0));let C=Na(0,null,null,1,0,null,null,null,null,null,null),_=Ko(null,C,null,v,null,null,p,h,a,null,y);ya(_);let w,A;try{let z=this.componentDef,P,W=null;z.findHostDirectiveDefs?(P=[],W=new Map,z.findHostDirectiveDefs(z,P,W),P.push(z)):P=[z];let Oe=Tv(_,m),Ee=Sv(Oe,m,z,P,_,p,h);A=Sl(C,pe),m&&Mv(h,z,m,r),n!==void 0&&Nv(A,this.ngContentSelectors,n),w=Av(Ee,z,P,W,_,[Ov]),Pa(C,_,null)}finally{va()}return new $s(this.componentType,w,bn(A,_),_,A)}finally{L(i)}}},$s=class extends Os{constructor(t,n,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Rt(o,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,o;if(r!==null&&(o=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView;Ra(i[O],i,o,t,n),this.previousInputValues.set(t,n);let s=ut(this._tNode.index,i);Fa(s)}}get injector(){return new Ct(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Tv(e,t){let n=e[O],r=pe;return e[r]=t,En(n,r,2,"#host",null)}function Sv(e,t,n,r,o,i,s){let a=o[O];xv(r,e,t,s);let c=null;t!==null&&(c=Da(t,o[mn]));let u=i.rendererFactory.createRenderer(t,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let f=Ko(o,Id(n),null,l,o[e.index],e,i,u,null,null,c);return a.firstCreatePass&&As(a,e,r.length-1),Yo(o,f),o[e.index]=f}function xv(e,t,n,r){for(let o of e)t.mergedAttrs=Wn(t.mergedAttrs,o.hostAttrs);t.mergedAttrs!==null&&(To(t,t.mergedAttrs,!0),n!==null&&wd(r,n,t))}function Av(e,t,n,r,o,i){let s=ie(),a=o[O],c=ve(s,o);Td(a,o,s,n,null,r);for(let l=0;l<n.length;l++){let f=s.directiveStart+l,p=Nt(o,a,f,s);at(p,o)}Sd(a,o,s),c&&at(c,o);let u=Nt(o,a,s.directiveStart+s.componentOffset,s);if(e[Se]=o[Se]=u,i!==null)for(let l of i)l(u,t);return xa(a,s,o),u}function Mv(e,t,n,r){if(r)hs(e,n,["ng-version","17.3.12"]);else{let{attrs:o,classes:i}=bg(t.selectors[0]);o&&hs(e,n,o),i&&i.length>0&&vd(e,n,i.join(" "))}}function Nv(e,t,n){let r=e.projection=[];for(let o=0;o<t.length;o++){let i=n[o];r.push(i!=null?Array.from(i):null)}}function Ov(){let e=ie();Wo(x()[O],e)}var Dn=(()=>{class e{static{this.__NG_ELEMENT_ID__=Rv}}return e})();function Rv(){let e=ie();return Ud(e,x())}var kv=Dn,$d=class extends kv{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return bn(this._hostTNode,this._hostLView)}get injector(){return new Ct(this._hostTNode,this._hostLView)}get parentInjector(){let t=_a(this._hostTNode,this._hostLView);if(Hl(t)){let n=yo(t,this._hostLView),r=mo(t),o=n[O].data[r+8];return new Ct(o,n)}else return new Ct(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Ru(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-he}createEmbeddedView(t,n,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=Su(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(a,o,Tu(this._hostTNode,s)),a}createComponent(t,n,r,o,i){let s=t&&!Ug(t),a;if(s)a=n;else{let g=n||{};a=g.index,r=g.injector,o=g.projectableNodes,i=g.environmentInjector||g.ngModuleRef}let c=s?t:new Pt(Be(t)),u=r||this.parentInjector;if(!i&&c.ngModule==null){let m=(s?u:this.parentInjector).get(it,null);m&&(i=m)}let l=Be(c.componentType??{}),f=Su(this._lContainer,l?.id??null),p=f?.firstChild??null,h=c.create(u,o,p,i);return this.insertImpl(h.hostView,a,Tu(this._hostTNode,f)),h}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let o=t._lView;if(Yg(o)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=o[ne],u=new $d(c,c[ge],c[ne]);u.detach(u.indexOf(t))}}let i=this._adjustIndex(n),s=this._lContainer;return Xy(s,o,i,r),t.attachToViewContainerRef(),Xu(ns(s),i,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Ru(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Ss(this._lContainer,n);r&&(fo(ns(this._lContainer),n),fd(r[O],r))}detach(t){let n=this._adjustIndex(t,-1),r=Ss(this._lContainer,n);return r&&fo(ns(this._lContainer),n)!=null?new Rt(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Ru(e){return e[go]}function ns(e){return e[go]||(e[go]=[])}function Ud(e,t){let n,r=t[e.index];return We(r)?n=r:(n=xd(r,t,null,e),t[e.index]=n,Yo(t,n)),Fv(n,t,e,r),new $d(n,e,t)}function Pv(e,t){let n=e[K],r=n.createComment(""),o=ve(t,e),i=Ta(n,o);return Eo(n,i,r,my(n,o),!1),r}var Fv=$v,Lv=()=>!1;function jv(e,t,n){return Lv(e,t,n)}function $v(e,t,n,r){if(e[xt])return;let o;n.type&8?o=Le(r):o=Pv(t,n),e[xt]=o}var Us=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Vs=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,o=[];for(let i=0;i<r;i++){let s=n.getByIndex(i),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new e(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)Va(t,n).matches!==null&&this.queries[n].setDirty()}},xo=class{constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=zv(t):this.predicate=t}},Bs=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let o=n!==null?n.length:0,i=this.getByIndex(r).embeddedTView(t,o);i&&(i.indexInDeclarationView=r,n!==null?n.push(i):n=[i])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},Hs=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let i=r[o];this.matchTNodeWithReadOption(t,n,Uv(n,i)),this.matchTNodeWithReadOption(t,n,so(n,t,i,!1,!1))}else r===kt?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,so(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===$t||o===Dn||o===kt&&n.type&4)this.addMatch(n.index,-2);else{let i=so(n,t,o,!1,!1);i!==null&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function Uv(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function Vv(e,t){return e.type&11?bn(e,t):e.type&4?Jo(e,t):null}function Bv(e,t,n,r){return n===-1?Vv(t,e):n===-2?Hv(e,t,r):Nt(e,e[O],n,t)}function Hv(e,t,n){if(n===$t)return bn(t,e);if(n===kt)return Jo(t,e);if(n===Dn)return Ud(t,e)}function Vd(e,t,n,r){let o=t[He].queries[r];if(o.matches===null){let i=e.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let l=i[u];a.push(Bv(t,l,s[c+1],n.metadata.read))}}o.matches=a}return o.matches}function qs(e,t,n,r){let o=e.queries.getByIndex(n),i=o.matches;if(i!==null){let s=Vd(e,t,o,n);for(let a=0;a<i.length;a+=2){let c=i[a];if(c>0)r.push(s[a/2]);else{let u=i[a+1],l=t[-c];for(let f=he;f<l.length;f++){let p=l[f];p[nr]===p[ne]&&qs(p[O],p,u,r)}if(l[yn]!==null){let f=l[yn];for(let p=0;p<f.length;p++){let h=f[p];qs(h[O],h,u,r)}}}}}return r}function qv(e,t){return e[He].queries[t].queryList}function Bd(e,t,n){let r=new Cs((n&4)===4);return My(e,t,r,r.destroy),(t[He]??=new Vs).queries.push(new Us(r))-1}function Wv(e,t,n){let r=J();return r.firstCreatePass&&(Hd(r,new xo(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),Bd(r,x(),t)}function Gv(e,t,n,r){let o=J();if(o.firstCreatePass){let i=ie();Hd(o,new xo(t,n,r),i.index),Kv(o,e),(n&2)===2&&(o.staticContentQueries=!0)}return Bd(o,x(),n)}function zv(e){return e.split(",").map(t=>t.trim())}function Hd(e,t,n){e.queries===null&&(e.queries=new Bs),e.queries.track(new Hs(t,n))}function Kv(e,t){let n=e.contentQueries||(e.contentQueries=[]),r=n.length?n[n.length-1]:-1;t!==r&&n.push(e.queries.length-1,t)}function Va(e,t){return e.queries.getByIndex(t)}function Yv(e,t){let n=e[O],r=Va(n,t);return r.crossesNgTemplate?qs(n,e,t,[]):Vd(n,e,r,t)}function Jv(e){return typeof e=="function"&&e[Hi]!==void 0}function qd(e){return Jv(e)&&typeof e.set=="function"}function Qv(e){return Object.getPrototypeOf(e.prototype).constructor}function Zv(e){let t=Qv(e.type),n=!0,r=[e];for(;t;){let o;if(st(e))o=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new F(903,!1);o=t.\u0275dir}if(o){if(n){r.push(o);let s=e;s.inputs=to(e.inputs),s.inputTransforms=to(e.inputTransforms),s.declaredInputs=to(e.declaredInputs),s.outputs=to(e.outputs);let a=o.hostBindings;a&&rw(e,a);let c=o.viewQuery,u=o.contentQueries;if(c&&tw(e,c),u&&nw(e,u),Xv(e,o),Lp(e.outputs,o.outputs),st(o)&&o.data.animation){let l=e.data;l.animation=(l.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(e),a===Zv&&(n=!1)}}t=Object.getPrototypeOf(t)}ew(r)}function Xv(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];if(r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let o=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(o))continue;e.inputTransforms??={},e.inputTransforms[o]=t.inputTransforms[o]}}}function ew(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let o=e[r];o.hostVars=t+=o.hostVars,o.hostAttrs=Wn(o.hostAttrs,n=Wn(n,o.hostAttrs))}}function to(e){return e===pn?{}:e===de?[]:e}function tw(e,t){let n=e.viewQuery;n?e.viewQuery=(r,o)=>{t(r,o),n(r,o)}:e.viewQuery=t}function nw(e,t){let n=e.contentQueries;n?e.contentQueries=(r,o,i)=>{t(r,o,i),n(r,o,i)}:e.contentQueries=t}function rw(e,t){let n=e.hostBindings;n?e.hostBindings=(r,o)=>{t(r,o),n(r,o)}:e.hostBindings=t}function ow(e){let t=e.inputConfig,n={};for(let r in t)if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)&&o[3]&&(n[r]=o[3])}e.inputTransforms=n}var ct=class{},Ws=class{};var Gs=class extends ct{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new So(this);let o=ul(t);this._bootstrapComponents=cd(o.bootstrap),this._r3Injector=Zl(t,n,[{provide:ct,useValue:this},{provide:Qo,useValue:this.componentFactoryResolver},...r],ae(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},zs=class extends Ws{constructor(t){super(),this.moduleType=t}create(t){return new Gs(this.moduleType,t,[])}};var Ao=class extends ct{constructor(t){super(),this.componentFactoryResolver=new So(this),this.instance=null;let n=new Gn([...t.providers,{provide:ct,useValue:this},{provide:Qo,useValue:this.componentFactoryResolver}],t.parent||Lo(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function iw(e,t,n=null){return new Ao({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var Wd=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new jn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Gd(e){return aw(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function sw(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function aw(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function In(e,t,n){return e[t]=n}function zd(e,t){return e[t]}function Me(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function Zn(e,t,n,r){let o=Me(e,t,n);return Me(e,t+1,r)||o}function Kd(e,t,n,r,o){let i=Zn(e,t,n,r);return Me(e,t+2,o)||i}function Yd(e,t,n,r,o,i){let s=Zn(e,t,n,r);return Zn(e,t+2,o,i)||s}function cw(e){return(e.flags&32)===32}function uw(e,t,n,r,o,i,s,a,c){let u=t.consts,l=En(t,e,4,s||null,vn(u,a));Oa(t,n,l,vn(u,c)),Wo(t,l);let f=l.tView=Na(2,l,r,o,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return t.queries!==null&&(t.queries.template(t,l),f.queries=t.queries.embeddedTView(l)),l}function lw(e,t,n,r,o,i,s,a){let c=x(),u=J(),l=e+pe,f=u.firstCreatePass?uw(l,u,c,t,n,r,o,i,s):u.data[l];Lt(f,!1);let p=dw(u,c,f,e);Ho()&&Go(u,c,p,f),at(p,c);let h=xd(p,c,p,f);return c[l]=h,Yo(c,h),jv(h,f,c),Uo(f)&&Aa(u,c,f),s!=null&&Ma(c,f,a),lw}var dw=fw;function fw(e,t,n,r){return qo(!0),t[K].createComment("")}function hw(e,t,n,r){let o=x(),i=Vo();if(Me(o,i,t)){let s=J(),a=wa();Wy(a,o,e,t,n,r)}return hw}function Jd(e,t,n,r){return Me(e,Vo(),n)?t+Ve(n)+r:fe}function pw(e,t,n,r,o,i){let s=kl(),a=Zn(e,s,n,o);return Bo(2),a?t+Ve(n)+r+Ve(o)+i:fe}function gw(e,t,n,r,o,i,s,a){let c=kl(),u=Kd(e,c,n,o,s);return Bo(3),u?t+Ve(n)+r+Ve(o)+i+Ve(s)+a:fe}function no(e,t){return e<<17|t<<2}function Ft(e){return e>>17&32767}function mw(e){return(e&2)==2}function yw(e,t){return e&131071|t<<17}function Ks(e){return e|2}function wn(e){return(e&131068)>>2}function rs(e,t){return e&-131069|t<<2}function vw(e){return(e&1)===1}function Ys(e){return e|1}function ww(e,t,n,r,o,i){let s=i?t.classBindings:t.styleBindings,a=Ft(s),c=wn(s);e[r]=n;let u=!1,l;if(Array.isArray(n)){let f=n;l=f[1],(l===null||tr(f,l)>0)&&(u=!0)}else l=n;if(o)if(c!==0){let p=Ft(e[a+1]);e[r+1]=no(p,a),p!==0&&(e[p+1]=rs(e[p+1],r)),e[a+1]=yw(e[a+1],r)}else e[r+1]=no(a,0),a!==0&&(e[a+1]=rs(e[a+1],r)),a=r;else e[r+1]=no(c,0),a===0?a=r:e[c+1]=rs(e[c+1],r),c=r;u&&(e[r+1]=Ks(e[r+1])),ku(e,l,r,!0),ku(e,l,r,!1),_w(t,l,e,r,i),s=no(a,c),i?t.classBindings=s:t.styleBindings=s}function _w(e,t,n,r,o){let i=o?e.residualClasses:e.residualStyles;i!=null&&typeof t=="string"&&tr(i,t)>=0&&(n[r+1]=Ys(n[r+1]))}function ku(e,t,n,r){let o=e[n+1],i=t===null,s=r?Ft(o):wn(o),a=!1;for(;s!==0&&(a===!1||i);){let c=e[s],u=e[s+1];bw(c,t)&&(a=!0,e[s+1]=r?Ys(u):Ks(u)),s=r?Ft(u):wn(u)}a&&(e[n+1]=r?Ks(o):Ys(o))}function bw(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?tr(e,t)>=0:!1}var Ce={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ew(e){return e.substring(Ce.key,Ce.keyEnd)}function Dw(e){return Iw(e),Qd(e,Zd(e,0,Ce.textEnd))}function Qd(e,t){let n=Ce.textEnd;return n===t?-1:(t=Ce.keyEnd=Cw(e,Ce.key=t,n),Zd(e,t,n))}function Iw(e){Ce.key=0,Ce.keyEnd=0,Ce.value=0,Ce.valueEnd=0,Ce.textEnd=e.length}function Zd(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Cw(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function Tw(e,t,n){let r=x(),o=Vo();if(Me(r,o,t)){let i=J(),s=wa();Cd(i,s,r,e,t,r[K],n,!1)}return Tw}function Js(e,t,n,r,o){let i=t.inputs,s=o?"class":"style";Ra(e,n,i[s],s,r)}function Xd(e,t,n){return tf(e,t,n,!1),Xd}function Sw(e,t){return tf(e,t,null,!0),Sw}function aA(e){nf(Rw,ef,e,!0)}function ef(e,t){for(let n=Dw(t);n>=0;n=Qd(t,n))Po(e,Ew(t),!0)}function tf(e,t,n,r){let o=x(),i=J(),s=Bo(2);if(i.firstUpdatePass&&of(i,e,s,r),t!==fe&&Me(o,s,t)){let a=i.data[Ge()];sf(i,a,o,o[K],e,o[s+1]=Pw(t,n),r,s)}}function nf(e,t,n,r){let o=J(),i=Bo(2);o.firstUpdatePass&&of(o,null,i,r);let s=x();if(n!==fe&&Me(s,i,n)){let a=o.data[Ge()];if(af(a,r)&&!rf(o,i)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=us(c,n||"")),Js(o,a,s,n,r)}else kw(o,a,s,s[K],s[i+1],s[i+1]=Ow(e,t,n),r,i)}}function rf(e,t){return t>=e.expandoStartIndex}function of(e,t,n,r){let o=e.data;if(o[n+1]===null){let i=o[Ge()],s=rf(e,n);af(i,r)&&t===null&&!s&&(t=!1),t=xw(o,i,t,r),ww(o,i,t,n,s,r)}}function xw(e,t,n,r){let o=lm(e),i=r?t.residualClasses:t.residualStyles;if(o===null)(r?t.classBindings:t.styleBindings)===0&&(n=os(null,e,t,n,r),n=Xn(n,t.attrs,r),i=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==o)if(n=os(o,e,t,n,r),i===null){let c=Aw(e,t,r);c!==void 0&&Array.isArray(c)&&(c=os(null,e,t,c[1],r),c=Xn(c,t.attrs,r),Mw(e,t,r,c))}else i=Nw(e,t,r)}return i!==void 0&&(r?t.residualClasses=i:t.residualStyles=i),n}function Aw(e,t,n){let r=n?t.classBindings:t.styleBindings;if(wn(r)!==0)return e[Ft(r)]}function Mw(e,t,n,r){let o=n?t.classBindings:t.styleBindings;e[Ft(o)]=r}function Nw(e,t,n){let r,o=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<o;i++){let s=e[i].hostAttrs;r=Xn(r,s,n)}return Xn(r,t.attrs,n)}function os(e,t,n,r,o){let i=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(i=t[a],r=Xn(r,i.hostAttrs,o),i!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function Xn(e,t,n){let r=n?1:2,o=-1;if(t!==null)for(let i=0;i<t.length;i++){let s=t[i];typeof s=="number"?o=s:o===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Po(e,s,n?!0:t[++i]))}return e===void 0?null:e}function Ow(e,t,n){if(n==null||n==="")return de;let r=[],o=or(n);if(Array.isArray(o))for(let i=0;i<o.length;i++)e(r,o[i],!0);else if(typeof o=="object")for(let i in o)o.hasOwnProperty(i)&&e(r,i,o[i]);else typeof o=="string"&&t(r,o);return r}function Rw(e,t,n){let r=String(t);r!==""&&!r.includes(" ")&&Po(e,r,n)}function kw(e,t,n,r,o,i,s,a){o===fe&&(o=de);let c=0,u=0,l=0<o.length?o[0]:null,f=0<i.length?i[0]:null;for(;l!==null||f!==null;){let p=c<o.length?o[c+1]:void 0,h=u<i.length?i[u+1]:void 0,g=null,m;l===f?(c+=2,u+=2,p!==h&&(g=f,m=h)):f===null||l!==null&&l<f?(c+=2,g=l):(u+=2,g=f,m=h),g!==null&&sf(e,t,n,r,g,m,s,a),l=c<o.length?o[c]:null,f=u<i.length?i[u]:null}}function sf(e,t,n,r,o,i,s,a){if(!(t.type&3))return;let c=e.data,u=c[a+1],l=vw(u)?Pu(c,t,n,o,wn(u),s):void 0;if(!Mo(l)){Mo(i)||mw(u)&&(i=Pu(c,null,n,o,a,s));let f=Tl(Ge(),n);Ey(r,s,f,o,i)}}function Pu(e,t,n,r,o,i){let s=t===null,a;for(;o>0;){let c=e[o],u=Array.isArray(c),l=u?c[1]:c,f=l===null,p=n[o+1];p===fe&&(p=f?de:void 0);let h=f?zi(p,r):l===r?p:void 0;if(u&&!Mo(h)&&(h=zi(c,r)),Mo(h)&&(a=h,s))return a;let g=e[o+1];o=s?Ft(g):wn(g)}if(t!==null){let c=i?t.residualClasses:t.residualStyles;c!=null&&(a=zi(c,r))}return a}function Mo(e){return e!==void 0}function Pw(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=ae(or(e)))),e}function af(e,t){return(e.flags&(t?8:16))!==0}function cA(e,t,n){let r=x(),o=Jd(r,e,t,n);nf(Po,ef,o,!0)}function Fw(e,t,n,r,o,i){let s=t.consts,a=vn(s,o),c=En(t,e,2,r,a);return Oa(t,n,c,vn(s,i)),c.attrs!==null&&To(c,c.attrs,!1),c.mergedAttrs!==null&&To(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function cf(e,t,n,r){let o=x(),i=J(),s=pe+e,a=o[K],c=i.firstCreatePass?Fw(s,i,o,t,n,r):i.data[s],u=jw(i,o,c,a,t,e);o[s]=u;let l=Uo(c);return Lt(c,!0),wd(a,u,c),!cw(c)&&Ho()&&Go(i,o,u,c),Xg()===0&&at(u,o),em(),l&&(Aa(i,o,c),xa(i,c,o)),r!==null&&Ma(o,c),cf}function uf(){let e=ie();pa()?ga():(e=e.parent,Lt(e,!1));let t=e;nm(t)&&rm(),tm();let n=J();return n.firstCreatePass&&(Wo(n,e),da(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&ym(t)&&Js(n,t,x(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&vm(t)&&Js(n,t,x(),t.stylesWithoutHost,!1),uf}function Lw(e,t,n,r){return cf(e,t,n,r),uf(),Lw}var jw=(e,t,n,r,o,i)=>(qo(!0),ud(r,o,hm()));function $w(e,t,n,r,o){let i=t.consts,s=vn(i,r),a=En(t,e,8,"ng-container",s);s!==null&&To(a,s,!0);let c=vn(i,o);return Oa(t,n,a,c),t.queries!==null&&t.queries.elementStart(t,a),a}function Uw(e,t,n){let r=x(),o=J(),i=e+pe,s=o.firstCreatePass?$w(i,o,r,t,n):o.data[i];Lt(s,!0);let a=Bw(o,r,s,e);return r[i]=a,Ho()&&Go(o,r,a,s),at(a,r),Uo(s)&&(Aa(o,r,s),xa(o,s,r)),n!=null&&Ma(r,s),Uw}function Vw(){let e=ie(),t=J();return pa()?ga():(e=e.parent,Lt(e,!1)),t.firstCreatePass&&(Wo(t,e),da(e)&&t.queries.elementEnd(e)),Vw}var Bw=(e,t,n,r)=>(qo(!0),sy(t[K],""));function uA(){return x()}var Et=void 0;function Hw(e){let t=e,n=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var qw=["en",[["a","p"],["AM","PM"],Et],[["AM","PM"],Et,Et],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Et,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Et,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Et,"{1} 'at' {0}",Et],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Hw],is={};function Ba(e){let t=Ww(e),n=Fu(t);if(n)return n;let r=t.split("-")[0];if(n=Fu(r),n)return n;if(r==="en")return qw;throw new F(701,!1)}function Fu(e){return e in is||(is[e]=ke.ng&&ke.ng.common&&ke.ng.common.locales&&ke.ng.common.locales[e]),is[e]}var Cn=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(Cn||{});function Ww(e){return e.toLowerCase().replace(/_/g,"-")}var No="en-US";var Gw=No;function zw(e){typeof e=="string"&&(Gw=e.toLowerCase().replace(/_/g,"-"))}function Kw(e,t,n,r){let o=x(),i=J(),s=ie();return lf(i,o,o[K],s,e,t,r),Kw}function Yw(e,t,n,r){let o=e.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===n&&o[i+1]===r){let a=t[Kn],c=o[i+2];return a.length>c?a[c]:null}typeof s=="string"&&(i+=2)}return null}function lf(e,t,n,r,o,i,s){let a=Uo(r),u=e.firstCreatePass&&Nd(e),l=t[Se],f=Md(t),p=!0;if(r.type&3||s){let m=ve(r,t),v=s?s(m):m,y=f.length,C=s?w=>s(Le(w[r.index])):r.index,_=null;if(!s&&a&&(_=Yw(e,t,o,r.index)),_!==null){let w=_.__ngLastListenerFn__||_;w.__ngNextListenerFn__=i,_.__ngLastListenerFn__=i,p=!1}else{i=ju(r,t,l,i,!1);let w=n.listen(v,o,i);f.push(i,w),u&&u.push(o,C,y,y+1)}}else i=ju(r,t,l,i,!1);let h=r.outputs,g;if(p&&h!==null&&(g=h[o])){let m=g.length;if(m)for(let v=0;v<m;v+=2){let y=g[v],C=g[v+1],A=t[y][C].subscribe(i),z=f.length;f.push(i,A),u&&u.push(o,r.index,z,-(z+1))}}}function Lu(e,t,n,r){let o=L(null);try{return Pe(6,t,n),n(r)!==!1}catch(i){return Od(e,i),!1}finally{Pe(7,t,n),L(o)}}function ju(e,t,n,r,o){return function i(s){if(s===Function)return r;let a=e.componentOffset>-1?ut(e.index,t):t;Fa(a);let c=Lu(t,n,r,s),u=i.__ngNextListenerFn__;for(;u;)c=Lu(t,n,u,s)&&c,u=u.__ngNextListenerFn__;return o&&c===!1&&s.preventDefault(),c}}function lA(e=1){return fm(e)}function Jw(e,t){let n=null,r=gg(e);for(let o=0;o<t.length;o++){let i=t[o];if(i==="*"){n=o;continue}if(r===null?il(e,i,!0):vg(r,i))return o}return n}function dA(e){let t=x()[Ae][ge];if(!t.projection){let n=e?e.length:1,r=t.projection=sg(n,null),o=r.slice(),i=t.child;for(;i!==null;){let s=e?Jw(i,e):0;s!==null&&(o[s]?o[s].projectionNext=i:r[s]=i,o[s]=i),i=i.next}}}function fA(e,t=0,n){let r=x(),o=J(),i=En(o,pe+e,16,null,n||null);i.projection===null&&(i.projection=t),ga(),(!r[zn]||Ol())&&(i.flags&32)!==32&&_y(o,r,i)}function hA(e,t,n,r){Gv(e,t,n,r)}function pA(e,t,n){Wv(e,t,n)}function gA(e){let t=x(),n=J(),r=Pl();ma(r+1);let o=Va(n,r);if(e.dirty&&Kg(t)===((o.metadata.flags&2)===2)){if(o.matches===null)e.reset([]);else{let i=Yv(t,r);e.reset(i,Om),e.notifyOnChanges()}return!0}return!1}function mA(){return qv(x(),Pl())}function Qw(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function yA(e){let t=im();return xl(t,pe+e)}function vA(e,t=""){let n=x(),r=J(),o=e+pe,i=r.firstCreatePass?En(r,o,1,t,null):r.data[o],s=Zw(r,n,i,t,e);n[o]=s,Ho()&&Go(r,n,s,i),Lt(i,!1)}var Zw=(e,t,n,r,o)=>(qo(!0),oy(t[K],r));function Xw(e){return df("",e,""),Xw}function df(e,t,n){let r=x(),o=Jd(r,e,t,n);return o!==fe&&ka(r,Ge(),o),df}function e_(e,t,n,r,o){let i=x(),s=pw(i,e,t,n,r,o);return s!==fe&&ka(i,Ge(),s),e_}function t_(e,t,n,r,o,i,s){let a=x(),c=gw(a,e,t,n,r,o,i,s);return c!==fe&&ka(a,Ge(),c),t_}function n_(e,t,n){qd(t)&&(t=t());let r=x(),o=Vo();if(Me(r,o,t)){let i=J(),s=wa();Cd(i,s,r,e,t,r[K],n,!1)}return n_}function wA(e,t){let n=qd(e);return n&&e.set(t),n}function r_(e,t){let n=x(),r=J(),o=ie();return lf(r,n,n[K],o,e,t),r_}function o_(e,t,n){let r=J();if(r.firstCreatePass){let o=st(e);Qs(n,r.data,r.blueprint,o,!0),Qs(t,r.data,r.blueprint,o,!1)}}function Qs(e,t,n,r,o){if(e=se(e),Array.isArray(e))for(let i=0;i<e.length;i++)Qs(e[i],t,n,r,o);else{let i=J(),s=x(),a=ie(),c=gn(e)?e:se(e.provide),u=ml(e),l=a.providerIndexes&1048575,f=a.directiveStart,p=a.providerIndexes>>20;if(gn(e)||!e.multi){let h=new Mt(u,o,me),g=as(c,t,o?l:l+p,f);g===-1?(bs(wo(a,s),i,c),ss(i,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[g]=h,s[g]=h)}else{let h=as(c,t,l+p,f),g=as(c,t,l,l+p),m=h>=0&&n[h],v=g>=0&&n[g];if(o&&!v||!o&&!m){bs(wo(a,s),i,c);let y=a_(o?s_:i_,n.length,o,r,u);!o&&v&&(n[g].providerFactory=y),ss(i,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(y),s.push(y)}else{let y=ff(n[o?g:h],u,!o&&r);ss(i,e,h>-1?h:g,y)}!o&&r&&v&&n[g].componentProviders++}}}function ss(e,t,n,r){let o=gn(t),i=Ng(t);if(o||i){let c=(i?se(t.useClass):t).prototype.ngOnDestroy;if(c){let u=e.destroyHooks||(e.destroyHooks=[]);if(!o&&t.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function ff(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function as(e,t,n,r){for(let o=n;o<r;o++)if(t[o]===e)return o;return-1}function i_(e,t,n,r){return Zs(this.multi,[])}function s_(e,t,n,r){let o=this.multi,i;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Nt(n,n[O],this.providerFactory.index,r);i=a.slice(0,s),Zs(o,i);for(let c=s;c<a.length;c++)i.push(a[c])}else i=[],Zs(o,i);return i}function Zs(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function a_(e,t,n,r,o){let i=new Mt(e,n,me);return i.multi=[],i.index=t,i.componentProviders=0,ff(i,o,r&&!n),i}function _A(e,t=[]){return n=>{n.providersResolver=(r,o)=>o_(r,o?o(e):e,t)}}var c_=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=fl(!1,n.type),o=r.length>0?iw([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:e,providedIn:"environment",factory:()=>new e(oe(it))})}}return e})();function bA(e){ja("NgStandalone"),e.getStandaloneInjector=t=>t.get(c_).getOrCreateStandaloneInjector(e)}function EA(e,t,n){let r=jt()+e,o=x();return o[r]===fe?In(o,r,n?t.call(n):t()):zd(o,r)}function DA(e,t,n,r){return hf(x(),jt(),e,t,n,r)}function IA(e,t,n,r,o){return u_(x(),jt(),e,t,n,r,o)}function CA(e,t,n,r,o,i){return l_(x(),jt(),e,t,n,r,o,i)}function TA(e,t,n,r,o,i,s){return d_(x(),jt(),e,t,n,r,o,i,s)}function SA(e,t,n,r,o,i,s,a){let c=jt()+e,u=x(),l=Yd(u,c,n,r,o,i);return Me(u,c+4,s)||l?In(u,c+5,a?t.call(a,n,r,o,i,s):t(n,r,o,i,s)):zd(u,c+5)}function Zo(e,t){let n=e[t];return n===fe?void 0:n}function hf(e,t,n,r,o,i){let s=t+n;return Me(e,s,o)?In(e,s+1,i?r.call(i,o):r(o)):Zo(e,s+1)}function u_(e,t,n,r,o,i,s){let a=t+n;return Zn(e,a,o,i)?In(e,a+2,s?r.call(s,o,i):r(o,i)):Zo(e,a+2)}function l_(e,t,n,r,o,i,s,a){let c=t+n;return Kd(e,c,o,i,s)?In(e,c+3,a?r.call(a,o,i,s):r(o,i,s)):Zo(e,c+3)}function d_(e,t,n,r,o,i,s,a,c){let u=t+n;return Yd(e,u,o,i,s,a)?In(e,u+4,c?r.call(c,o,i,s,a):r(o,i,s,a)):Zo(e,u+4)}function xA(e,t){let n=J(),r,o=e+pe;n.firstCreatePass?(r=f_(t,n.pipeRegistry),n.data[o]=r,r.onDestroy&&(n.destroyHooks??=[]).push(o,r.onDestroy)):r=n.data[o];let i=r.factory||(r.factory=Tt(r.type,!0)),s,a=le(me);try{let c=vo(!1),u=i();return vo(c),Qw(n,x(),o,u),u}finally{le(a)}}function f_(e,t){if(t)for(let n=t.length-1;n>=0;n--){let r=t[n];if(e===r.name)return r}}function AA(e,t,n){let r=e+pe,o=x(),i=xl(o,r);return h_(o,r)?hf(o,jt(),t,i.transform,n,i):i.transform(n)}function h_(e,t){return e[O].data[t].pure}function MA(e,t){return Jo(e,t)}var NA=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var p_=new B("");function Ha(e){return!!e&&typeof e.then=="function"}function pf(e){return!!e&&typeof e.subscribe=="function"}var g_=new B(""),gf=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=$(g_,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let o of this.appInits){let i=o();if(Ha(i))n.push(i);else if(pf(i)){let s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),m_=new B("");function y_(){ou(()=>{throw new F(600,!1)})}function v_(e){return e.isBoundToModule}function w_(e,t,n){try{let r=n();return Ha(r)?r.catch(o=>{throw t.runOutsideAngular(()=>e.handleError(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}var mf=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=$(Xl),this.afterRenderEffectManager=$(Ua),this.externalTestViews=new Set,this.beforeRender=new tt,this.afterTick=new tt,this.componentTypes=[],this.components=[],this.isStable=$(Wd).hasPendingTasks.pipe(Re(n=>!n)),this._injector=$(it)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){let o=n instanceof Co;if(!this._injector.get(gf).done){let p=!o&&Ig(n),h=!1;throw new F(405,h)}let s;o?s=n:s=this._injector.get(Qo).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=v_(s)?void 0:this._injector.get(ct),c=r||s.selector,u=s.create(rr.NULL,[],c,a),l=u.location.nativeElement,f=u.injector.get(p_,null);return f?.registerApplication(l),u.onDestroy(()=>{this.detachView(u.hostView),cs(this.components,u),f?.unregisterApplication(l)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new F(101,!1);let r=L(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,L(r)}}detectChangesInAttachedViews(n){let r=0,o=this.afterRenderEffectManager;for(;;){if(r===kd)throw new F(103,!1);if(n){let i=r===0;this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:a}of this._views)__(s,i,a)}if(r++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:i})=>Xs(i))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:i})=>Xs(i))))break}}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;cs(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(m_,[]);[...this._bootstrapListeners,...r].forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>cs(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new F(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function cs(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function __(e,t,n){!t&&!Xs(e)||b_(e,n,t)}function Xs(e){return ha(e)}function b_(e,t,n){let r;n?(r=0,e[S]|=1024):e[S]&64?r=0:r=1,Pd(e,t,r)}var ea=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},OA=(()=>{class e{compileModuleSync(n){return new zs(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),o=ul(n),i=cd(o.declarations).reduce((s,a)=>{let c=Be(a);return c&&s.push(new Pt(c)),s},[]);return new ea(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var E_=(()=>{class e{constructor(){this.zone=$(ye),this.applicationRef=$(mf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function D_(e){return[{provide:ye,useFactory:e},{provide:ho,multi:!0,useFactory:()=>{let t=$(E_,{optional:!0});return()=>t.initialize()}},{provide:ho,multi:!0,useFactory:()=>{let t=$(S_);return()=>{t.initialize()}}},{provide:Xl,useFactory:I_}]}function I_(){let e=$(ye),t=$(Ot);return n=>e.runOutsideAngular(()=>t.handleError(n))}function C_(e){let t=D_(()=>new ye(T_(e)));return Tg([[],t])}function T_(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var S_=(()=>{class e{constructor(){this.subscription=new Q,this.initialized=!1,this.zone=$(ye),this.pendingTasks=$(Wd)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ye.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function x_(){return typeof $localize<"u"&&$localize.locale||No}var Xo=new B("",{providedIn:"root",factory:()=>$(Xo,k.Optional|k.SkipSelf)||x_()});var yf=new B("");var co=null;function A_(e=[],t){return rr.create({name:t,providers:[{provide:gl,useValue:"platform"},{provide:yf,useValue:new Set([()=>co=null])},...e]})}function M_(e=[]){if(co)return co;let t=A_(e);return co=t,y_(),N_(t),t}function N_(e){e.get(Um,null)?.forEach(n=>n())}var vf=(()=>{class e{static{this.__NG_ELEMENT_ID__=O_}}return e})();function O_(e){return R_(ie(),x(),(e&16)===16)}function R_(e,t,n){if($o(e)&&!n){let r=ut(e.index,t);return new Rt(r,r)}else if(e.type&47){let r=t[Ae];return new Rt(r,t)}return null}var ta=class{constructor(){}supports(t){return Gd(t)}create(t){return new na(t)}},k_=(e,t)=>t,na=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||k_}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,o=0,i=null;for(;n||r;){let s=!r||n&&n.currentIndex<$u(r,o,i)?n:r,a=$u(s,o,i),c=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)o++;else{i||(i=[]);let u=a-o,l=c-o;if(u!=l){for(let p=0;p<u;p++){let h=p<i.length?i[p]:i[p]=0,g=h+p;l<=g&&g<u&&(i[p]=h+1)}let f=s.previousIndex;i[f]=l-u}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!Gd(t))throw new F(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,o,i,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)i=t[a],s=this._trackByFn(a,i),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,i,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,i,s,a)),Object.is(n.item,i)||this._addIdentityChange(n,i)),n=n._next}else o=0,sw(t,a=>{s=this._trackByFn(o,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,o),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,o)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,o){let i;return t===null?i=this._itTail:(i=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,i,o)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,o),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,i,o)):t=this._addAfter(new ra(n,r),i,o)),t}_verifyReinsertion(t,n,r,o){let i=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return i!==null?t=this._reinsertAfter(i,t._prev,o):t.currentIndex!=o&&(t.currentIndex=o,this._addToMoves(t,o)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let o=t._prevRemoved,i=t._nextRemoved;return o===null?this._removalsHead=i:o._nextRemoved=i,i===null?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let o=n===null?this._itHead:n._next;return t._next=o,t._prev=n,o===null?this._itTail=t:o._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Oo),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Oo),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},ra=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},oa=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Oo=class{constructor(){this.map=new Map}put(t){let n=t.trackById,r=this.map.get(n);r||(r=new oa,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,o=this.map.get(r);return o?o.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function $u(e,t,n){let r=e.previousIndex;if(r===null)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+t+o}function Uu(){return new qa([new ta])}var qa=(()=>{class e{static{this.\u0275prov=H({token:e,providedIn:"root",factory:Uu})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let o=r.factories.slice();n=n.concat(o)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||Uu()),deps:[[e,new rg,new ng]]}}find(n){let r=this.factories.find(o=>o.supports(n));if(r!=null)return r;throw new F(901,!1)}}return e})();function RA(e){try{let{rootComponent:t,appProviders:n,platformProviders:r}=e,o=M_(r),i=[C_(),...n||[]],a=new Ao({providers:i,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(ye);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(Ot,null),l;c.runOutsideAngular(()=>{l=c.onError.subscribe({next:h=>{u.handleError(h)}})});let f=()=>a.destroy(),p=o.get(yf);return p.add(f),a.onDestroy(()=>{l.unsubscribe(),p.delete(f)}),w_(u,c,()=>{let h=a.get(gf);return h.runInitializers(),h.donePromise.then(()=>{let g=a.get(Xo,No);zw(g||No);let m=a.get(mf);return t!==void 0&&m.bootstrap(t),m})})})}catch(t){return Promise.reject(t)}}function P_(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function kA(e,t){let n=Be(e),r=t.elementInjector||Lo();return new Pt(n).create(r,t.projectableNodes,t.hostElement,t.environmentInjector)}function PA(e){let t=Be(e);if(!t)return null;let n=new Pt(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var xf=null;function Wa(){return xf}function oM(e){xf??=e}var _f=class{};var Xa=new B(""),ec=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=H({token:e,factory:()=>$(F_),providedIn:"platform"})}}return e})(),iM=new B(""),F_=(()=>{class e extends ec{constructor(){super(),this._doc=$(Xa),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Wa().getBaseHref(this._doc)}onPopState(n){let r=Wa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Wa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=H({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function tc(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function bf(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function ze(e){return e&&e[0]!=="?"?"?"+e:e}var ti=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=H({token:e,factory:()=>$(L_),providedIn:"root"})}}return e})(),Af=new B(""),L_=(()=>{class e extends ti{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??$(Xa).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return tc(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+ze(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,i){let s=this.prepareExternalUrl(o+ze(i));this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){let s=this.prepareExternalUrl(o+ze(i));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(oe(ec),oe(Af,8))}}static{this.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),sM=(()=>{class e extends ti{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=tc(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,o,i){let s=this.prepareExternalUrl(o+ze(i));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){let s=this.prepareExternalUrl(o+ze(i));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(oe(ec),oe(Af,8))}}static{this.\u0275prov=H({token:e,factory:e.\u0275fac})}}return e})(),j_=(()=>{class e{constructor(n){this._subject=new Dt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=V_(bf(Ef(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ze(r))}normalize(n){return e.stripTrailingSlash(U_(this._basePath,Ef(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ze(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ze(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r,complete:o})}static{this.normalizeQueryParams=ze}static{this.joinWithSlash=tc}static{this.stripTrailingSlash=bf}static{this.\u0275fac=function(r){return new(r||e)(oe(ti))}}static{this.\u0275prov=H({token:e,factory:()=>$_(),providedIn:"root"})}}return e})();function $_(){return new j_(oe(ti))}function U_(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function Ef(e){return e.replace(/\/index.html$/,"")}function V_(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var Mf=function(e){return e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency",e[e.Scientific=3]="Scientific",e}(Mf||{});var Ke={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function ir(e,t){let n=Ba(e),r=n[Cn.NumberSymbols][t];if(typeof r>"u"){if(t===Ke.CurrencyDecimal)return n[Cn.NumberSymbols][Ke.Decimal];if(t===Ke.CurrencyGroup)return n[Cn.NumberSymbols][Ke.Group]}return r}function B_(e,t){return Ba(e)[Cn.NumberFormats][t]}var H_=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Df=22,ei=".",sr="0",q_=";",W_=",",Ga="#";function G_(e,t,n,r,o,i,s=!1){let a="",c=!1;if(!isFinite(e))a=ir(n,Ke.Infinity);else{let u=J_(e);s&&(u=Y_(u));let l=t.minInt,f=t.minFrac,p=t.maxFrac;if(i){let C=i.match(H_);if(C===null)throw new Error(`${i} is not a valid digit info`);let _=C[1],w=C[3],A=C[5];_!=null&&(l=za(_)),w!=null&&(f=za(w)),A!=null?p=za(A):w!=null&&f>p&&(p=f)}Q_(u,f,p);let h=u.digits,g=u.integerLen,m=u.exponent,v=[];for(c=h.every(C=>!C);g<l;g++)h.unshift(0);for(;g<0;g++)h.unshift(0);g>0?v=h.splice(g,h.length):(v=h,h=[0]);let y=[];for(h.length>=t.lgSize&&y.unshift(h.splice(-t.lgSize,h.length).join(""));h.length>t.gSize;)y.unshift(h.splice(-t.gSize,h.length).join(""));h.length&&y.unshift(h.join("")),a=y.join(ir(n,r)),v.length&&(a+=ir(n,o)+v.join("")),m&&(a+=ir(n,Ke.Exponential)+"+"+m)}return e<0&&!c?a=t.negPre+a+t.negSuf:a=t.posPre+a+t.posSuf,a}function z_(e,t,n){let r=B_(t,Mf.Decimal),o=K_(r,ir(t,Ke.MinusSign));return G_(e,o,t,Ke.Group,Ke.Decimal,n)}function K_(e,t="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(q_),o=r[0],i=r[1],s=o.indexOf(ei)!==-1?o.split(ei):[o.substring(0,o.lastIndexOf(sr)+1),o.substring(o.lastIndexOf(sr)+1)],a=s[0],c=s[1]||"";n.posPre=a.substring(0,a.indexOf(Ga));for(let l=0;l<c.length;l++){let f=c.charAt(l);f===sr?n.minFrac=n.maxFrac=l+1:f===Ga?n.maxFrac=l+1:n.posSuf+=f}let u=a.split(W_);if(n.gSize=u[1]?u[1].length:0,n.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,i){let l=o.length-n.posPre.length-n.posSuf.length,f=i.indexOf(Ga);n.negPre=i.substring(0,f).replace(/'/g,""),n.negSuf=i.slice(f+l).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}function Y_(e){if(e.digits[0]===0)return e;let t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(t===0?e.digits.push(0,0):t===1&&e.digits.push(0),e.integerLen+=2),e}function J_(e){let t=Math.abs(e)+"",n=0,r,o,i,s,a;for((o=t.indexOf(ei))>-1&&(t=t.replace(ei,"")),(i=t.search(/e/i))>0?(o<0&&(o=i),o+=+t.slice(i+1),t=t.substring(0,i)):o<0&&(o=t.length),i=0;t.charAt(i)===sr;i++);if(i===(a=t.length))r=[0],o=1;else{for(a--;t.charAt(a)===sr;)a--;for(o-=i,r=[],s=0;i<=a;i++,s++)r[s]=Number(t.charAt(i))}return o>Df&&(r=r.splice(0,Df-1),n=o-1,o=1),{digits:r,exponent:n,integerLen:o}}function Q_(e,t,n){if(t>n)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${n}).`);let r=e.digits,o=r.length-e.integerLen,i=Math.min(Math.max(t,o),n),s=i+e.integerLen,a=r[s];if(s>0){r.splice(Math.max(e.integerLen,s));for(let f=s;f<r.length;f++)r[f]=0}else{o=Math.max(0,o),e.integerLen=1,r.length=Math.max(1,s=i+1),r[0]=0;for(let f=1;f<s;f++)r[f]=0}if(a>=5)if(s-1<0){for(let f=0;f>s;f--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[s-1]++;for(;o<Math.max(0,i);o++)r.push(0);let c=i!==0,u=t+e.integerLen,l=r.reduceRight(function(f,p,h,g){return p=p+f,g[h]=p<10?p:p-10,c&&(g[h]===0&&h>=u?g.pop():c=!1),p>=10?1:0},0);l&&(r.unshift(l),e.integerLen++)}function za(e){let t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}function aM(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[o,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===t)return decodeURIComponent(i)}return null}var Ka=/\s+/,If=[],cM=(()=>{class e{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=If,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(Ka):If}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Ka):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let o=this.stateMap.get(n);o!==void 0?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],o=n[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(Ka).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}static{this.\u0275fac=function(r){return new(r||e)(me($t),me(La))}}static{this.\u0275dir=Fo({type:e,selectors:[["","ngClass",""]],inputs:{klass:[ot.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return e})();var Ya=class{constructor(t,n,r,o){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},uM=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,o){this._viewContainer=n,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((o,i,s)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new Ya(o.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(i===null?void 0:i);else if(i!==null){let a=r.get(i);r.move(a,s),Cf(a,o)}});for(let o=0,i=r.length;o<i;o++){let a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}n.forEachIdentityChange(o=>{let i=r.get(o.currentIndex);Cf(i,o)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(me(Dn),me(kt),me(qa))}}static{this.\u0275dir=Fo({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function Cf(e,t){e.context.$implicit=t.item}var lM=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new Ja,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Tf("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Tf("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(me(Dn),me(kt))}}static{this.\u0275dir=Fo({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})(),Ja=class{constructor(){this.$implicit=null,this.ngIf=null}};function Tf(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${ae(t)}'.`)}function Nf(e,t){return new F(2100,!1)}var Z_=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,dM=(()=>{class e{transform(n){if(n==null)return null;if(typeof n!="string")throw Nf(e,n);return n.replace(Z_,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275pipe=ca({name:"titlecase",type:e,pure:!0,standalone:!0})}}return e})();var fM=(()=>{class e{constructor(n){this._locale=n}transform(n,r,o){if(!X_(n))return null;o||=this._locale;try{let i=eb(n);return z_(i,o,r)}catch(i){throw Nf(e,i.message)}}static{this.\u0275fac=function(r){return new(r||e)(me(Xo,16))}}static{this.\u0275pipe=ca({name:"number",type:e,pure:!0,standalone:!0})}}return e})();function X_(e){return!(e==null||e===""||e!==e)}function eb(e){if(typeof e=="string"&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if(typeof e!="number")throw new Error(`${e} is not a number`);return e}var hM=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=sl({type:e})}static{this.\u0275inj=Gu({})}}return e})(),tb="browser",nb="server";function rb(e){return e===tb}function pM(e){return e===nb}var gM=(()=>{class e{static{this.\u0275prov=H({token:e,providedIn:"root",factory:()=>rb($(Ea))?new Qa($(Xa),window):new Za})}}return e})(),Qa=class{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let n=ob(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,o=n.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}};function ob(e,t){let n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;for(;o;){let i=o.shadowRoot;if(i){let s=i.getElementById(t)||i.querySelector(`[name="${t}"]`);if(s)return s}o=r.nextNode()}}return null}var Za=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},Sf=class{};var Of=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);var Tn=class extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}},ar=class extends Tn{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},Sn=class extends Tn{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},xn=class extends Tn{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},ni=function(e){return e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2",e}(ni||{});var cr=class{constructor(t,{headers:n={},customFetch:r,region:o=ni.Any}={}){this.url=t,this.headers=n,this.region=o,this.fetch=Of(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Or(this,arguments,void 0,function*(n,r={}){var o;let i,s;try{let{headers:a,method:c,body:u,signal:l,timeout:f}=r,p={},{region:h}=r;h||(h=this.region);let g=new URL(`${this.url}/${n}`);h&&h!=="any"&&(p["x-region"]=h,g.searchParams.set("forceFunctionRegion",h));let m;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",m=u):typeof u=="string"?(p["Content-Type"]="text/plain",m=u):typeof FormData<"u"&&u instanceof FormData?m=u:(p["Content-Type"]="application/json",m=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?m=JSON.stringify(u):m=u;let v=l;f&&(s=new AbortController,i=setTimeout(()=>s.abort(),f),l?(v=s.signal,l.addEventListener("abort",()=>s.abort())):v=s.signal);let y=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),a),body:m,signal:v}).catch(A=>{throw new ar(A)}),C=y.headers.get("x-relay-error");if(C&&C==="true")throw new Sn(y);if(!y.ok)throw new xn(y);let _=((o=y.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),w;return _==="application/json"?w=yield y.json():_==="application/octet-stream"||_==="application/pdf"?w=yield y.blob():_==="text/event-stream"?w=y:_==="multipart/form-data"?w=yield y.formData():w=yield y.text(),{data:w,error:null,response:y}}catch(a){return{data:null,error:a,response:a instanceof xn||a instanceof Sn?a.context:void 0}}finally{i&&clearTimeout(i)}})}};var kf=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},ib=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,o=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(i=>d(this,null,function*(){let s=null,a=null,c=null,u=i.status,l=i.statusText;if(i.ok){var f,p;if(n.method!=="HEAD"){var h;let y=yield i.text();y===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((h=n.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?a=y:a=JSON.parse(y))}let m=(f=n.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),v=(p=i.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");m&&v&&v.length>1&&(c=parseInt(v[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(s={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,c=null,u=406,l="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var g;let m=yield i.text();try{s=JSON.parse(m),Array.isArray(s)&&i.status===404&&(a=[],s=null,u=200,l="OK")}catch{i.status===404&&m===""?(u=204,l="No Content"):s={message:m}}if(s&&n.isMaybeSingle&&(!(s==null||(g=s.details)===null||g===void 0)&&g.includes("0 rows"))&&(s=null,u=200,l="OK"),s&&n.shouldThrowOnError)throw new kf(s)}return{error:s,data:a,count:c,status:u,statusText:l}}));return this.shouldThrowOnError||(o=o.catch(i=>{var s;let a="",c=i?.cause;if(c){var u,l,f,p;let g=(u=c?.message)!==null&&u!==void 0?u:"",m=(l=c?.code)!==null&&l!==void 0?l:"";a=`${(f=i?.name)!==null&&f!==void 0?f:"FetchError"}: ${i?.message}`,a+=`

Caused by: ${(p=c?.name)!==null&&p!==void 0?p:"Error"}: ${g}`,m&&(a+=` (${m})`),c?.stack&&(a+=`
${c.stack}`)}else{var h;a=(h=i?.stack)!==null&&h!==void 0?h:""}return{error:{message:`${(s=i?.name)!==null&&s!==void 0?s:"FetchError"}: ${i?.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(e,t)}returns(){return this}overrideTypes(){return this}},sb=class extends ib{select(e){let t=!1,n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:o=r}={}){let i=o?`${o}.order`:"order",s=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${s?`${s},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){let r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){let o=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:o=!1,format:i="text"}={}){var s;let a=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,o?"wal":null].filter(Boolean).join("|"),c=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}},Rf=new RegExp("[,()]"),An=class extends sb{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){let n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Rf.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){let n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Rf.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let o="";r==="plain"?o="pl":r==="phrase"?o="ph":r==="websearch"&&(o="w");let i=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${o}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){let r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},ab=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){let{head:n=!1,count:r}=t??{},o=n?"HEAD":"GET",i=!1,s=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:a,headers:c}=this.cloneRequestState();return a.searchParams.set("select",s),r&&c.append("Prefer",`count=${r}`),new An({method:o,url:a,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;let o="POST",{url:i,headers:s}=this.cloneRequestState();if(t&&s.append("Prefer",`count=${t}`),n||s.append("Prefer","missing=default"),Array.isArray(e)){let a=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(a.length>0){let c=[...new Set(a)].map(u=>`"${u}"`);i.searchParams.set("columns",c.join(","))}}return new An({method:o,url:i,headers:s,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:o=!0}={}){var i;let s="POST",{url:a,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&a.searchParams.set("on_conflict",t),r&&c.append("Prefer",`count=${r}`),o||c.append("Prefer","missing=default"),Array.isArray(e)){let u=e.reduce((l,f)=>l.concat(Object.keys(f)),[]);if(u.length>0){let l=[...new Set(u)].map(f=>`"${f}"`);a.searchParams.set("columns",l.join(","))}}return new An({method:s,url:a,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var n;let r="PATCH",{url:o,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new An({method:r,url:o,headers:i,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;let n="DELETE",{url:r,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new An({method:n,url:r,headers:o,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Pf=class Ff{constructor(t,{headers:n={},schema:r,fetch:o}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=o}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new ab(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Ff(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:o=!1,count:i}={}){var s;let a,c=new URL(`${this.url}/rpc/${t}`),u,l=h=>h!==null&&typeof h=="object"&&(!Array.isArray(h)||h.some(l)),f=r&&Object.values(n).some(l);f?(a="POST",u=n):r||o?(a=r?"HEAD":"GET",Object.entries(n).filter(([h,g])=>g!==void 0).map(([h,g])=>[h,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([h,g])=>{c.searchParams.append(h,g)})):(a="POST",u=n);let p=new Headers(this.headers);return f?p.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&p.set("Prefer",`count=${i}`),new An({method:a,url:c,headers:p,schema:this.schemaName,body:u,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};var nc=class{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};let n=globalThis.process;if(n){let r=n.versions;if(r&&r.node){let o=r.node,i=parseInt(o.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){let r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{let t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}},rc=nc;var Lf="2.93.2";var jf=`realtime-js/${Lf}`,$f="1.0.0",oc="2.0.0",ic=oc;var ur=1e4,Uf=1e3,Vf=100,lt=function(e){return e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed",e}(lt||{}),Z=function(e){return e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving",e}(Z||{}),we=function(e){return e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token",e}(we||{}),sc=function(e){return e.websocket="websocket",e}(sc||{}),Ut=function(e){return e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed",e}(Ut||{});var ri=class{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;let o=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(t){var n,r;let o=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},s=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,n,r){var o,i;let s=t.topic,a=(o=t.ref)!==null&&o!==void 0?o:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,l=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(l).length===0?"":JSON.stringify(l);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);let p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+s.length+u.length+f.length,h=new ArrayBuffer(this.HEADER_LENGTH+p),g=new DataView(h),m=0;g.setUint8(m++,this.KINDS.userBroadcastPush),g.setUint8(m++,c.length),g.setUint8(m++,a.length),g.setUint8(m++,s.length),g.setUint8(m++,u.length),g.setUint8(m++,f.length),g.setUint8(m++,n),Array.from(c,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(a,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(s,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(u,y=>g.setUint8(m++,y.charCodeAt(0))),Array.from(f,y=>g.setUint8(m++,y.charCodeAt(0)));var v=new Uint8Array(h.byteLength+r.byteLength);return v.set(new Uint8Array(h),0),v.set(new Uint8Array(r),h.byteLength),v.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){let r=JSON.parse(t),[o,i,s,a,c]=r;return n({join_ref:o,ref:i,topic:s,event:a,payload:c})}return n({})}_binaryDecode(t){let n=new DataView(t),r=n.getUint8(0),o=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,o)}}_decodeUserBroadcast(t,n,r){let o=n.getUint8(1),i=n.getUint8(2),s=n.getUint8(3),a=n.getUint8(4),c=this.HEADER_LENGTH+4,u=r.decode(t.slice(c,c+o));c=c+o;let l=r.decode(t.slice(c,c+i));c=c+i;let f=r.decode(t.slice(c,c+s));c=c+s;let p=t.slice(c,t.byteLength),h=a===this.JSON_ENCODING?JSON.parse(r.decode(p)):p,g={type:this.BROADCAST_EVENT,event:l,payload:h};return s>0&&(g.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}};var Mn=class{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var V=function(e){return e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange",e}(V||{}),cc=(e,t,n={})=>{var r;let o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,s)=>(i[s]=cb(s,e,t,o),i),{}):{}},cb=(e,t,n,r)=>{let o=t.find(a=>a.name===e),i=o?.type,s=n[e];return i&&!r.includes(i)?Bf(i,s):ac(s)},Bf=(e,t)=>{if(e.charAt(0)==="_"){let n=e.slice(1,e.length);return fb(t,n)}switch(e){case V.bool:return ub(t);case V.float4:case V.float8:case V.int2:case V.int4:case V.int8:case V.numeric:case V.oid:return lb(t);case V.json:case V.jsonb:return db(t);case V.timestamp:return hb(t);case V.abstime:case V.date:case V.daterange:case V.int4range:case V.int8range:case V.money:case V.reltime:case V.text:case V.time:case V.timestamptz:case V.timetz:case V.tsrange:case V.tstzrange:return ac(t);default:return ac(t)}},ac=e=>e,ub=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},lb=e=>{if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},db=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},fb=(e,t)=>{if(typeof e!="string")return e;let n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i,s=e.slice(1,n);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(a=>Bf(t,a))}return e},hb=e=>typeof e=="string"?e.replace(" ","T"):e,oi=e=>{let t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};var Nn=class{constructor(t,n,r={},o=ur){this.channel=t,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var lr=class e{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{let{onJoin:i,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=e.syncState(this.state,o,i,s),this.pendingDiffs.forEach(c=>{this.state=e.syncDiff(this.state,c,i,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},o=>{let{onJoin:i,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=e.syncDiff(this.state,o,i,s),a())}),this.onJoin((o,i,s)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:i,newPresences:s})}),this.onLeave((o,i,s)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,o){let i=this.cloneDeep(t),s=this.transformState(n),a={},c={};return this.map(i,(u,l)=>{s[u]||(c[u]=l)}),this.map(s,(u,l)=>{let f=i[u];if(f){let p=l.map(v=>v.presence_ref),h=f.map(v=>v.presence_ref),g=l.filter(v=>h.indexOf(v.presence_ref)<0),m=f.filter(v=>p.indexOf(v.presence_ref)<0);g.length>0&&(a[u]=g),m.length>0&&(c[u]=m)}else a[u]=l}),this.syncDiff(i,{joins:a,leaves:c},r,o)}static syncDiff(t,n,r,o){let{joins:i,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(i,(a,c)=>{var u;let l=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(c),l.length>0){let f=t[a].map(h=>h.presence_ref),p=l.filter(h=>f.indexOf(h.presence_ref)<0);t[a].unshift(...p)}r(a,l,c)}),this.map(s,(a,c)=>{let u=t[a];if(!u)return;let l=c.map(f=>f.presence_ref);u=u.filter(f=>l.indexOf(f.presence_ref)<0),t[a]=u,o(a,u,c),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{let o=t[r];return"metas"in o?n[r]=o.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=o,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var dr=function(e){return e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system",e}(dr||{}),Ye=function(e){return e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR",e}(Ye||{});var fr=class e{constructor(t,n={config:{}},r){var o,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Z.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Nn(this,we.join,this.params,this.timeout),this.rejoinTimer=new Mn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Z.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Z.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this._on(we.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new lr(this),this.broadcastEndpointURL=oi(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,o,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Z.closed){let{config:{broadcast:s,presence:a,private:c}}=this.params,u=(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&o!==void 0?o:[],l=!!this.bindings[dr.PRESENCE]&&this.bindings[dr.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},p={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:l}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(h=>t?.(Ye.CHANNEL_ERROR,h)),this._onClose(()=>t?.(Ye.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",g=>d(this,[g],function*({postgres_changes:h}){var m;if(this.socket._isManualToken()||this.socket.setAuth(),h===void 0){t?.(Ye.SUBSCRIBED);return}else{let v=this.bindings.postgres_changes,y=(m=v?.length)!==null&&m!==void 0?m:0,C=[];for(let _=0;_<y;_++){let w=v[_],{filter:{event:A,schema:z,table:P,filter:W}}=w,Oe=h&&h[_];if(Oe&&Oe.event===A&&e.isFilterValueEqual(Oe.schema,z)&&e.isFilterValueEqual(Oe.table,P)&&e.isFilterValueEqual(Oe.filter,W))C.push(Object.assign(Object.assign({},w),{id:Oe.id}));else{this.unsubscribe(),this.state=Z.errored,t?.(Ye.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,t&&t(Ye.SUBSCRIBED);return}})).receive("error",h=>{this.state=Z.errored,t?.(Ye.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t?.(Ye.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return d(this,arguments,function*(t,n={}){return yield this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)})}untrack(){return d(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,n,r){return this.state===Z.joined&&t===dr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>d(this,null,function*(){return yield this.subscribe()}))),this._on(t,n,r)}httpSend(o,i){return d(this,arguments,function*(t,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");let a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);let c={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},u=yield this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(u.status===202)return{success:!0};let l=u.statusText;try{let f=yield u.json();l=f.error||f.message||l}catch{}return Promise.reject(new Error(l))})}send(r){return d(this,arguments,function*(t,n={}){var o,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:s,payload:a}=t,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);let u={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{let l=yield this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);return yield(i=l.body)===null||i===void 0?void 0:i.cancel(),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,c,u;let l=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.ack)&&s("ok"),l.receive("ok",()=>s("ok")),l.receive("error",()=>s("error")),l.receive("timeout",()=>s("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Z.leaving;let n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(we.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new Nn(this,we.leave,{},t),r.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Z.closed,this.bindings={}}_fetchWithTimeout(t,n,r){return d(this,null,function*(){let o=new AbortController,i=setTimeout(()=>o.abort(),r),s=yield this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(i),s})}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Nn(this,t,n,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Vf){let n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var o,i;let s=t.toLocaleLowerCase(),{close:a,error:c,leave:u,join:l}=we;if(r&&[a,c,u,l].indexOf(s)>=0&&r!==this._joinRef())return;let p=this._onMessage(s,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(h=>{var g,m,v;return((g=h.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(m=h.filter)===null||m===void 0?void 0:m.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===s}).map(h=>h.callback(p,r)):(i=this.bindings[s])===null||i===void 0||i.filter(h=>{var g,m,v,y,C,_;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in h){let w=h.id,A=(g=h.filter)===null||g===void 0?void 0:g.event;return w&&((m=n.ids)===null||m===void 0?void 0:m.includes(w))&&(A==="*"||A?.toLocaleLowerCase()===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{let w=(C=(y=h?.filter)===null||y===void 0?void 0:y.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return w==="*"||w===((_=n?.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===s}).map(h=>{if(typeof p=="object"&&"ids"in p){let g=p.data,{schema:m,table:v,commit_timestamp:y,type:C,errors:_}=g;p=Object.assign(Object.assign({},{schema:m,table:v,commit_timestamp:y,eventType:C,new:{},old:{},errors:_}),this._getPayloadRecords(g))}h.callback(p,r)})}_isClosed(){return this.state===Z.closed}_isJoined(){return this.state===Z.joined}_isJoining(){return this.state===Z.joining}_isLeaving(){return this.state===Z.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){let o=t.toLocaleLowerCase(),i={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(i):this.bindings[o]=[i],this}_off(t,n){let r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var i;return!(((i=o.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&e.isEqual(o.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(let r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(we.close,{},t)}_onError(t){this._on(we.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Z.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=cc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=cc(t.columns,t.old_record)),n}};var uc=()=>{},ii={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},gb=[1e3,2e3,5e3,1e4],mb=1e4,yb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,hr=class{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ur,this.transport=null,this.heartbeatIntervalMs=ii.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=uc,this.ref=0,this.reconnectTimer=null,this.vsn=ic,this.logger=uc,this.conn=null,this.sendBuffer=[],this.serializer=new ri,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...i)=>o(...i):(...i)=>fetch(...i),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${sc.websocket}`,this.httpEndpoint=oi(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=rc.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(t){return d(this,null,function*(){let n=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),n})}removeAllChannels(){return d(this,null,function*(){let t=yield Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t})}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case lt.connecting:return Ut.Connecting;case lt.open:return Ut.Open;case lt.closing:return Ut.Closing;default:return Ut.Closed}}isConnected(){return this.connectionState()===Ut.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){let r=`realtime:${t}`,o=this.getChannels().find(i=>i.topic===r);if(o)return o;{let i=new fr(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){let{topic:n,event:r,payload:o,ref:i}=t,s=()=>{this.encode(t,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${i})`,o),this.isConnected()?s():this.sendBuffer.push(s)}setAuth(t=null){return d(this,null,function*(){this._authPromise=this._performAuth(t);try{yield this._authPromise}finally{this._authPromise=null}})}_isManualToken(){return this._manuallySetToken}sendHeartbeat(){return d(this,null,function*(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Uf,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ii.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")})}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){let u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(l){this.log("error","error in heartbeat callback",l)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}let{topic:r,event:o,payload:i,ref:s}=n,a=s?`(${s})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${o} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(o,i,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===lt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===lt.open||this.conn.readyState===lt.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(we.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;let r=t.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${t}${r}${o}`}_workerObjectUrl(t){let n;if(t)n=t;else{let r=new Blob([yb],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}_performAuth(t=null){return d(this,null,function*(){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=yield this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{let i={access_token:n,version:jf};n&&o.updateJoinPayload(i),o.joinedOnce&&o._isJoined()&&o._push(we.access_token,{access_token:n})}))})}_waitForAuthIfNeeded(){return d(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Mn(()=>d(this,null,function*(){setTimeout(()=>d(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),ii.RECONNECT_DELAY)}),this.reconnectAfterMs)}_initializeOptions(t){var n,r,o,i,s,a,c,u,l,f,p,h;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:ur,this.heartbeatIntervalMs=(o=t?.heartbeatIntervalMs)!==null&&o!==void 0?o:ii.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(s=t?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(a=t?.heartbeatCallback)!==null&&a!==void 0?a:uc,this.vsn=(c=t?.vsn)!==null&&c!==void 0?c:ic,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t?.reconnectAfterMs)!==null&&u!==void 0?u:g=>gb[g-1]||mb,this.vsn){case $f:this.encode=(l=t?.encode)!==null&&l!==void 0?l:(g,m)=>m(JSON.stringify(g)),this.decode=(f=t?.decode)!==null&&f!==void 0?f:(g,m)=>m(JSON.parse(g));break;case oc:this.encode=(p=t?.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(h=t?.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};var pr=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function vb(e,t,n){let r=new URL(t,e);if(n)for(let[o,i]of Object.entries(n))i!==void 0&&r.searchParams.set(o,i);return r.toString()}function wb(e){return d(this,null,function*(){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?yield e.getHeaders():{}})}function _b(e){let t=e.fetchImpl??globalThis.fetch;return{request(c){return d(this,arguments,function*({method:r,path:o,query:i,body:s,headers:a}){let u=vb(e.baseUrl,o,i),l=yield wb(e.auth),f=yield t(u,{method:r,headers:$e($e($e({},s?{"Content-Type":"application/json"}:{}),l),a),body:s?JSON.stringify(s):void 0}),p=yield f.text(),h=(f.headers.get("content-type")||"").includes("application/json"),g=h&&p?JSON.parse(p):p;if(!f.ok){let m=h?g:void 0,v=m?.error;throw new pr(v?.message??`Request failed with status ${f.status}`,{status:f.status,icebergType:v?.type,icebergCode:v?.code,details:m})}return{status:f.status,headers:f.headers,data:g}})}}}function si(e){return e.join("")}var bb=class{constructor(e,t=""){this.client=e,this.prefix=t}listNamespaces(e){return d(this,null,function*(){let t=e?{parent:si(e.namespace)}:void 0;return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))})}createNamespace(e,t){return d(this,null,function*(){let n={namespace:e.namespace,properties:t?.properties};return(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data})}dropNamespace(e){return d(this,null,function*(){yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${si(e.namespace)}`})})}loadNamespaceMetadata(e){return d(this,null,function*(){return{properties:(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${si(e.namespace)}`})).data.properties}})}namespaceExists(e){return d(this,null,function*(){try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${si(e.namespace)}`}),!0}catch(t){if(t instanceof pr&&t.status===404)return!1;throw t}})}createNamespaceIfNotExists(e,t){return d(this,null,function*(){try{return yield this.createNamespace(e,t)}catch(n){if(n instanceof pr&&n.status===409)return;throw n}})}};function On(e){return e.join("")}var Eb=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}listTables(e){return d(this,null,function*(){return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${On(e.namespace)}/tables`})).data.identifiers})}createTable(e,t){return d(this,null,function*(){let n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${On(e.namespace)}/tables`,body:t,headers:n})).data.metadata})}updateTable(e,t){return d(this,null,function*(){let n=yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${On(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}})}dropTable(e,t){return d(this,null,function*(){yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${On(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})})}loadTable(e){return d(this,null,function*(){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${On(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata})}tableExists(e){return d(this,null,function*(){let t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${On(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof pr&&n.status===404)return!1;throw n}})}createTableIfNotExists(e,t){return d(this,null,function*(){try{return yield this.createTable(e,t)}catch(n){if(n instanceof pr&&n.status===409)return yield this.loadTable({namespace:e.namespace,name:t.name});throw n}})}},Hf=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);let n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=_b({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new bb(this.client,t),this.tableOps=new Eb(this.client,t,this.accessDelegation)}listNamespaces(e){return d(this,null,function*(){return this.namespaceOps.listNamespaces(e)})}createNamespace(e,t){return d(this,null,function*(){return this.namespaceOps.createNamespace(e,t)})}dropNamespace(e){return d(this,null,function*(){yield this.namespaceOps.dropNamespace(e)})}loadNamespaceMetadata(e){return d(this,null,function*(){return this.namespaceOps.loadNamespaceMetadata(e)})}listTables(e){return d(this,null,function*(){return this.tableOps.listTables(e)})}createTable(e,t){return d(this,null,function*(){return this.tableOps.createTable(e,t)})}updateTable(e,t){return d(this,null,function*(){return this.tableOps.updateTable(e,t)})}dropTable(e,t){return d(this,null,function*(){yield this.tableOps.dropTable(e,t)})}loadTable(e){return d(this,null,function*(){return this.tableOps.loadTable(e)})}namespaceExists(e){return d(this,null,function*(){return this.namespaceOps.namespaceExists(e)})}tableExists(e){return d(this,null,function*(){return this.tableOps.tableExists(e)})}createNamespaceIfNotExists(e,t){return d(this,null,function*(){return this.namespaceOps.createNamespaceIfNotExists(e,t)})}createTableIfNotExists(e,t){return d(this,null,function*(){return this.tableOps.createTableIfNotExists(e,t)})}};var ci=class extends Error{constructor(e,t="storage",n,r){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function ui(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var ai=class extends ci{constructor(e,t,n,r="storage"){super(e,r,t,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},zf=class extends ci{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};var Db=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Ib=e=>{if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},lc=e=>{if(Array.isArray(e))return e.map(n=>lc(n));if(typeof e=="function"||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([n,r])=>{let o=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[o]=lc(r)}),t},Cb=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function mr(e){"@babel/helpers - typeof";return mr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mr(e)}function Tb(e,t){if(mr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(mr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sb(e){var t=Tb(e,"string");return mr(t)=="symbol"?t:t+""}function xb(e,t,n){return(t=Sb(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qf(Object(n),!0).forEach(function(r){xb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qf(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Wf=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Ab=(e,t,n,r)=>d(void 0,null,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){let o=e,i=o.status||500;if(typeof o.json=="function")o.json().then(s=>{let a=s?.statusCode||s?.code||i+"";t(new ai(Wf(s),i,a,r))}).catch(()=>{if(r==="vectors"){let s=i+"";t(new ai(o.statusText||`HTTP ${i} error`,i,s,r))}else{let s=i+"";t(new ai(o.statusText||`HTTP ${i} error`,i,s,r))}});else{let s=i+"";t(new ai(o.statusText||`HTTP ${i} error`,i,s,r))}}else t(new zf(Wf(e),e,r))}),Mb=(e,t,n,r)=>{let o={method:e,headers:t?.headers||{}};return e==="GET"||e==="HEAD"||!r?I(I({},o),n):(Ib(r)?(o.headers=I({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(r)):o.body=r,t?.duplex&&(o.duplex=t.duplex),I(I({},o),n))};function gr(e,t,n,r,o,i,s){return d(this,null,function*(){return new Promise((a,c)=>{e(n,Mb(t,r,o,i)).then(u=>{if(!u.ok)throw u;if(r?.noResolveJson)return u;if(s==="vectors"){let l=u.headers.get("content-type");if(!l||!l.includes("application/json"))return{}}return u.json()}).then(u=>a(u)).catch(u=>Ab(u,c,r,s))})})}function Nb(e="storage"){return{get:(t,n,r,o)=>d(this,null,function*(){return gr(t,"GET",n,r,o,void 0,e)}),post:(t,n,r,o,i)=>d(this,null,function*(){return gr(t,"POST",n,o,i,r,e)}),put:(t,n,r,o,i)=>d(this,null,function*(){return gr(t,"PUT",n,o,i,r,e)}),head:(t,n,r,o)=>d(this,null,function*(){return gr(t,"HEAD",n,I(I({},r),{},{noResolveJson:!0}),o,void 0,e)}),remove:(t,n,r,o,i)=>d(this,null,function*(){return gr(t,"DELETE",n,o,i,r,e)})}}var Ob=Nb("storage"),{get:yr,post:q,put:dc,head:Rb,remove:fc}=Ob,Rn=class{constructor(e,t={},n,r="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=Db(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}handleOperation(e){return d(this,null,function*(){var t=this;try{return{data:yield e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ui(n))return{data:null,error:n};throw n}})}},kb=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return d(this,null,function*(){var e=this;try{return{data:(yield e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ui(t))return{data:null,error:t};throw t}})}},Kf;Kf=Symbol.toStringTag;var Pb=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Kf]="BlobDownloadBuilder",this.promise=null}asStream(){return new kb(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return d(this,null,function*(){var e=this;try{return{data:yield(yield e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ui(t))return{data:null,error:t};throw t}})}},Fb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Lb=class extends Rn{constructor(e,t={},n,r){super(e,t,r,"storage"),this.bucketId=n}uploadOrUpdate(e,t,n,r){return d(this,null,function*(){var o=this;return o.handleOperation(()=>d(this,null,function*(){let i,s=I(I({},Gf),r),a=I(I({},o.headers),e==="POST"&&{"x-upsert":String(s.upsert)}),c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),c&&i.append("metadata",o.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",s.cacheControl),c&&!i.has("metadata")&&i.append("metadata",o.encodeMetadata(c))):(i=n,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,c&&(a["x-metadata"]=o.toBase64(o.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!s.duplex&&(s.duplex="half")),r?.headers&&(a=I(I({},a),r.headers));let u=o._removeEmptyFolders(t),l=o._getFinalPath(u),f=yield(e=="PUT"?dc:q)(o.fetch,`${o.url}/object/${l}`,i,I({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{path:u,id:f.Id,fullPath:f.Key}}))})}upload(e,t,n){return d(this,null,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return d(this,null,function*(){var o=this;let i=o._removeEmptyFolders(e),s=o._getFinalPath(i),a=new URL(o.url+`/object/upload/sign/${s}`);return a.searchParams.set("token",t),o.handleOperation(()=>d(this,null,function*(){let c,u=I({upsert:Gf.upsert},r),l=I(I({},o.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,l["cache-control"]=`max-age=${u.cacheControl}`,l["content-type"]=u.contentType),{path:i,fullPath:(yield dc(o.fetch,a.toString(),c,{headers:l})).Key}}))})}createSignedUploadUrl(e,t){return d(this,null,function*(){var n=this;return n.handleOperation(()=>d(this,null,function*(){let r=n._getFinalPath(e),o=I({},n.headers);t?.upsert&&(o["x-upsert"]="true");let i=yield q(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:o}),s=new URL(n.url+i.url),a=s.searchParams.get("token");if(!a)throw new ci("No token returned by API");return{signedUrl:s.toString(),path:e,token:a}}))})}update(e,t,n){return d(this,null,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return d(this,null,function*(){var r=this;return r.handleOperation(()=>d(this,null,function*(){return yield q(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:r.headers})}))})}copy(e,t,n){return d(this,null,function*(){var r=this;return r.handleOperation(()=>d(this,null,function*(){return{path:(yield q(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key}}))})}createSignedUrl(e,t,n){return d(this,null,function*(){var r=this;return r.handleOperation(()=>d(this,null,function*(){let o=r._getFinalPath(e),i=yield q(r.fetch,`${r.url}/object/sign/${o}`,I({expiresIn:t},n?.transform?{transform:n.transform}:{}),{headers:r.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${i.signedURL}${s}`)}}))})}createSignedUrls(e,t,n){return d(this,null,function*(){var r=this;return r.handleOperation(()=>d(this,null,function*(){let o=yield q(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),i=n?.download?`&download=${n.download===!0?"":n.download}`:"";return o.map(s=>I(I({},s),{},{signedUrl:s.signedURL?encodeURI(`${r.url}${s.signedURL}${i}`):null}))}))})}download(e,t){let n=typeof t?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(t?.transform||{}),o=r?`?${r}`:"",i=this._getFinalPath(e),s=()=>yr(this.fetch,`${this.url}/${n}/${i}${o}`,{headers:this.headers,noResolveJson:!0});return new Pb(s,this.shouldThrowOnError)}info(e){return d(this,null,function*(){var t=this;let n=t._getFinalPath(e);return t.handleOperation(()=>d(this,null,function*(){return lc(yield yr(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers}))}))})}exists(e){return d(this,null,function*(){var t=this;let n=t._getFinalPath(e);try{return yield Rb(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ui(r)&&r instanceof zf){let o=r.originalError;if([400,404].includes(o?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){let n=this._getFinalPath(e),r=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&r.push(o);let i=typeof t?.transform<"u"?"render/image":"object",s=this.transformOptsToQueryString(t?.transform||{});s!==""&&r.push(s);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}remove(e){return d(this,null,function*(){var t=this;return t.handleOperation(()=>d(this,null,function*(){return yield fc(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers})}))})}list(e,t,n){return d(this,null,function*(){var r=this;return r.handleOperation(()=>d(this,null,function*(){let o=I(I(I({},Fb),t),{},{prefix:e||""});return yield q(r.fetch,`${r.url}/object/list/${r.bucketId}`,o,{headers:r.headers},n)}))})}listV2(e,t){return d(this,null,function*(){var n=this;return n.handleOperation(()=>d(this,null,function*(){let r=I({},e);return yield q(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t)}))})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}},jb="2.93.2",vr={"X-Client-Info":`storage-js/${jb}`},$b=class extends Rn{constructor(e,t={},n,r){let o=new URL(e);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."));let i=o.href.replace(/\/$/,""),s=I(I({},vr),t);super(i,s,n,"storage")}listBuckets(e){return d(this,null,function*(){var t=this;return t.handleOperation(()=>d(this,null,function*(){let n=t.listBucketOptionsToQueryString(e);return yield yr(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})}))})}getBucket(e){return d(this,null,function*(){var t=this;return t.handleOperation(()=>d(this,null,function*(){return yield yr(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers})}))})}createBucket(n){return d(this,arguments,function*(e,t={public:!1}){var r=this;return r.handleOperation(()=>d(this,null,function*(){return yield q(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers})}))})}updateBucket(e,t){return d(this,null,function*(){var n=this;return n.handleOperation(()=>d(this,null,function*(){return yield dc(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers})}))})}emptyBucket(e){return d(this,null,function*(){var t=this;return t.handleOperation(()=>d(this,null,function*(){return yield q(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers})}))})}deleteBucket(e){return d(this,null,function*(){var t=this;return t.handleOperation(()=>d(this,null,function*(){return yield fc(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers})}))})}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Ub=class extends Rn{constructor(e,t={},n){let r=e.replace(/\/$/,""),o=I(I({},vr),t);super(r,o,n,"storage")}createBucket(e){return d(this,null,function*(){var t=this;return t.handleOperation(()=>d(this,null,function*(){return yield q(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers})}))})}listBuckets(e){return d(this,null,function*(){var t=this;return t.handleOperation(()=>d(this,null,function*(){let n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);let r=n.toString(),o=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return yield yr(t.fetch,o,{headers:t.headers})}))})}deleteBucket(e){return d(this,null,function*(){var t=this;return t.handleOperation(()=>d(this,null,function*(){return yield fc(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers})}))})}from(e){var t=this;if(!Cb(e))throw new ci("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let n=new Hf({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>d(this,null,function*(){return t.headers})},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(o,i){let s=o[i];return typeof s!="function"?s:(...a)=>d(this,null,function*(){try{return{data:yield s.apply(o,a),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}})}})}},Vb=class extends Rn{constructor(e,t={},n){let r=e.replace(/\/$/,""),o=I(I({},vr),{},{"Content-Type":"application/json"},t);super(r,o,n,"vectors")}createIndex(e){return d(this,null,function*(){var t=this;return t.handleOperation(()=>d(this,null,function*(){return(yield q(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers}))||{}}))})}getIndex(e,t){return d(this,null,function*(){var n=this;return n.handleOperation(()=>d(this,null,function*(){return yield q(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})}))})}listIndexes(e){return d(this,null,function*(){var t=this;return t.handleOperation(()=>d(this,null,function*(){return yield q(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers})}))})}deleteIndex(e,t){return d(this,null,function*(){var n=this;return n.handleOperation(()=>d(this,null,function*(){return(yield q(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))||{}}))})}},Bb=class extends Rn{constructor(e,t={},n){let r=e.replace(/\/$/,""),o=I(I({},vr),{},{"Content-Type":"application/json"},t);super(r,o,n,"vectors")}putVectors(e){return d(this,null,function*(){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(()=>d(this,null,function*(){return(yield q(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers}))||{}}))})}getVectors(e){return d(this,null,function*(){var t=this;return t.handleOperation(()=>d(this,null,function*(){return yield q(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers})}))})}listVectors(e){return d(this,null,function*(){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(()=>d(this,null,function*(){return yield q(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers})}))})}queryVectors(e){return d(this,null,function*(){var t=this;return t.handleOperation(()=>d(this,null,function*(){return yield q(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers})}))})}deleteVectors(e){return d(this,null,function*(){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(()=>d(this,null,function*(){return(yield q(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers}))||{}}))})}},Hb=class extends Rn{constructor(e,t={},n){let r=e.replace(/\/$/,""),o=I(I({},vr),{},{"Content-Type":"application/json"},t);super(r,o,n,"vectors")}createBucket(e){return d(this,null,function*(){var t=this;return t.handleOperation(()=>d(this,null,function*(){return(yield q(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers}))||{}}))})}getBucket(e){return d(this,null,function*(){var t=this;return t.handleOperation(()=>d(this,null,function*(){return yield q(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers})}))})}listBuckets(){return d(this,arguments,function*(e={}){var t=this;return t.handleOperation(()=>d(this,null,function*(){return yield q(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers})}))})}deleteBucket(e){return d(this,null,function*(){var t=this;return t.handleOperation(()=>d(this,null,function*(){return(yield q(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers}))||{}}))})}},qb=class e extends Hb{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new Wb(this.url,this.headers,t,this.fetch)}createBucket(t){return d(this,null,function*(){var n=()=>ce(e.prototype,this,"createBucket"),r=this;return n().call(r,t)})}getBucket(t){return d(this,null,function*(){var n=()=>ce(e.prototype,this,"getBucket"),r=this;return n().call(r,t)})}listBuckets(){return d(this,arguments,function*(t={}){var n=()=>ce(e.prototype,this,"listBuckets"),r=this;return n().call(r,t)})}deleteBucket(t){return d(this,null,function*(){var n=()=>ce(e.prototype,this,"deleteBucket"),r=this;return n().call(r,t)})}},Wb=class e extends Vb{constructor(t,n,r,o){super(t,n,o),this.vectorBucketName=r}createIndex(t){return d(this,null,function*(){var n=()=>ce(e.prototype,this,"createIndex"),r=this;return n().call(r,I(I({},t),{},{vectorBucketName:r.vectorBucketName}))})}listIndexes(){return d(this,arguments,function*(t={}){var n=()=>ce(e.prototype,this,"listIndexes"),r=this;return n().call(r,I(I({},t),{},{vectorBucketName:r.vectorBucketName}))})}getIndex(t){return d(this,null,function*(){var n=()=>ce(e.prototype,this,"getIndex"),r=this;return n().call(r,r.vectorBucketName,t)})}deleteIndex(t){return d(this,null,function*(){var n=()=>ce(e.prototype,this,"deleteIndex"),r=this;return n().call(r,r.vectorBucketName,t)})}index(t){return new Gb(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Gb=class e extends Bb{constructor(t,n,r,o,i){super(t,n,i),this.vectorBucketName=r,this.indexName=o}putVectors(t){return d(this,null,function*(){var n=()=>ce(e.prototype,this,"putVectors"),r=this;return n().call(r,I(I({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))})}getVectors(t){return d(this,null,function*(){var n=()=>ce(e.prototype,this,"getVectors"),r=this;return n().call(r,I(I({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))})}listVectors(){return d(this,arguments,function*(t={}){var n=()=>ce(e.prototype,this,"listVectors"),r=this;return n().call(r,I(I({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))})}queryVectors(t){return d(this,null,function*(){var n=()=>ce(e.prototype,this,"queryVectors"),r=this;return n().call(r,I(I({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))})}deleteVectors(t){return d(this,null,function*(){var n=()=>ce(e.prototype,this,"deleteVectors"),r=this;return n().call(r,I(I({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))})}},Yf=class extends $b{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new Lb(this.url,this.headers,e,this.fetch)}get vectors(){return new qb(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Ub(this.url+"/iceberg",this.headers,this.fetch)}};var li="2.93.2";var Vt=30*1e3,di=3,fi=di*Vt,Jf="http://localhost:9999",Qf="supabase.auth.token";var Zf={"X-Client-Info":`gotrue-js/${li}`};var wr="X-Supabase-Api-Version",hc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Xf=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,eh=10*60*1e3;var dt=class extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function b(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}var hi=class extends dt{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function th(e){return b(e)&&e.name==="AuthApiError"}var _e=class extends dt{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},Ne=class extends dt{constructor(t,n,r,o){super(t,r,o),this.name=n,this.status=r}},re=class extends Ne{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function gi(e){return b(e)&&e.name==="AuthSessionMissingError"}var Je=class extends Ne{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Bt=class extends Ne{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Ht=class extends Ne{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function nh(e){return b(e)&&e.name==="AuthImplicitGrantRedirectError"}var _r=class extends Ne{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},pi=class extends Ne{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}};var kn=class extends Ne{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function mi(e){return b(e)&&e.name==="AuthRetryableFetchError"}var br=class extends Ne{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};var qt=class extends Ne{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var yi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rh=` 	
\r=`.split(""),zb=(()=>{let e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<rh.length;t+=1)e[rh[t].charCodeAt(0)]=-2;for(let t=0;t<yi.length;t+=1)e[yi[t].charCodeAt(0)]=t;return e})();function oh(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;n(yi[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;n(yi[r]),t.queuedBits-=6}}function ih(e,t,n){let r=zb[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function pc(e){let t=[],n=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},i=s=>{Jb(s,r,n)};for(let s=0;s<e.length;s+=1)ih(e.charCodeAt(s),o,i);return t.join("")}function Kb(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Yb(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){let o=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}Kb(r,t)}}function Jb(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ft(e){let t=[],n={queue:0,queuedBits:0},r=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)ih(e.charCodeAt(o),n,r);return new Uint8Array(t)}function sh(e){let t=[];return Yb(e,n=>t.push(n)),new Uint8Array(t)}function Qe(e){let t=[],n={queue:0,queuedBits:0},r=o=>{t.push(o)};return e.forEach(o=>oh(o,n,r)),oh(null,n,r),t.join("")}function ah(e){return Math.round(Date.now()/1e3)+e}function ch(){return Symbol("auth-callback")}var X=()=>typeof window<"u"&&typeof document<"u",Wt={tested:!1,writable:!1},vi=()=>{if(!X())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wt.tested)return Wt.writable;let e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Wt.tested=!0,Wt.writable=!0}catch{Wt.tested=!0,Wt.writable=!1}return Wt.writable};function uh(e){let t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,i)=>{t[i]=o})}catch{}return n.searchParams.forEach((r,o)=>{t[o]=r}),t}var wi=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),lh=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Gt=(e,t,n)=>d(void 0,null,function*(){yield e.setItem(t,JSON.stringify(n))}),ht=(e,t)=>d(void 0,null,function*(){let n=yield e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}}),ee=(e,t)=>d(void 0,null,function*(){yield e.removeItem(t)}),Er=class e{constructor(){this.promise=new e.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}};Er.promiseConstructor=Promise;function Dr(e){let t=e.split(".");if(t.length!==3)throw new qt("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Xf.test(t[r]))throw new qt("JWT not in base64url format");return{header:JSON.parse(pc(t[0])),payload:JSON.parse(pc(t[1])),signature:ft(t[2]),raw:{header:t[0],payload:t[1]}}}function dh(e){return d(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),e)})})}function fh(e,t){return new Promise((r,o)=>{d(this,null,function*(){for(let i=0;i<1/0;i++)try{let s=yield e(i);if(!t(i,null,s)){r(s);return}}catch(s){if(!t(i,s)){o(s);return}}})})}function Qb(e){return("0"+e.toString(16)).substr(-2)}function Zb(){let t=new Uint32Array(56);if(typeof crypto>"u"){let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length,o="";for(let i=0;i<56;i++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(t),Array.from(t,Qb).join("")}function Xb(e){return d(this,null,function*(){let n=new TextEncoder().encode(e),r=yield crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(i=>String.fromCharCode(i)).join("")})}function eE(e){return d(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;let n=yield Xb(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function zt(e,t,n=!1){return d(this,null,function*(){let r=Zb(),o=r;n&&(o+="/PASSWORD_RECOVERY"),yield Gt(e,`${t}-code-verifier`,o);let i=yield eE(r);return[i,r===i?"plain":"s256"]})}var tE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hh(e){let t=e.headers.get(wr);if(!t||!t.match(tE))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ph(e){if(!e)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function gh(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var nE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Kt(e){if(!nE.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function _i(){let e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){let r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mh(e,t){return new Proxy(e,{get:(n,r,o)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){let i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,o)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,o)}})}function gc(e){return JSON.parse(JSON.stringify(e))}var Yt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),rE=[502,503,504];function yh(e){return d(this,null,function*(){var t;if(!lh(e))throw new kn(Yt(e),0);if(rE.includes(e.status))throw new kn(Yt(e),e.status);let n;try{n=yield e.json()}catch(i){throw new _e(Yt(i),i)}let r,o=hh(e);if(o&&o.getTime()>=hc["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new br(Yt(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new re}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0))throw new br(Yt(n),e.status,n.weak_password.reasons);throw new hi(Yt(n),e.status||500,r)})}var oE=(e,t,n,r)=>{let o={method:e,headers:t?.headers||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};function E(e,t,n,r){return d(this,null,function*(){var o;let i=Object.assign({},r?.headers);i[wr]||(i[wr]=hc["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);let s=(o=r?.query)!==null&&o!==void 0?o:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=yield iE(e,t,n+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}})}function iE(e,t,n,r,o,i){return d(this,null,function*(){let s=oE(t,r,o,i),a;try{a=yield e(n,Object.assign({},s))}catch(c){throw console.error(c),new kn(Yt(c),0)}if(a.ok||(yield yh(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(c){yield yh(c)}})}function be(e){var t;let n=null;sE(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=ah(e.expires_in)));let r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function mc(e){let t=be(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function je(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function vh(e){return{data:e,error:null}}function wh(e){let{action_link:t,email_otp:n,hashed_token:r,redirect_to:o,verification_type:i}=e,s=wt(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:o,verification_type:i},c=Object.assign({},s);return{data:{properties:a,user:c},error:null}}function yc(e){return e}function sE(e){return e.access_token&&e.refresh_token&&e.expires_in}var bi=["global","local","others"];var Pn=class{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=wi(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(r){return d(this,arguments,function*(t,n=bi[0]){if(bi.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bi.join(", ")}`);try{return yield E(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(o){if(b(o))return{data:null,error:o};throw o}})}inviteUserByEmail(r){return d(this,arguments,function*(t,n={}){try{return yield E(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:je})}catch(o){if(b(o))return{data:{user:null},error:o};throw o}})}generateLink(t){return d(this,null,function*(){try{let{options:n}=t,r=wt(t,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r?.newEmail,delete o.newEmail),yield E(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:wh,redirectTo:n?.redirectTo})}catch(n){if(b(n))return{data:{properties:null,user:null},error:n};throw n}})}createUser(t){return d(this,null,function*(){try{return yield E(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:je})}catch(n){if(b(n))return{data:{user:null},error:n};throw n}})}listUsers(t){return d(this,null,function*(){var n,r,o,i,s,a,c;try{let u={nextPage:null,lastPage:0,total:0},l=yield E(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&i!==void 0?i:""},xform:yc});if(l.error)throw l.error;let f=yield l.json(),p=(s=l.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(c=(a=l.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(g=>{let m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=m}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(b(u))return{data:{users:[]},error:u};throw u}})}getUserById(t){return d(this,null,function*(){Kt(t);try{return yield E(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:je})}catch(n){if(b(n))return{data:{user:null},error:n};throw n}})}updateUserById(t,n){return d(this,null,function*(){Kt(t);try{return yield E(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:je})}catch(r){if(b(r))return{data:{user:null},error:r};throw r}})}deleteUser(t,n=!1){return d(this,null,function*(){Kt(t);try{return yield E(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:je})}catch(r){if(b(r))return{data:{user:null},error:r};throw r}})}_listFactors(t){return d(this,null,function*(){Kt(t.userId);try{let{data:n,error:r}=yield E(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(b(n))return{data:null,error:n};throw n}})}_deleteFactor(t){return d(this,null,function*(){Kt(t.userId),Kt(t.id);try{return{data:yield E(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(b(n))return{data:null,error:n};throw n}})}_listOAuthClients(t){return d(this,null,function*(){var n,r,o,i,s,a,c;try{let u={nextPage:null,lastPage:0,total:0},l=yield E(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&i!==void 0?i:""},xform:yc});if(l.error)throw l.error;let f=yield l.json(),p=(s=l.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(c=(a=l.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(g=>{let m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=m}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(b(u))return{data:{clients:[]},error:u};throw u}})}_createOAuthClient(t){return d(this,null,function*(){try{return yield E(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(b(n))return{data:null,error:n};throw n}})}_getOAuthClient(t){return d(this,null,function*(){try{return yield E(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(b(n))return{data:null,error:n};throw n}})}_updateOAuthClient(t,n){return d(this,null,function*(){try{return yield E(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(b(r))return{data:null,error:r};throw r}})}_deleteOAuthClient(t){return d(this,null,function*(){try{return yield E(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(b(n))return{data:null,error:n};throw n}})}_regenerateOAuthClientSecret(t){return d(this,null,function*(){try{return yield E(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(b(n))return{data:null,error:n};throw n}})}};function vc(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}var Jt={debug:!!(globalThis&&vi()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Ir=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},Ei=class extends Ir{};function wc(e,t,n){return d(this,null,function*(){Jt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Jt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},o=>d(this,null,function*(){if(o){Jt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return yield n()}finally{Jt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw Jt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ei(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Jt.debug)try{let i=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield n()}})))})}function _h(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function _c(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function bh(e){return parseInt(e,16)}function Eh(e){let t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function Dh(e){var t;let{chainId:n,domain:r,expirationTime:o,issuedAt:i=new Date,nonce:s,notBefore:a,requestId:c,resources:u,scheme:l,uri:f,version:p}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}let h=_c(e.address),g=l?`${l}://${r}`:r,m=e.statement?`${e.statement}
`:"",v=`${g} wants you to sign in with your Ethereum account:
${h}

${m}`,y=`URI: ${f}
Version: ${p}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${i.toISOString()}`;if(o&&(y+=`
Expiration Time: ${o.toISOString()}`),a&&(y+=`
Not Before: ${a.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let C=`
Resources:`;for(let _ of u){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);C+=`
- ${_}`}y+=C}return`${v}
${y}`}var G=class extends Error{constructor({message:t,code:n,cause:r,name:o}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=o??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}},Qt=class extends G{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}};function Ih({error:e,options:t}){var n,r,o;let{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new G({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new G({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new G({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((o=i.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new G({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new G({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new G({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new G({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new G({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){let s=window.location.hostname;if(bc(s)){if(i.rp.id!==s)return new G({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new G({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new G({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new G({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new G({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Ch({error:e,options:t}){let{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new G({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new G({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){let r=window.location.hostname;if(bc(r)){if(n.rpId!==r)return new G({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new G({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new G({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new G({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var Ec=class{createNewAbortSignal(){if(this.controller){let n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}let t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){let t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}},aE=new Ec;function Sh(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);let{challenge:t,user:n,excludeCredentials:r}=e,o=wt(e,["challenge","user","excludeCredentials"]),i=ft(t).buffer,s=Object.assign(Object.assign({},n),{id:ft(n.id).buffer}),a=Object.assign(Object.assign({},o),{challenge:i,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){let u=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:ft(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function xh(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);let{challenge:t,allowCredentials:n}=e,r=wt(e,["challenge","allowCredentials"]),o=ft(t).buffer,i=Object.assign(Object.assign({},r),{challenge:o});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){let a=n[s];i.allowCredentials[s]=Object.assign(Object.assign({},a),{id:ft(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function Ah(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();let n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Qe(new Uint8Array(e.response.attestationObject)),clientDataJSON:Qe(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Mh(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();let n=e,r=e.getClientExtensionResults(),o=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Qe(new Uint8Array(o.authenticatorData)),clientDataJSON:Qe(new Uint8Array(o.clientDataJSON)),signature:Qe(new Uint8Array(o.signature)),userHandle:o.userHandle?Qe(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function bc(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Th(){var e,t;return!!(X()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}function cE(e){return d(this,null,function*(){try{let t=yield navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Qt("Browser returned unexpected credential type",t)}:{data:null,error:new Qt("Empty credential response",t)}}catch(t){return{data:null,error:Ih({error:t,options:e})}}})}function uE(e){return d(this,null,function*(){try{let t=yield navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Qt("Browser returned unexpected credential type",t)}:{data:null,error:new Qt("Empty credential response",t)}}catch(t){return{data:null,error:Ch({error:t,options:e})}}})}var lE={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},dE={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Di(...e){let t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(let o of e)if(o)for(let i in o){let s=o[i];if(s!==void 0)if(Array.isArray(s))r[i]=s;else if(n(s))r[i]=s;else if(t(s)){let a=r[i];t(a)?r[i]=Di(a,s):r[i]=Di(s)}else r[i]=s}return r}function fE(e,t){return Di(lE,e,t||{})}function hE(e,t){return Di(dE,e,t||{})}var Ii=class{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(t){return d(this,null,function*(){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))})}_challenge(s,a){return d(this,arguments,function*({factorId:t,webauthn:n,friendlyName:r,signal:o},i){try{let{data:c,error:u}=yield this.client.mfa.challenge({factorId:t,webauthn:n});if(!c)return{data:null,error:u};let l=o??aE.createNewAbortSignal();if(c.webauthn.type==="create"){let{user:f}=c.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(c.webauthn.type){case"create":{let f=fE(c.webauthn.credential_options.publicKey,i?.create),{data:p,error:h}=yield cE({publicKey:f,signal:l});return p?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:p}},error:null}:{data:null,error:h}}case"request":{let f=hE(c.webauthn.credential_options.publicKey,i?.request),{data:p,error:h}=yield uE(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:f,signal:l}));return p?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:p}},error:null}:{data:null,error:h}}}}catch(c){return b(c)?{data:null,error:c}:{data:null,error:new _e("Unexpected error in challenge",c)}}})}_verify(o){return d(this,arguments,function*({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})})}_authenticate(s,a){return d(this,arguments,function*({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},i){if(!n)return{data:null,error:new dt("rpId is required for WebAuthn authentication")};try{if(!Th())return{data:null,error:new _e("Browser does not support WebAuthn",null)};let{data:c,error:u}=yield this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:o},{request:i});if(!c)return{data:null,error:u};let{webauthn:l}=c;return this._verify({factorId:t,challengeId:c.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(c){return b(c)?{data:null,error:c}:{data:null,error:new _e("Unexpected error in authenticate",c)}}})}_register(s,a){return d(this,arguments,function*({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},i){if(!n)return{data:null,error:new dt("rpId is required for WebAuthn registration")};try{if(!Th())return{data:null,error:new _e("Browser does not support WebAuthn",null)};let{data:c,error:u}=yield this._enroll({friendlyName:t});if(!c)return yield this.client.mfa.listFactors().then(p=>{var h;return(h=p.data)===null||h===void 0?void 0:h.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===t&&g.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p?.id}):void 0),{data:null,error:u};let{data:l,error:f}=yield this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:o},{create:i});return l?this._verify({factorId:c.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:f}}catch(c){return b(c)?{data:null,error:c}:{data:null,error:new _e("Unexpected error in register",c)}}})}};_h();var pE={url:Jf,storageKey:Qf,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Zf,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};function Nh(e,t,n){return d(this,null,function*(){return yield n()})}var Fn={},gE=(()=>{class e{get jwks(){var n,r;return(r=(n=Fn[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Fn[this.storageKey]=Object.assign(Object.assign({},Fn[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Fn[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Fn[this.storageKey]=Object.assign(Object.assign({},Fn[this.storageKey]),{cachedAt:n})}constructor(n){var r,o,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let s=Object.assign(Object.assign({},pE),n);if(this.storageKey=s.storageKey,this.instanceID=(r=e.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,e.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&X()){let a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Pn({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=wi(s.fetch),this.lock=s.lock||Nh,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&X()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=wc:this.lock=Nh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Ii(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:vi()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=vc(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=vc(this.memoryStorage)),X()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",a=>d(this,null,function*(){this._debug("received broadcast notification from other tab or client",a);try{yield this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(c){this._debug("#broadcastChannel","error",c)}}))}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${li}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}initialize(){return d(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=d(this,null,function*(){return yield this._acquireLock(this.lockAcquireTimeout,()=>d(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return d(this,null,function*(){var n;try{let r={},o="none";if(X()&&(r=uh(window.location.href),this._isImplicitGrantCallback(r)?o="implicit":(yield this._isPKCECallback(r))&&(o="pkce")),X()&&this.detectSessionInUrl&&o!=="none"){let{data:i,error:s}=yield this._getSessionFromURL(r,o);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),nh(s)){let u=(n=s.details)===null||n===void 0?void 0:n.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:s}}return{error:s}}let{session:a,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),yield this._saveSession(a),setTimeout(()=>d(this,null,function*(){c==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(r){return b(r)?this._returnResult({error:r}):this._returnResult({error:new _e("Unexpected error during initialization",r)})}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(n){return d(this,null,function*(){var r,o,i;try{let s=yield E(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(i=n?.options)===null||i===void 0?void 0:i.captchaToken}},xform:be}),{data:a,error:c}=s;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});let u=a.session,l=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(s){if(b(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}signUp(n){return d(this,null,function*(){var r,o,i;try{let s;if("email"in n){let{email:f,password:p,options:h}=n,g=null,m=null;this.flowType==="pkce"&&([g,m]=yield zt(this.storage,this.storageKey)),s=yield E(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h?.emailRedirectTo,body:{email:f,password:p,data:(r=h?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:g,code_challenge_method:m},xform:be})}else if("phone"in n){let{phone:f,password:p,options:h}=n;s=yield E(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(o=h?.data)!==null&&o!==void 0?o:{},channel:(i=h?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:be})}else throw new Bt("You must provide either an email or phone number and a password");let{data:a,error:c}=s;if(c||!a)return yield ee(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});let u=a.session,l=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(s){if(yield ee(this.storage,`${this.storageKey}-code-verifier`),b(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}signInWithPassword(n){return d(this,null,function*(){try{let r;if("email"in n){let{email:s,password:a,options:c}=n;r=yield E(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:mc})}else if("phone"in n){let{phone:s,password:a,options:c}=n;r=yield E(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:mc})}else throw new Bt("You must provide either an email or phone number and a password");let{data:o,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!o||!o.session||!o.user){let s=new Je;return this._returnResult({data:{user:null,session:null},error:s})}return o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:i})}catch(r){if(b(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}signInWithOAuth(n){return d(this,null,function*(){var r,o,i,s;return yield this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=n.options)===null||o===void 0?void 0:o.scopes,queryParams:(i=n.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=n.options)===null||s===void 0?void 0:s.skipBrowserRedirect})})}exchangeCodeForSession(n){return d(this,null,function*(){return yield this.initializePromise,this._acquireLock(this.lockAcquireTimeout,()=>d(this,null,function*(){return this._exchangeCodeForSession(n)}))})}signInWithWeb3(n){return d(this,null,function*(){let{chain:r}=n;switch(r){case"ethereum":return yield this.signInWithEthereum(n);case"solana":return yield this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}})}signInWithEthereum(n){return d(this,null,function*(){var r,o,i,s,a,c,u,l,f,p,h;let g,m;if("message"in n)g=n.message,m=n.signature;else{let{chain:v,wallet:y,statement:C,options:_}=n,w;if(X())if(typeof y=="object")w=y;else{let Ee=window;if("ethereum"in Ee&&typeof Ee.ethereum=="object"&&"request"in Ee.ethereum&&typeof Ee.ethereum.request=="function")w=Ee.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!_?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=y}let A=new URL((r=_?.url)!==null&&r!==void 0?r:window.location.href),z=yield w.request({method:"eth_requestAccounts"}).then(Ee=>Ee).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!z||z.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let P=_c(z[0]),W=(o=_?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!W){let Ee=yield w.request({method:"eth_chainId"});W=bh(Ee)}let Oe={domain:A.host,address:P,statement:C,uri:A.href,version:"1",chainId:W,nonce:(i=_?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=_?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=_?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(u=_?.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(l=_?.signInWithEthereum)===null||l===void 0?void 0:l.requestId,resources:(f=_?.signInWithEthereum)===null||f===void 0?void 0:f.resources};g=Dh(Oe),m=yield w.request({method:"personal_sign",params:[Eh(g),P]})}try{let{data:v,error:y}=yield E(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:m},!((p=n.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(h=n.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:be});if(y)throw y;if(!v||!v.session||!v.user){let C=new Je;return this._returnResult({data:{user:null,session:null},error:C})}return v.session&&(yield this._saveSession(v.session),yield this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:y})}catch(v){if(b(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}})}signInWithSolana(n){return d(this,null,function*(){var r,o,i,s,a,c,u,l,f,p,h,g;let m,v;if("message"in n)m=n.message,v=n.signature;else{let{chain:y,wallet:C,statement:_,options:w}=n,A;if(X())if(typeof C=="object")A=C;else{let P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))A=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=C}let z=new URL((r=w?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in A&&A.signIn){let P=yield A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w?.signInWithSolana),{version:"1",domain:z.host,uri:z.href}),_?{statement:_}:null)),W;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")W=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)W=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)m=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),v=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${z.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${z.href}`,`Issued At: ${(i=(o=w?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=w?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((c=w?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((u=w?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((l=w?.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((p=(f=w?.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...w.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);let P=yield A.signMessage(new TextEncoder().encode(m),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=P}}try{let{data:y,error:C}=yield E(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Qe(v)},!((h=n.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(g=n.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:be});if(C)throw C;if(!y||!y.session||!y.user){let _=new Je;return this._returnResult({data:{user:null,session:null},error:_})}return y.session&&(yield this._saveSession(y.session),yield this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:C})}catch(y){if(b(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}})}_exchangeCodeForSession(n){return d(this,null,function*(){let r=yield ht(this.storage,`${this.storageKey}-code-verifier`),[o,i]=(r??"").split("/");try{if(!o&&this.flowType==="pkce")throw new pi;let{data:s,error:a}=yield E(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:o},xform:be});if(yield ee(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){let c=new Je;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(yield ee(this.storage,`${this.storageKey}-code-verifier`),b(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}})}signInWithIdToken(n){return d(this,null,function*(){try{let{options:r,provider:o,token:i,access_token:s,nonce:a}=n,c=yield E(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:be}),{data:u,error:l}=c;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!u||!u.session||!u.user){let f=new Je;return this._returnResult({data:{user:null,session:null},error:f})}return u.session&&(yield this._saveSession(u.session),yield this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:l})}catch(r){if(b(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}signInWithOtp(n){return d(this,null,function*(){var r,o,i,s,a;try{if("email"in n){let{email:c,options:u}=n,l=null,f=null;this.flowType==="pkce"&&([l,f]=yield zt(this.storage,this.storageKey));let{error:p}=yield E(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=u?.data)!==null&&r!==void 0?r:{},create_user:(o=u?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:l,code_challenge_method:f},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in n){let{phone:c,options:u}=n,{data:l,error:f}=yield E(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=u?.data)!==null&&i!==void 0?i:{},create_user:(s=u?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(a=u?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:f})}throw new Bt("You must provide either an email or phone number.")}catch(c){if(yield ee(this.storage,`${this.storageKey}-code-verifier`),b(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}verifyOtp(n){return d(this,null,function*(){var r,o;try{let i,s;"options"in n&&(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo,s=(o=n.options)===null||o===void 0?void 0:o.captchaToken);let{data:a,error:c}=yield E(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:be});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let u=a.session,l=a.user;return u?.access_token&&(yield this._saveSession(u),yield this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(i){if(b(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}signInWithSSO(n){return d(this,null,function*(){var r,o,i,s,a;try{let c=null,u=null;this.flowType==="pkce"&&([c,u]=yield zt(this.storage,this.storageKey));let l=yield E(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&o!==void 0?o:void 0}),!((i=n?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:vh});return!((s=l.data)===null||s===void 0)&&s.url&&X()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(c){if(yield ee(this.storage,`${this.storageKey}-code-verifier`),b(c))return this._returnResult({data:null,error:c});throw c}})}reauthenticate(){return d(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>d(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return d(this,null,function*(){try{return yield this._useSession(n=>d(this,null,function*(){let{data:{session:r},error:o}=n;if(o)throw o;if(!r)throw new re;let{error:i}=yield E(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})}))}catch(n){if(b(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}resend(n){return d(this,null,function*(){try{let r=`${this.url}/resend`;if("email"in n){let{email:o,type:i,options:s}=n,{error:a}=yield E(this.fetch,"POST",r,{headers:this.headers,body:{email:o,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in n){let{phone:o,type:i,options:s}=n,{data:a,error:c}=yield E(this.fetch,"POST",r,{headers:this.headers,body:{phone:o,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:c})}throw new Bt("You must provide either an email or phone number and a type")}catch(r){if(b(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}getSession(){return d(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>d(this,null,function*(){return this._useSession(r=>d(this,null,function*(){return r}))}))})}_acquireLock(n,r){return d(this,null,function*(){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){let o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=d(this,null,function*(){return yield o,yield r()});return this.pendingInLock.push(d(this,null,function*(){try{yield i}catch{}})),i}return yield this.lock(`lock:${this.storageKey}`,n,()=>d(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let o=r();for(this.pendingInLock.push(d(this,null,function*(){try{yield o}catch{}})),yield o;this.pendingInLock.length;){let i=[...this.pendingInLock];yield Promise.all(i),this.pendingInLock.splice(0,i.length)}return yield o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(n){return d(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield n(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return d(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null,r=yield ht(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!n)return{data:{session:null},error:null};let o=n.expires_at?n.expires_at*1e3-Date.now()<fi:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",n.expires_at),!o){if(this.userStorage){let a=yield ht(this.userStorage,this.storageKey+"-user");a?.user?n.user=a.user:n.user=_i()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){let a={value:this.suppressGetSessionWarning};n.user=mh(n.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}let{data:i,error:s}=yield this._callRefreshToken(n.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}})}getUser(n){return d(this,null,function*(){if(n)return yield this._getUser(n);yield this.initializePromise;let r=yield this._acquireLock(this.lockAcquireTimeout,()=>d(this,null,function*(){return yield this._getUser()}));return r.data.user&&(this.suppressGetSessionWarning=!0),r})}_getUser(n){return d(this,null,function*(){try{return n?yield E(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:je}):yield this._useSession(r=>d(this,null,function*(){var o,i,s;let{data:a,error:c}=r;if(c)throw c;return!(!((o=a.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new re}:yield E(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:je})}))}catch(r){if(b(r))return gi(r)&&(yield this._removeSession(),yield ee(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}})}updateUser(o){return d(this,arguments,function*(n,r={}){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>d(this,null,function*(){return yield this._updateUser(n,r)}))})}_updateUser(o){return d(this,arguments,function*(n,r={}){try{return yield this._useSession(i=>d(this,null,function*(){let{data:s,error:a}=i;if(a)throw a;if(!s.session)throw new re;let c=s.session,u=null,l=null;this.flowType==="pkce"&&n.email!=null&&([u,l]=yield zt(this.storage,this.storageKey));let{data:f,error:p}=yield E(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:u,code_challenge_method:l}),jwt:c.access_token,xform:je});if(p)throw p;return c.user=f.user,yield this._saveSession(c),yield this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})}))}catch(i){if(yield ee(this.storage,`${this.storageKey}-code-verifier`),b(i))return this._returnResult({data:{user:null},error:i});throw i}})}setSession(n){return d(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>d(this,null,function*(){return yield this._setSession(n)}))})}_setSession(n){return d(this,null,function*(){try{if(!n.access_token||!n.refresh_token)throw new re;let r=Date.now()/1e3,o=r,i=!0,s=null,{payload:a}=Dr(n.access_token);if(a.exp&&(o=a.exp,i=o<=r),i){let{data:c,error:u}=yield this._callRefreshToken(n.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c)return{data:{user:null,session:null},error:null};s=c}else{let{data:c,error:u}=yield this._getUser(n.access_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});s={access_token:n.access_token,refresh_token:n.refresh_token,user:c.user,token_type:"bearer",expires_in:o-r,expires_at:o},yield this._saveSession(s),yield this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(b(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}})}refreshSession(n){return d(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>d(this,null,function*(){return yield this._refreshSession(n)}))})}_refreshSession(n){return d(this,null,function*(){try{return yield this._useSession(r=>d(this,null,function*(){var o;if(!n){let{data:a,error:c}=r;if(c)throw c;n=(o=a.session)!==null&&o!==void 0?o:void 0}if(!n?.refresh_token)throw new re;let{data:i,error:s}=yield this._callRefreshToken(n.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})}))}catch(r){if(b(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}_getSessionFromURL(n,r){return d(this,null,function*(){try{if(!X())throw new Ht("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Ht(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new _r("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ht("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new _r("No code detected.");let{data:_,error:w}=yield this._exchangeCodeForSession(n.code);if(w)throw w;let A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:_.session,redirectType:null},error:null}}let{provider_token:o,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:c,expires_at:u,token_type:l}=n;if(!s||!c||!a||!l)throw new Ht("No session defined in URL");let f=Math.round(Date.now()/1e3),p=parseInt(c),h=f+p;u&&(h=parseInt(u));let g=h-f;g*1e3<=Vt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);let m=h-p;f-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,f):f-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,f);let{data:v,error:y}=yield this._getUser(s);if(y)throw y;let C={provider_token:o,provider_refresh_token:i,access_token:s,expires_in:p,expires_at:h,refresh_token:a,token_type:l,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:n.type},error:null})}catch(o){if(b(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}})}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}_isPKCECallback(n){return d(this,null,function*(){let r=yield ht(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)})}signOut(){return d(this,arguments,function*(n={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>d(this,null,function*(){return yield this._signOut(n)}))})}_signOut(){return d(this,arguments,function*({scope:n}={scope:"global"}){return yield this._useSession(r=>d(this,null,function*(){var o;let{data:i,error:s}=r;if(s&&!gi(s))return this._returnResult({error:s});let a=(o=i.session)===null||o===void 0?void 0:o.access_token;if(a){let{error:c}=yield this.admin.signOut(a,n);if(c&&!(th(c)&&(c.status===404||c.status===401||c.status===403)||gi(c)))return this._returnResult({error:c})}return n!=="others"&&(yield this._removeSession(),yield ee(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})}))})}onAuthStateChange(n){let r=ch(),o={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,o),d(this,null,function*(){yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>d(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:o}}}_emitInitialSession(n){return d(this,null,function*(){return yield this._useSession(r=>d(this,null,function*(){var o,i;try{let{data:{session:s},error:a}=r;if(a)throw a;yield(o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",s),this._debug("INITIAL_SESSION","callback id",n,"session",s)}catch(s){yield(i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",n,"error",s),console.error(s)}}))})}resetPasswordForEmail(o){return d(this,arguments,function*(n,r={}){let i=null,s=null;this.flowType==="pkce"&&([i,s]=yield zt(this.storage,this.storageKey,!0));try{return yield E(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(yield ee(this.storage,`${this.storageKey}-code-verifier`),b(a))return this._returnResult({data:null,error:a});throw a}})}getUserIdentities(){return d(this,null,function*(){var n;try{let{data:r,error:o}=yield this.getUser();if(o)throw o;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(b(r))return this._returnResult({data:null,error:r});throw r}})}linkIdentity(n){return d(this,null,function*(){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)})}linkIdentityOAuth(n){return d(this,null,function*(){var r;try{let{data:o,error:i}=yield this._useSession(s=>d(this,null,function*(){var a,c,u,l,f;let{data:p,error:h}=s;if(h)throw h;let g=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=n.options)===null||c===void 0?void 0:c.scopes,queryParams:(u=n.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return yield E(this.fetch,"GET",g,{headers:this.headers,jwt:(f=(l=p.session)===null||l===void 0?void 0:l.access_token)!==null&&f!==void 0?f:void 0})}));if(i)throw i;return X()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:n.provider,url:o?.url},error:null})}catch(o){if(b(o))return this._returnResult({data:{provider:n.provider,url:null},error:o});throw o}})}linkIdentityIdToken(n){return d(this,null,function*(){return yield this._useSession(r=>d(this,null,function*(){var o;try{let{error:i,data:{session:s}}=r;if(i)throw i;let{options:a,provider:c,token:u,access_token:l,nonce:f}=n,p=yield E(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=s?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:c,id_token:u,access_token:l,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:be}),{data:h,error:g}=p;return g?this._returnResult({data:{user:null,session:null},error:g}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new Je}):(h.session&&(yield this._saveSession(h.session),yield this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:g}))}catch(i){if(yield ee(this.storage,`${this.storageKey}-code-verifier`),b(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}))})}unlinkIdentity(n){return d(this,null,function*(){try{return yield this._useSession(r=>d(this,null,function*(){var o,i;let{data:s,error:a}=r;if(a)throw a;return yield E(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(i=(o=s.session)===null||o===void 0?void 0:o.access_token)!==null&&i!==void 0?i:void 0})}))}catch(r){if(b(r))return this._returnResult({data:null,error:r});throw r}})}_refreshAccessToken(n){return d(this,null,function*(){let r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{let o=Date.now();return yield fh(i=>d(this,null,function*(){return i>0&&(yield dh(200*Math.pow(2,i-1))),this._debug(r,"refreshing attempt",i),yield E(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:be})}),(i,s)=>{let a=200*Math.pow(2,i);return s&&mi(s)&&Date.now()+a-o<Vt})}catch(o){if(this._debug(r,"error",o),b(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(r,"end")}})}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}_handleProviderSignIn(n,r){return d(this,null,function*(){let o=yield this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",o),X()&&!r.skipBrowserRedirect&&window.location.assign(o),{data:{provider:n,url:o},error:null}})}_recoverAndRefresh(){return d(this,null,function*(){var n,r;let o="#_recoverAndRefresh()";this._debug(o,"begin");try{let i=yield ht(this.storage,this.storageKey);if(i&&this.userStorage){let a=yield ht(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},yield Gt(this.userStorage,this.storageKey+"-user",a)),i.user=(n=a?.user)!==null&&n!==void 0?n:_i()}else if(i&&!i.user&&!i.user){let a=yield ht(this.storage,this.storageKey+"-user");a&&a?.user?(i.user=a.user,yield ee(this.storage,this.storageKey+"-user"),yield Gt(this.storage,this.storageKey,i)):i.user=_i()}if(this._debug(o,"session from storage",i),!this._isValidSession(i)){this._debug(o,"session is not valid"),i!==null&&(yield this._removeSession());return}let s=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<fi;if(this._debug(o,`session has${s?"":" not"} expired with margin of ${fi}s`),s){if(this.autoRefreshToken&&i.refresh_token){let{error:a}=yield this._callRefreshToken(i.refresh_token);a&&(console.error(a),mi(a)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",a),yield this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:c}=yield this._getUser(i.access_token);!c&&a?.user?(i.user=a.user,yield this._saveSession(i),yield this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(o,"error getting user data, skipping SIGNED_IN notification",a)}else yield this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(o,"error",i),console.error(i);return}finally{this._debug(o,"end")}})}_callRefreshToken(n){return d(this,null,function*(){var r,o;if(!n)throw new re;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let i=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Er;let{data:s,error:a}=yield this._refreshAccessToken(n);if(a)throw a;if(!s.session)throw new re;yield this._saveSession(s.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let c={data:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(i,"error",s),b(s)){let a={data:null,error:s};return mi(s)||(yield this._removeSession()),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}})}_notifyAllSubscribers(n,r,o=!0){return d(this,null,function*(){let i=`#_notifyAllSubscribers(${n})`;this._debug(i,"begin",r,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:n,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(c=>d(this,null,function*(){try{yield c.callback(n,r)}catch(u){s.push(u)}}));if(yield Promise.all(a),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(i,"end")}})}_saveSession(n){return d(this,null,function*(){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,yield ee(this.storage,`${this.storageKey}-code-verifier`);let r=Object.assign({},n),o=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&r.user&&(yield Gt(this.userStorage,this.storageKey+"-user",{user:r.user}));let i=Object.assign({},r);delete i.user;let s=gc(i);yield Gt(this.storage,this.storageKey,s)}else{let i=gc(r);yield Gt(this.storage,this.storageKey,i)}})}_removeSession(){return d(this,null,function*(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,yield ee(this.storage,this.storageKey),yield ee(this.storage,this.storageKey+"-code-verifier"),yield ee(this.storage,this.storageKey+"-user"),this.userStorage&&(yield ee(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&X()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return d(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let n=setInterval(()=>this._autoRefreshTokenTick(),Vt);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);let r=setTimeout(()=>d(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)})}_stopAutoRefresh(){return d(this,null,function*(){this._debug("#_stopAutoRefresh()");let n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);let r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)})}startAutoRefresh(){return d(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return d(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return d(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>d(this,null,function*(){try{let n=Date.now();try{return yield this._useSession(r=>d(this,null,function*(){let{data:{session:o}}=r;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let i=Math.floor((o.expires_at*1e3-n)/Vt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Vt}ms, refresh threshold is ${di} ticks`),i<=di&&(yield this._callRefreshToken(o.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(n){if(n.isAcquireTimeout||n instanceof Ir)this._debug("auto refresh token tick lock not available");else throw n}})}_handleVisibilityChange(){return d(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!X()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>d(this,null,function*(){try{yield this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}})}_onVisibilityChanged(n){return d(this,null,function*(){let r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>d(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(n,r,o){return d(this,null,function*(){let i=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&i.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){let[s,a]=yield zt(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(c.toString())}if(o?.queryParams){let s=new URLSearchParams(o.queryParams);i.push(s.toString())}return o?.skipBrowserRedirect&&i.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${i.join("&")}`})}_unenroll(n){return d(this,null,function*(){try{return yield this._useSession(r=>d(this,null,function*(){var o;let{data:i,error:s}=r;return s?this._returnResult({data:null,error:s}):yield E(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(o=i?.session)===null||o===void 0?void 0:o.access_token})}))}catch(r){if(b(r))return this._returnResult({data:null,error:r});throw r}})}_enroll(n){return d(this,null,function*(){try{return yield this._useSession(r=>d(this,null,function*(){var o,i;let{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});let c=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:u,error:l}=yield E(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(o=s?.session)===null||o===void 0?void 0:o.access_token});return l?this._returnResult({data:null,error:l}):(n.factorType==="totp"&&u.type==="totp"&&(!((i=u?.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))}))}catch(r){if(b(r))return this._returnResult({data:null,error:r});throw r}})}_verify(n){return d(this,null,function*(){return this._acquireLock(this.lockAcquireTimeout,()=>d(this,null,function*(){try{return yield this._useSession(r=>d(this,null,function*(){var o;let{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Ah(n.webauthn.credential_response):Mh(n.webauthn.credential_response)})}:{code:n.code}),{data:c,error:u}=yield E(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:a,headers:this.headers,jwt:(o=i?.session)===null||o===void 0?void 0:o.access_token});return u?this._returnResult({data:null,error:u}):(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:u}))}))}catch(r){if(b(r))return this._returnResult({data:null,error:r});throw r}}))})}_challenge(n){return d(this,null,function*(){return this._acquireLock(this.lockAcquireTimeout,()=>d(this,null,function*(){try{return yield this._useSession(r=>d(this,null,function*(){var o;let{data:i,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=yield E(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(o=i?.session)===null||o===void 0?void 0:o.access_token});if(a.error)return a;let{data:c}=a;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:Sh(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:xh(c.webauthn.credential_options.publicKey)})})}),error:null}}}))}catch(r){if(b(r))return this._returnResult({data:null,error:r});throw r}}))})}_challengeAndVerify(n){return d(this,null,function*(){let{data:r,error:o}=yield this._challenge({factorId:n.factorId});return o?this._returnResult({data:null,error:o}):yield this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})})}_listFactors(){return d(this,null,function*(){var n;let{data:{user:r},error:o}=yield this.getUser();if(o)return{data:null,error:o};let i={all:[],phone:[],totp:[],webauthn:[]};for(let s of(n=r?.factors)!==null&&n!==void 0?n:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}})}_getAuthenticatorAssuranceLevel(n){return d(this,null,function*(){var r,o,i,s;if(n)try{let{payload:g}=Dr(n),m=null;g.aal&&(m=g.aal);let v=m,{data:{user:y},error:C}=yield this.getUser(n);if(C)return this._returnResult({data:null,error:C});((o=(r=y?.factors)===null||r===void 0?void 0:r.filter(A=>A.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(v="aal2");let w=g.amr||[];return{data:{currentLevel:m,nextLevel:v,currentAuthenticationMethods:w},error:null}}catch(g){if(b(g))return this._returnResult({data:null,error:g});throw g}let{data:{session:a},error:c}=yield this.getSession();if(c)return this._returnResult({data:null,error:c});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:u}=Dr(a.access_token),l=null;u.aal&&(l=u.aal);let f=l;((s=(i=a.user.factors)===null||i===void 0?void 0:i.filter(g=>g.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(f="aal2");let h=u.amr||[];return{data:{currentLevel:l,nextLevel:f,currentAuthenticationMethods:h},error:null}})}_getAuthorizationDetails(n){return d(this,null,function*(){try{return yield this._useSession(r=>d(this,null,function*(){let{data:{session:o},error:i}=r;return i?this._returnResult({data:null,error:i}):o?yield E(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:o.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new re})}))}catch(r){if(b(r))return this._returnResult({data:null,error:r});throw r}})}_approveAuthorization(n,r){return d(this,null,function*(){try{return yield this._useSession(o=>d(this,null,function*(){let{data:{session:i},error:s}=o;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new re});let a=yield E(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&X()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a}))}catch(o){if(b(o))return this._returnResult({data:null,error:o});throw o}})}_denyAuthorization(n,r){return d(this,null,function*(){try{return yield this._useSession(o=>d(this,null,function*(){let{data:{session:i},error:s}=o;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new re});let a=yield E(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&X()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a}))}catch(o){if(b(o))return this._returnResult({data:null,error:o});throw o}})}_listOAuthGrants(){return d(this,null,function*(){try{return yield this._useSession(n=>d(this,null,function*(){let{data:{session:r},error:o}=n;return o?this._returnResult({data:null,error:o}):r?yield E(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new re})}))}catch(n){if(b(n))return this._returnResult({data:null,error:n});throw n}})}_revokeOAuthGrant(n){return d(this,null,function*(){try{return yield this._useSession(r=>d(this,null,function*(){let{data:{session:o},error:i}=r;return i?this._returnResult({data:null,error:i}):o?(yield E(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new re})}))}catch(r){if(b(r))return this._returnResult({data:null,error:r});throw r}})}fetchJwk(o){return d(this,arguments,function*(n,r={keys:[]}){let i=r.keys.find(u=>u.kid===n);if(i)return i;let s=Date.now();if(i=this.jwks.keys.find(u=>u.kid===n),i&&this.jwks_cached_at+eh>s)return i;let{data:a,error:c}=yield E(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,i=a.keys.find(u=>u.kid===n),!i)?null:i})}getClaims(o){return d(this,arguments,function*(n,r={}){try{let i=n;if(!i){let{data:m,error:v}=yield this.getSession();if(v||!m.session)return this._returnResult({data:null,error:v});i=m.session.access_token}let{header:s,payload:a,signature:c,raw:{header:u,payload:l}}=Dr(i);r?.allowExpired||ph(a.exp);let f=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:yield this.fetchJwk(s.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!f){let{error:m}=yield this.getUser(i);if(m)throw m;return{data:{claims:a,header:s,signature:c},error:null}}let p=gh(s.alg),h=yield crypto.subtle.importKey("jwk",f,p,!0,["verify"]);if(!(yield crypto.subtle.verify(p,h,c,sh(`${u}.${l}`))))throw new qt("Invalid JWT signature");return{data:{claims:a,header:s,signature:c},error:null}}catch(i){if(b(i))return this._returnResult({data:null,error:i});throw i}})}}return e.nextInstanceID={},e})(),Dc=gE;var mE=Dc,Ic=mE;var yE="2.93.2",Cr="";typeof Deno<"u"?Cr="deno":typeof document<"u"?Cr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Cr="react-native":Cr="node";var vE={"X-Client-Info":`supabase-js-${Cr}/${yE}`},wE={headers:vE},_E={schema:"public"},bE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},EE={};function Tr(e){"@babel/helpers - typeof";return Tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tr(e)}function DE(e,t){if(Tr(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Tr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IE(e){var t=DE(e,"string");return Tr(t)=="symbol"?t:t+""}function CE(e,t,n){return(t=IE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Oh(Object(n),!0).forEach(function(r){CE(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var TE=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),SE=()=>Headers,xE=(e,t,n)=>{let r=TE(n),o=SE();return(i,s)=>d(void 0,null,function*(){var a;let c=(a=yield t())!==null&&a!==void 0?a:e,u=new o(s?.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Y(Y({},s),{},{headers:u}))})};function AE(e){return e.endsWith("/")?e:e+"/"}function ME(e,t){var n,r;let{db:o,auth:i,realtime:s,global:a}=e,{db:c,auth:u,realtime:l,global:f}=t,p={db:Y(Y({},c),o),auth:Y(Y({},u),i),realtime:Y(Y({},l),s),storage:{},global:Y(Y(Y({},f),a),{},{headers:Y(Y({},(n=f?.headers)!==null&&n!==void 0?n:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>d(this,null,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function NE(e){let t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(AE(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var OE=class extends Ic{constructor(e){super(e)}},RE=class{constructor(e,t,n){var r,o;this.supabaseUrl=e,this.supabaseKey=t;let i=NE(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);let s=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:_E,realtime:EE,auth:Y(Y({},bE),{},{storageKey:s}),global:wE},c=ME(n??{},a);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(o=c.global.headers)!==null&&o!==void 0?o:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(l,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=xE(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Y({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(l=>this.realtime.setAuth(l)).catch(l=>console.warn("Failed to set initial Realtime auth token:",l)),this.rest=new Pf(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new Yf(this.storageUrl.href,this.headers,this.fetch,n?.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new cr(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return d(this,null,function*(){var e=this,t,n;if(e.accessToken)return yield e.accessToken();let{data:r}=yield e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:o,storageKey:i,flowType:s,lock:a,debug:c,throwOnError:u},l,f){let p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new OE({url:this.authUrl.href,headers:Y(Y({},p),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:o,flowType:s,lock:a,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(h=>h.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new hr(this.realtimeUrl.href,Y(Y({},e),{},{params:Y(Y({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}},Rh=(e,t,n)=>new RE(e,t,n);function kE(){if(typeof window<"u")return!1;let e=globalThis.process;if(!e)return!1;let t=e.version;if(t==null)return!1;let n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}kE()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Cc={production:!1,supabaseUrl:"https://REPLACE_WITH_DEV_PROJECT.supabase.co",supabaseAnonKey:"REPLACE_WITH_DEV_ANON_KEY"};var aR=(()=>{class e{constructor(){this.supabase=Rh(Cc.supabaseUrl||"https://placeholder.supabase.co",Cc.supabaseAnonKey||"placeholder-key")}get client(){return this.supabase}channel(n){return this.supabase.channel(n)}from(n){return this.supabase.from(n)}rpc(n,r){return this.supabase.rpc(n,r)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{Q as a,Lh as b,R as c,Ri as d,ki as e,tt as f,jn as g,_t as h,Ze as i,Li as j,np as k,rp as l,bt as m,Re as n,ep as o,Ue as p,ji as q,an as r,op as s,ip as t,$i as u,fp as v,Un as w,pp as x,mp as y,Jc as z,yp as A,vp as B,Vn as C,Ui as D,wp as E,_p as F,Dp as G,Ip as H,Zc as I,Vi as J,Cp as K,Tp as L,Sp as M,xp as N,Ap as O,Mp as P,Np as Q,F as R,qu as S,H as T,Gu as U,qx as V,B as W,k as X,oe as Y,$ as Z,ng as _,rg as $,qn as aa,ot as ba,Wx as ca,sl as da,Fo as ea,Tg as fa,gl as ga,it as ha,jg as ia,bl as ja,Gx as ka,zx as la,Kx as ma,Yx as na,xm as oa,rr as pa,Ot as qa,$t as ra,Dt as sa,Jx as ta,Qx as ua,Um as va,Ea as wa,Zx as xa,Xx as ya,eA as za,tA as Aa,bo as Ba,nA as Ca,me as Da,rA as Ea,kt as Fa,Io as Ga,ks as Ha,La as Ia,ja as Ja,ye as Ka,Iv as La,Dn as Ma,Zv as Na,ow as Oa,Ws as Pa,iw as Qa,Wd as Ra,lw as Sa,hw as Ta,Tw as Ua,Xd as Va,Sw as Wa,aA as Xa,cA as Ya,cf as Za,uf as _a,Lw as $a,Uw as ab,Vw as bb,uA as cb,Kw as db,lA as eb,dA as fb,fA as gb,hA as hb,pA as ib,gA as jb,mA as kb,yA as lb,vA as mb,Xw as nb,df as ob,e_ as pb,t_ as qb,n_ as rb,wA as sb,r_ as tb,_A as ub,bA as vb,EA as wb,DA as xb,IA as yb,CA as zb,TA as Ab,SA as Bb,xA as Cb,AA as Db,MA as Eb,NA as Fb,Ha as Gb,g_ as Hb,m_ as Ib,mf as Jb,OA as Kb,vf as Lb,RA as Mb,P_ as Nb,kA as Ob,PA as Pb,Wa as Qb,oM as Rb,_f as Sb,Xa as Tb,iM as Ub,ti as Vb,L_ as Wb,sM as Xb,j_ as Yb,aM as Zb,cM as _b,uM as $b,lM as ac,dM as bc,fM as cc,hM as dc,tb as ec,pM as fc,gM as gc,Sf as hc,aR as ic};
