import{a as Ve,b as Ge}from"./chunk-SJCJM33I.js";import{b as Ae,c as Ie,f as Pe,h as ke,i as xe,j as Fe,k as Be,m as Le,n as He}from"./chunk-ACCF75FY.js";import{$a as C,$b as Re,Ca as l,D as G,Da as U,Fa as we,G as me,Jb as Ne,Ka as K,N as be,O as b,Ob as Q,P as ve,Q as ne,Sa as v,T as P,Ta as De,Tb as J,Ua as h,W as ye,Wa as ae,Xa as N,Z as p,Za as r,_a as a,ac as q,c as pe,ca as E,cb as k,db as y,dc as Y,eb as u,f as D,fb as Ce,gb as Te,h as _e,ha as se,ib as Me,j as te,jb as Oe,ka as _,kb as Se,la as f,mb as d,n as ie,nb as $,ob as R,pa as z,pb as Ee,ra as oe,rb as x,sa as W,sb as F,tb as B,u as O,v as fe,vb as A,w as V,x as ge,y as j}from"./chunk-2TFJQIGG.js";import{a as ee,b as he,e as M}from"./chunk-DVOCWXDE.js";function Je(t,s){if(t&1&&C(0,"i"),t&2){let e=u(2);N(e.iconClass+" me-1")}}function qe(t,s){if(t&1&&(r(0,"span"),v(1,Je,1,2,"i",1),d(2),a()),t&2){let e=u();N(e.badgeClass),l(),h("ngIf",e.showIcon),l(),R(" ",e.label," ")}}function Ye(t,s){t&1&&C(0,"i",6)}function Ze(t,s){if(t&1&&(r(0,"span",4),v(1,Ye,1,0,"i",5),d(2," Assembly "),a()),t&2){let e=u();l(),h("ngIf",e.showIcon)}}function Xe(t,s){t&1&&C(0,"i",9)}function et(t,s){if(t&1&&(r(0,"span",7),v(1,Xe,1,0,"i",8),d(2," Modified "),a()),t&2){let e=u();l(),h("ngIf",e.showIcon)}}var It=(()=>{class t{constructor(){this.classification=null,this.showIcon=!0,this.size="sm",this.isAssembly=!1,this.isModified=!1,this.config={purchased:{label:"Purchased",icon:"bi-box-seam",class:"badge bg-primary"},manufactured:{label:"Manufactured",icon:"bi-wrench",class:"badge bg-warning text-dark"}}}get badgeClass(){return this.classification?this.config[this.classification].class:""}get iconClass(){return this.classification?`bi ${this.config[this.classification].icon}`:""}get label(){return this.classification?this.config[this.classification].label:""}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=E({type:t,selectors:[["app-classification-badge"]],inputs:{classification:"classification",showIcon:"showIcon",size:"size",isAssembly:"isAssembly",isModified:"isModified"},standalone:!0,features:[A],decls:4,vars:3,consts:[[1,"d-flex","gap-2","flex-wrap"],[3,"class",4,"ngIf"],["class","badge bg-secondary",4,"ngIf"],["class","badge bg-info text-dark",4,"ngIf"],[1,"badge","bg-secondary"],["class","bi bi-boxes me-1",4,"ngIf"],[1,"bi","bi-boxes","me-1"],[1,"badge","bg-info","text-dark"],["class","bi bi-pencil me-1",4,"ngIf"],[1,"bi","bi-pencil","me-1"]],template:function(n,i){n&1&&(r(0,"div",0),v(1,qe,3,4,"span",1)(2,Ze,3,1,"span",2)(3,et,3,1,"span",3),a()),n&2&&(l(),h("ngIf",i.classification),l(),h("ngIf",i.isAssembly),l(),h("ngIf",i.isModified))},dependencies:[Y,q],styles:[".badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .5rem;border-radius:.25rem;font-weight:500}"]})}}return t})();var it=["*"];var nt=["dialog"];var $e={animation:!0,transitionTimerDelayMs:5},st=(()=>{class t{constructor(){this.animation=$e.animation}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ot(t){let{transitionDelay:s,transitionDuration:e}=window.getComputedStyle(t),n=parseFloat(s),i=parseFloat(e);return(n+i)*1e3}function je(t){return typeof t=="string"}function re(t){return t!=null}function at(t){return t&&t.then}function ze(t){return(t||document.body).getBoundingClientRect()}function rt(t){return s=>new pe(e=>{let n=c=>t.run(()=>e.next(c)),i=c=>t.run(()=>e.error(c)),o=()=>t.run(()=>e.complete());return s.subscribe({next:n,error:i,complete:o})})}var lt=()=>{},{transitionTimerDelayMs:ct}=$e,Z=new Map,I=(t,s,e,n)=>{let i=n.context||{},o=Z.get(s);if(o)switch(n.runningTransition){case"continue":return _e;case"stop":t.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),Z.delete(s)}let c=e(s,n.animation,i)||lt;if(!n.animation||window.getComputedStyle(s).transitionProperty==="none")return t.run(()=>c()),te(void 0).pipe(rt(t));let g=new D,m=new D,w=g.pipe(me(!0));Z.set(s,{transition$:g,complete:()=>{m.next(),m.complete()},context:i});let H=ot(s);return t.runOutsideAngular(()=>{let T=O(s,"transitionend").pipe(b(w),V(({target:Ke})=>Ke===s)),S=fe(H+ct).pipe(b(w));ge(S,T,m).pipe(b(w)).subscribe(()=>{Z.delete(s),t.run(()=>{c(),g.next(),g.complete()})})}),g.asObservable()};var de=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}(de||{});var Zi=(()=>{let t=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,s=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(t()||s()):!1})();var dt=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Ue(t){let s=Array.from(t.querySelectorAll(dt)).filter(e=>e.tabIndex!==-1);return[s[0],s[s.length-1]]}var ut=(t,s,e,n=!1)=>{t.runOutsideAngular(()=>{let i=O(s,"focusin").pipe(b(e),ie(o=>o.target));O(s,"keydown").pipe(b(e),V(o=>o.which===de.Tab),ne(i)).subscribe(([o,c])=>{let[g,m]=Ue(s);(c===g||c===s)&&o.shiftKey&&(m.focus(),o.preventDefault()),c===m&&!o.shiftKey&&(g.focus(),o.preventDefault())}),n&&O(s,"click").pipe(b(e),ne(i),ie(o=>o[1])).subscribe(o=>o.focus())})};var Xi=new Date(1882,10,12),en=new Date(2174,10,25);var tn=1e3*60*60*24;var ue=1080,ht=24*ue,pt=12*ue+793,nn=29*ht+pt,sn=11*ue+204;var _t=(()=>{class t{constructor(){this._ngbConfig=p(st),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),L=class{constructor(s,e,n){this.nodes=s,this.viewRef=e,this.componentRef=n}};var ft=(()=>{class t{constructor(){this._document=p(J)}hide(){let e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),n=this._document.body,i=n.style,{overflow:o,paddingRight:c}=i;if(e>0){let g=parseFloat(window.getComputedStyle(n).paddingRight);i.paddingRight=`${g+e}px`}return i.overflow="hidden",()=>{e>0&&(i.paddingRight=c),i.overflow=o}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),gt=(()=>{class t{constructor(){this._nativeElement=p(oe).nativeElement,this._zone=p(K)}ngOnInit(){this._zone.onStable.asObservable().pipe(G(1)).subscribe(()=>{I(this._zone,this._nativeElement,(e,n)=>{n&&ze(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return I(this._zone,this._nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=E({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(n,i){n&2&&(N("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),ae("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[A],decls:0,vars:0,template:function(n,i){},encapsulation:2})}}return t})(),X=class{update(s){}close(s){}dismiss(s){}},mt=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],bt=["animation","backdropClass"],le=class{_applyWindowOptions(s,e){mt.forEach(n=>{re(e[n])&&(s[n]=e[n])})}_applyBackdropOptions(s,e){bt.forEach(n=>{re(e[n])&&(s[n]=e[n])})}update(s){this._applyWindowOptions(this._windowCmptRef.instance,s),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,s)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(b(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(b(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(s,e,n,i){this._windowCmptRef=s,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=i,this._closed=new D,this._dismissed=new D,this._hidden=new D,s.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,c)=>{this._resolve=o,this._reject=c}),this.result.then(null,()=>{})}close(s){this._windowCmptRef&&(this._closed.next(s),this._resolve(s),this._removeModalElements())}_dismiss(s){this._dismissed.next(s),this._reject(s),this._removeModalElements()}dismiss(s){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(s);else{let e=this._beforeDismiss();at(e)?e.then(n=>{n!==!1&&this._dismiss(s)},()=>{}):e!==!1&&this._dismiss(s)}}_removeModalElements(){let s=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():te(void 0);s.subscribe(()=>{let{nativeElement:n}=this._windowCmptRef.location;n.parentNode.removeChild(n),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:n}=this._backdropCmptRef.location;n.parentNode.removeChild(n),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),j(s,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},ce=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}(ce||{}),vt=(()=>{class t{constructor(){this._document=p(J),this._elRef=p(oe),this._zone=p(K),this._closed$=new D,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new W,this.shown=new D,this.hidden=new D}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":je(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(G(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:e}=this._elRef,n={animation:this.animation,runningTransition:"stop"},i=I(this._zone,e,()=>e.classList.remove("show"),n),o=I(this._zone,this._dialogEl.nativeElement,()=>{},n),c=j(i,o);return c.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),c}_show(){let e={animation:this.animation,runningTransition:"continue"},n=I(this._zone,this._elRef.nativeElement,(o,c)=>{c&&ze(o),o.classList.add("show")},e),i=I(this._zone,this._dialogEl.nativeElement,()=>{},e);j(n,i).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{O(e,"keydown").pipe(b(this._closed$),V(i=>i.which===de.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(ce.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let n=!1;O(this._dialogEl.nativeElement,"mousedown").pipe(b(this._closed$),ve(()=>n=!1),be(()=>O(e,"mouseup").pipe(b(this._closed$),G(1))),V(({target:i})=>e===i)).subscribe(()=>{n=!0}),O(e,"click").pipe(b(this._closed$)).subscribe(({target:i})=>{e===i&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!n&&this._zone.run(()=>this.dismiss(ce.BACKDROP_CLICK))),n=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){let n=e.querySelector("[ngbAutofocus]"),i=Ue(e)[0];(n||i||e).focus()}}_restoreFocus(){let e=this._document.body,n=this._elWithFocus,i;n&&n.focus&&e.contains(n)?i=n:i=e,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&I(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=E({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(n,i){if(n&1&&Me(nt,7),n&2){let o;Oe(o=Se())&&(i._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(n,i){n&2&&(De("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),N("modal d-block"+(i.windowClass?" "+i.windowClass:"")),ae("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[A],ngContentSelectors:it,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(n,i){n&1&&(Ce(),r(0,"div",1,0)(2,"div",2),Te(3),a()()),n&2&&N("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2})}}return t})(),yt=(()=>{class t{constructor(){this._applicationRef=p(Ne),this._injector=p(z),this._environmentInjector=p(se),this._document=p(J),this._scrollBar=p(ft),this._activeWindowCmptHasChanged=new D,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new W;let e=p(K);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let n=this._windowCmpts[this._windowCmpts.length-1];ut(e,n.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(n.location.nativeElement)}})}_restoreScrollBar(){let e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,n,i){let o=i.container instanceof HTMLElement?i.container:re(i.container)?this._document.querySelector(i.container):this._document.body;if(!o)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let c=new X;e=i.injector||e;let g=e.get(se,null)||this._environmentInjector,m=this._getContentRef(e,g,n,c,i),w=i.backdrop!==!1?this._attachBackdrop(o):void 0,H=this._attachWindowComponent(o,m.nodes),T=new le(H,m,w,i.beforeDismiss);return this._registerModalRef(T),this._registerWindowCmpt(H),T.hidden.pipe(G(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),c.close=S=>{T.close(S)},c.dismiss=S=>{T.dismiss(S)},c.update=S=>{T.update(S)},T.update(i),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),w&&w.instance&&w.changeDetectorRef.detectChanges(),H.changeDetectorRef.detectChanges(),T}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(n=>n.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let n=Q(gt,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(e,n){let i=Q(vt,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:n});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_getContentRef(e,n,i,o,c){return i?i instanceof we?this._createFromTemplateRef(i,o):je(i)?this._createFromString(i):this._createFromComponent(e,n,i,o,c):new L([])}_createFromTemplateRef(e,n){let i={$implicit:n,close(c){n.close(c)},dismiss(c){n.dismiss(c)}},o=e.createEmbeddedView(i);return this._applicationRef.attachView(o),new L([o.rootNodes],o)}_createFromString(e){let n=this._document.createTextNode(`${e}`);return new L([[n]])}_createFromComponent(e,n,i,o,c){let g=z.create({providers:[{provide:X,useValue:o}],parent:e}),m=Q(i,{environmentInjector:n,elementInjector:g}),w=m.location.nativeElement;return c.scrollable&&w.classList.add("component-host-scrollable"),this._applicationRef.attachView(m.hostView),new L([[w]],m.hostView,m)}_setAriaHidden(e){let n=e.parentElement;n&&e!==this._document.body&&(Array.from(n.children).forEach(i=>{i!==e&&i.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(n))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,n)=>{e?n.setAttribute("aria-hidden",e):n.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){let n=()=>{let i=this._modalRefs.indexOf(e);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(n,n)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{let n=this._windowCmpts.indexOf(e);n>-1&&(this._windowCmpts.splice(n,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),on=(()=>{class t{constructor(){this._injector=p(z),this._modalStack=p(yt),this._config=p(_t)}open(e,n={}){let i=ee(he(ee({},this._config),{animation:this._config.animation}),n);return this._modalStack.open(this._injector,e,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var an=new ye("live announcer delay",{providedIn:"root",factory:()=>100});function wt(t,s){t&1&&(r(0,"div",10)(1,"div",11)(2,"span",12),d(3,"Loading..."),a()()())}function Dt(t,s){if(t&1){let e=k();r(0,"div",13)(1,"p"),d(2,"No parts in this assembly yet."),a(),r(3,"button",14),y("click",function(){_(e);let i=u();return f(i.showAddDialog=!0)}),d(4," Add First Part "),a()()}}function Ct(t,s){if(t&1&&(r(0,"span",29),d(1),a()),t&2){let e=u().$implicit;l(),R("(",e.reference_designator,")")}}function Tt(t,s){if(t&1&&(r(0,"div",30),d(1),a()),t&2){let e=u().$implicit;l(),$(e.part.description)}}function Mt(t,s){if(t&1&&(r(0,"div",30),d(1),a()),t&2){let e=u().$implicit;l(),R("Note: ",e.notes,"")}}function Ot(t,s){if(t&1){let e=k();r(0,"div",17)(1,"div",18),C(2,"i",19),r(3,"div",20)(4,"div",21)(5,"span",22),d(6),a(),v(7,Ct,2,1,"span",23),a(),v(8,Tt,2,1,"div",24)(9,Mt,2,1,"div",24),a(),r(10,"div",21)(11,"label",25),d(12,"Qty:"),a(),r(13,"input",26),B("ngModelChange",function(i){let o=_(e).$implicit;return F(o.quantity,i)||(o.quantity=i),f(i)}),y("change",function(){let i=_(e).$implicit,o=u(2);return f(o.updateQuantity(i.id,i.quantity))}),a(),r(14,"button",27),y("click",function(){let i=_(e).$implicit,o=u(2);return f(o.deleteChild(i.id))}),C(15,"i",28),a()()()()}if(t&2){let e=s.$implicit;l(6),$(e.part.part_number),l(),h("ngIf",e.reference_designator),l(),h("ngIf",e.part.description),l(),h("ngIf",e.notes),l(4),x("ngModel",e.quantity)}}function St(t,s){if(t&1&&(r(0,"div",15),v(1,Ot,16,5,"div",16),a()),t&2){let e=u();l(),h("ngForOf",e.children)}}function Et(t,s){if(t&1&&(r(0,"option",52),d(1),a()),t&2){let e=s.$implicit;h("value",e.id),l(),Ee(" ",e.part_number,"",e.description?" - "+e.description:""," ")}}function Nt(t,s){if(t&1){let e=k();r(0,"div",31)(1,"div",32)(2,"div",33)(3,"div",34)(4,"h5",35),d(5,"Add Part to BOM"),a(),r(6,"button",36),y("click",function(){_(e);let i=u();return f(i.showAddDialog=!1)}),a()(),r(7,"div",37)(8,"div",38)(9,"label",39),d(10,"Part *"),a(),r(11,"select",40),B("ngModelChange",function(i){_(e);let o=u();return F(o.newChild.childId,i)||(o.newChild.childId=i),f(i)}),r(12,"option",41),d(13,"Select a part"),a(),v(14,Et,2,3,"option",42),a()(),r(15,"div",43)(16,"div",44)(17,"label",39),d(18,"Quantity *"),a(),r(19,"input",45),B("ngModelChange",function(i){_(e);let o=u();return F(o.newChild.quantity,i)||(o.newChild.quantity=i),f(i)}),a()(),r(20,"div",44)(21,"label",39),d(22,"Reference Designator"),a(),r(23,"input",46),B("ngModelChange",function(i){_(e);let o=u();return F(o.newChild.referenceDesignator,i)||(o.newChild.referenceDesignator=i),f(i)}),a()()(),r(24,"div",47)(25,"label",39),d(26,"Notes"),a(),r(27,"input",48),B("ngModelChange",function(i){_(e);let o=u();return F(o.newChild.notes,i)||(o.newChild.notes=i),f(i)}),a()()(),r(28,"div",49)(29,"button",50),y("click",function(){_(e);let i=u();return f(i.showAddDialog=!1)}),d(30,"Cancel"),a(),r(31,"button",51),y("click",function(){_(e);let i=u();return f(i.addChild())}),d(32," Add Part "),a()()()()()}if(t&2){let e=u();l(11),x("ngModel",e.newChild.childId),l(3),h("ngForOf",e.availableParts),l(5),x("ngModel",e.newChild.quantity),l(4),x("ngModel",e.newChild.referenceDesignator),l(4),x("ngModel",e.newChild.notes),l(4),h("disabled",!e.newChild.childId)}}function Rt(t,s){if(t&1){let e=k();r(0,"div",31)(1,"div",32)(2,"div",33)(3,"div",53)(4,"h5",54),C(5,"i",55),d(6,"Circular Reference Warning "),a(),r(7,"button",36),y("click",function(){_(e);let i=u();return f(i.showCircularWarning=!1)}),a()(),r(8,"div",37)(9,"p"),d(10),a(),r(11,"p",29),d(12," Do you want to proceed anyway? This may cause issues with BOM explosion and inventory tracking. "),a()(),r(13,"div",49)(14,"button",50),y("click",function(){_(e);let i=u();return f(i.showCircularWarning=!1)}),d(15,"Cancel"),a(),r(16,"button",56),y("click",function(){_(e);let i=u();return f(i.confirmCircular())}),d(17,"Add Anyway"),a()()()()()}if(t&2){let e=u();l(10),$(e.circularWarningMessage)}}var bn=(()=>{class t{constructor(e,n){this.partsService=e,this.relationshipsService=n,this.partId="",this.update=new W,this.children=[],this.availableParts=[],this.loading=!0,this.showAddDialog=!1,this.showCircularWarning=!1,this.circularWarningMessage="",this.pendingChildId=null,this.newChild={childId:"",quantity:1,referenceDesignator:"",notes:""}}ngOnInit(){return M(this,null,function*(){yield this.loadPart(),yield this.loadAvailableParts()})}loadPart(){return M(this,null,function*(){this.loading=!0;let e=yield this.partsService.getPartWithRelationships(this.partId);e&&e.children&&(this.children=e.children.sort((n,i)=>n.sort_order-i.sort_order)),this.loading=!1})}loadAvailableParts(){return M(this,null,function*(){this.partsService.parts$.subscribe(e=>{this.availableParts=e.filter(n=>n.id!==this.partId)})})}addChild(){return M(this,null,function*(){if(!this.newChild.childId)return;let e=yield this.relationshipsService.checkCircularReference(this.partId,this.newChild.childId);if(e.would_cycle){this.circularWarningMessage=e.message,this.pendingChildId=this.newChild.childId,this.showCircularWarning=!0;return}yield this.createRelationship(!1)})}confirmCircular(){return M(this,null,function*(){yield this.createRelationship(!0),this.showCircularWarning=!1,this.pendingChildId=null})}createRelationship(e){return M(this,null,function*(){try{yield this.relationshipsService.createRelationship(this.partId,this.newChild.childId,this.newChild.quantity,{referenceDesignator:this.newChild.referenceDesignator||void 0,notes:this.newChild.notes||void 0,skipCircularCheck:e}),this.newChild={childId:"",quantity:1,referenceDesignator:"",notes:""},this.showAddDialog=!1,yield this.loadPart(),this.update.emit()}catch(n){console.error("Error creating relationship:",n)}})}updateQuantity(e,n){return M(this,null,function*(){yield this.relationshipsService.updateRelationship(e,{quantity:n}),yield this.loadPart(),this.update.emit()})}deleteChild(e){return M(this,null,function*(){confirm("Are you sure you want to remove this part from the BOM?")&&(yield this.relationshipsService.deleteRelationship(e),yield this.loadPart(),this.update.emit())})}static{this.\u0275fac=function(n){return new(n||t)(U(Ve),U(Ge))}}static{this.\u0275cmp=E({type:t,selectors:[["app-bom-editor"]],inputs:{partId:"partId"},outputs:{update:"update"},standalone:!0,features:[A],decls:13,vars:6,consts:[[1,"card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"bi","bi-plus-lg","me-1"],[1,"card-body"],["class","text-center py-4",4,"ngIf"],["class","text-center py-4 text-muted",4,"ngIf"],["class","list-group",4,"ngIf"],["class","modal d-block","tabindex","-1","style","background: rgba(0,0,0,0.5);",4,"ngIf"],[1,"text-center","py-4"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"visually-hidden"],[1,"text-center","py-4","text-muted"],[1,"btn","btn-sm","btn-outline-primary","mt-2",3,"click"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"d-flex","align-items-center","gap-3"],[1,"bi","bi-grip-vertical","text-muted"],[1,"flex-grow-1"],[1,"d-flex","align-items-center","gap-2"],[1,"font-monospace","fw-medium"],["class","text-muted small",4,"ngIf"],["class","small text-muted",4,"ngIf"],[1,"small","text-muted","mb-0"],["type","number","min","1",1,"form-control","form-control-sm",2,"width","80px",3,"ngModelChange","change","ngModel"],[1,"btn","btn-sm","btn-ghost-danger",3,"click"],[1,"bi","bi-trash"],[1,"text-muted","small"],[1,"small","text-muted"],["tabindex","-1",1,"modal","d-block",2,"background","rgba(0,0,0,0.5)"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"form-label"],[1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"row"],[1,"col-6"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., R1, C2",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3"],["type","text","placeholder","Optional notes",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[3,"value"],[1,"modal-header","bg-warning","bg-opacity-10"],[1,"modal-title","text-warning"],[1,"bi","bi-exclamation-triangle","me-2"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(n,i){n&1&&(r(0,"div",0)(1,"div",1)(2,"h6",2),d(3),a(),r(4,"button",3),y("click",function(){return i.showAddDialog=!0}),C(5,"i",4),d(6," Add Part "),a()(),r(7,"div",5),v(8,wt,4,0,"div",6)(9,Dt,5,0,"div",7)(10,St,2,1,"div",8),a()(),v(11,Nt,33,6,"div",9)(12,Rt,18,1,"div",9)),n&2&&(l(3),R("Bill of Materials (",i.children.length,")"),l(5),h("ngIf",i.loading),l(),h("ngIf",!i.loading&&i.children.length===0),l(),h("ngIf",!i.loading&&i.children.length>0),l(),h("ngIf",i.showAddDialog),l(),h("ngIf",i.showCircularWarning))},dependencies:[Y,Re,q,He,Fe,Be,Ae,ke,xe,Ie,Le,Pe],styles:[".min-w-0[_ngcontent-%COMP%]{min-width:0}.btn-ghost-danger[_ngcontent-%COMP%]{color:var(--bs-danger);background-color:transparent;border:none}.btn-ghost-danger[_ngcontent-%COMP%]:hover{background-color:rgba(var(--bs-danger-rgb),.1)}"]})}}return t})();export{It as a,X as b,on as c,bn as d};
