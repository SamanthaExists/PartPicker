import{a as j,b as ze}from"./chunk-SJCJM33I.js";import{b as ie,c as ne,f as se,h as $e,i as oe,j as ae,k as re,m as je,n as le}from"./chunk-ACCF75FY.js";import{$a as g,$b as $,Ca as r,D as J,Da as k,Fa as Ae,G as Ne,Jb as We,Ka as X,N as Ie,O as T,Ob as ee,P as Re,Q as _e,Sa as h,T as G,Ta as ke,Tb as te,Ua as u,W as Pe,Wa as W,Xa as H,Z as v,Za as o,_a as s,ab as me,ac as F,bb as be,c as Se,ca as N,cb as M,db as m,dc as B,eb as d,f as R,fb as Fe,gb as Be,h as Oe,ha as fe,ib as Le,j as he,jb as He,ka as _,kb as Ve,la as f,mb as c,n as pe,nb as w,ob as b,pa as Z,pb as Ge,ra as ge,rb as S,sa as q,sb as O,tb as E,u as A,v as Ee,vb as I,w as Q,x as xe,y as Y}from"./chunk-2TFJQIGG.js";import{a as ue,b as Me,e as y}from"./chunk-DVOCWXDE.js";function tt(t,a){if(t&1&&g(0,"i"),t&2){let e=d(2);H(e.iconClass+" me-1")}}function it(t,a){if(t&1&&(o(0,"span"),h(1,tt,1,2,"i",1),c(2),s()),t&2){let e=d();H(e.badgeClass),r(),u("ngIf",e.showIcon),r(),b(" ",e.label," ")}}function nt(t,a){t&1&&g(0,"i",6)}function st(t,a){if(t&1&&(o(0,"span",4),h(1,nt,1,0,"i",5),c(2," Assembly "),s()),t&2){let e=d();r(),u("ngIf",e.showIcon)}}function ot(t,a){t&1&&g(0,"i",9)}function at(t,a){if(t&1&&(o(0,"span",7),h(1,ot,1,0,"i",8),c(2," Modified "),s()),t&2){let e=d();r(),u("ngIf",e.showIcon)}}var Ue=(()=>{class t{constructor(){this.classification=null,this.showIcon=!0,this.size="sm",this.isAssembly=!1,this.isModified=!1,this.config={purchased:{label:"Purchased",icon:"bi-box-seam",class:"badge bg-primary"},manufactured:{label:"Manufactured",icon:"bi-wrench",class:"badge bg-warning text-dark"}}}get badgeClass(){return this.classification?this.config[this.classification].class:""}get iconClass(){return this.classification?`bi ${this.config[this.classification].icon}`:""}get label(){return this.classification?this.config[this.classification].label:""}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=N({type:t,selectors:[["app-classification-badge"]],inputs:{classification:"classification",showIcon:"showIcon",size:"size",isAssembly:"isAssembly",isModified:"isModified"},standalone:!0,features:[I],decls:4,vars:3,consts:[[1,"d-flex","gap-2","flex-wrap"],[3,"class",4,"ngIf"],["class","badge bg-secondary",4,"ngIf"],["class","badge bg-info text-dark",4,"ngIf"],[1,"badge","bg-secondary"],["class","bi bi-boxes me-1",4,"ngIf"],[1,"bi","bi-boxes","me-1"],[1,"badge","bg-info","text-dark"],["class","bi bi-pencil me-1",4,"ngIf"],[1,"bi","bi-pencil","me-1"]],template:function(n,i){n&1&&(o(0,"div",0),h(1,it,3,4,"span",1)(2,st,3,1,"span",2)(3,at,3,1,"span",3),s()),n&2&&(r(),u("ngIf",i.classification),r(),u("ngIf",i.isAssembly),r(),u("ngIf",i.isModified))},dependencies:[B,F],styles:[".badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .5rem;border-radius:.25rem;font-weight:500}"]})}}return t})();var lt=["*"];var ct=["dialog"];var Ke={animation:!0,transitionTimerDelayMs:5},dt=(()=>{class t{constructor(){this.animation=Ke.animation}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ut(t){let{transitionDelay:a,transitionDuration:e}=window.getComputedStyle(t),n=parseFloat(a),i=parseFloat(e);return(n+i)*1e3}function Qe(t){return typeof t=="string"}function ye(t){return t!=null}function ht(t){return t&&t.then}function Je(t){return(t||document.body).getBoundingClientRect()}function pt(t){return a=>new Se(e=>{let n=p=>t.run(()=>e.next(p)),i=p=>t.run(()=>e.error(p)),l=()=>t.run(()=>e.complete());return a.subscribe({next:n,error:i,complete:l})})}var _t=()=>{},{transitionTimerDelayMs:ft}=Ke,de=new Map,V=(t,a,e,n)=>{let i=n.context||{},l=de.get(a);if(l)switch(n.runningTransition){case"continue":return Oe;case"stop":t.run(()=>l.transition$.complete()),i=Object.assign(l.context,i),de.delete(a)}let p=e(a,n.animation,i)||_t;if(!n.animation||window.getComputedStyle(a).transitionProperty==="none")return t.run(()=>p()),he(void 0).pipe(pt(t));let D=new R,C=new R,x=D.pipe(Ne(!0));de.set(a,{transition$:D,complete:()=>{C.next(),C.complete()},context:i});let K=ut(a);return t.runOutsideAngular(()=>{let P=A(a,"transitionend").pipe(T(x),Q(({target:et})=>et===a)),L=Ee(K+ft).pipe(T(x));xe(L,P,C).pipe(T(x)).subscribe(()=>{de.delete(a),t.run(()=>{p(),D.next(),D.complete()})})}),D.asObservable()};var Ce=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}(Ce||{});var Fn=(()=>{let t=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,a=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(t()||a()):!1})();var gt=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function qe(t){let a=Array.from(t.querySelectorAll(gt)).filter(e=>e.tabIndex!==-1);return[a[0],a[a.length-1]]}var mt=(t,a,e,n=!1)=>{t.runOutsideAngular(()=>{let i=A(a,"focusin").pipe(T(e),pe(l=>l.target));A(a,"keydown").pipe(T(e),Q(l=>l.which===Ce.Tab),_e(i)).subscribe(([l,p])=>{let[D,C]=qe(a);(p===D||p===a)&&l.shiftKey&&(C.focus(),l.preventDefault()),p===C&&!l.shiftKey&&(D.focus(),l.preventDefault())}),n&&A(a,"click").pipe(T(e),_e(i),pe(l=>l[1])).subscribe(l=>l.focus())})};var Bn=new Date(1882,10,12),Ln=new Date(2174,10,25);var Hn=1e3*60*60*24;var Te=1080,bt=24*Te,vt=12*Te+793,Vn=29*bt+vt,Gn=11*Te+204;var yt=(()=>{class t{constructor(){this._ngbConfig=v(dt),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(e){this._animation=e}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),z=class{constructor(a,e,n){this.nodes=a,this.viewRef=e,this.componentRef=n}};var wt=(()=>{class t{constructor(){this._document=v(te)}hide(){let e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),n=this._document.body,i=n.style,{overflow:l,paddingRight:p}=i;if(e>0){let D=parseFloat(window.getComputedStyle(n).paddingRight);i.paddingRight=`${D+e}px`}return i.overflow="hidden",()=>{e>0&&(i.paddingRight=p),i.overflow=l}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Dt=(()=>{class t{constructor(){this._nativeElement=v(ge).nativeElement,this._zone=v(X)}ngOnInit(){this._zone.onStable.asObservable().pipe(J(1)).subscribe(()=>{V(this._zone,this._nativeElement,(e,n)=>{n&&Je(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return V(this._zone,this._nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=N({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(n,i){n&2&&(H("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),W("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[I],decls:0,vars:0,template:function(n,i){},encapsulation:2})}}return t})(),U=class{update(a){}close(a){}dismiss(a){}},Ct=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],Tt=["animation","backdropClass"],we=class{_applyWindowOptions(a,e){Ct.forEach(n=>{ye(e[n])&&(a[n]=e[n])})}_applyBackdropOptions(a,e){Tt.forEach(n=>{ye(e[n])&&(a[n]=e[n])})}update(a){this._applyWindowOptions(this._windowCmptRef.instance,a),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,a)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(T(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(T(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(a,e,n,i){this._windowCmptRef=a,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=i,this._closed=new R,this._dismissed=new R,this._hidden=new R,a.instance.dismissEvent.subscribe(l=>{this.dismiss(l)}),this.result=new Promise((l,p)=>{this._resolve=l,this._reject=p}),this.result.then(null,()=>{})}close(a){this._windowCmptRef&&(this._closed.next(a),this._resolve(a),this._removeModalElements())}_dismiss(a){this._dismissed.next(a),this._reject(a),this._removeModalElements()}dismiss(a){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(a);else{let e=this._beforeDismiss();ht(e)?e.then(n=>{n!==!1&&this._dismiss(a)},()=>{}):e!==!1&&this._dismiss(a)}}_removeModalElements(){let a=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():he(void 0);a.subscribe(()=>{let{nativeElement:n}=this._windowCmptRef.location;n.parentNode.removeChild(n),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:n}=this._backdropCmptRef.location;n.parentNode.removeChild(n),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Y(a,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},De=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}(De||{}),Mt=(()=>{class t{constructor(){this._document=v(te),this._elRef=v(ge),this._zone=v(X),this._closed$=new R,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new q,this.shown=new R,this.hidden=new R}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":Qe(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(J(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:e}=this._elRef,n={animation:this.animation,runningTransition:"stop"},i=V(this._zone,e,()=>e.classList.remove("show"),n),l=V(this._zone,this._dialogEl.nativeElement,()=>{},n),p=Y(i,l);return p.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),p}_show(){let e={animation:this.animation,runningTransition:"continue"},n=V(this._zone,this._elRef.nativeElement,(l,p)=>{p&&Je(l),l.classList.add("show")},e),i=V(this._zone,this._dialogEl.nativeElement,()=>{},e);Y(n,i).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{A(e,"keydown").pipe(T(this._closed$),Q(i=>i.which===Ce.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(De.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let n=!1;A(this._dialogEl.nativeElement,"mousedown").pipe(T(this._closed$),Re(()=>n=!1),Ie(()=>A(e,"mouseup").pipe(T(this._closed$),J(1))),Q(({target:i})=>e===i)).subscribe(()=>{n=!0}),A(e,"click").pipe(T(this._closed$)).subscribe(({target:i})=>{e===i&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!n&&this._zone.run(()=>this.dismiss(De.BACKDROP_CLICK))),n=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){let n=e.querySelector("[ngbAutofocus]"),i=qe(e)[0];(n||i||e).focus()}}_restoreFocus(){let e=this._document.body,n=this._elWithFocus,i;n&&n.focus&&e.contains(n)?i=n:i=e,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&V(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=N({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(n,i){if(n&1&&Le(ct,7),n&2){let l;He(l=Ve())&&(i._dialogEl=l.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(n,i){n&2&&(ke("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),H("modal d-block"+(i.windowClass?" "+i.windowClass:"")),W("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[I],ngContentSelectors:lt,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(n,i){n&1&&(Fe(),o(0,"div",1,0)(2,"div",2),Be(3),s()()),n&2&&H("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2})}}return t})(),St=(()=>{class t{constructor(){this._applicationRef=v(We),this._injector=v(Z),this._environmentInjector=v(fe),this._document=v(te),this._scrollBar=v(wt),this._activeWindowCmptHasChanged=new R,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new q;let e=v(X);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let n=this._windowCmpts[this._windowCmpts.length-1];mt(e,n.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(n.location.nativeElement)}})}_restoreScrollBar(){let e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,n,i){let l=i.container instanceof HTMLElement?i.container:ye(i.container)?this._document.querySelector(i.container):this._document.body;if(!l)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let p=new U;e=i.injector||e;let D=e.get(fe,null)||this._environmentInjector,C=this._getContentRef(e,D,n,p,i),x=i.backdrop!==!1?this._attachBackdrop(l):void 0,K=this._attachWindowComponent(l,C.nodes),P=new we(K,C,x,i.beforeDismiss);return this._registerModalRef(P),this._registerWindowCmpt(K),P.hidden.pipe(J(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),p.close=L=>{P.close(L)},p.dismiss=L=>{P.dismiss(L)},p.update=L=>{P.update(L)},P.update(i),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),x&&x.instance&&x.changeDetectorRef.detectChanges(),K.changeDetectorRef.detectChanges(),P}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(n=>n.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e){let n=ee(Dt,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(e,n){let i=ee(Mt,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:n});return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_getContentRef(e,n,i,l,p){return i?i instanceof Ae?this._createFromTemplateRef(i,l):Qe(i)?this._createFromString(i):this._createFromComponent(e,n,i,l,p):new z([])}_createFromTemplateRef(e,n){let i={$implicit:n,close(p){n.close(p)},dismiss(p){n.dismiss(p)}},l=e.createEmbeddedView(i);return this._applicationRef.attachView(l),new z([l.rootNodes],l)}_createFromString(e){let n=this._document.createTextNode(`${e}`);return new z([[n]])}_createFromComponent(e,n,i,l,p){let D=Z.create({providers:[{provide:U,useValue:l}],parent:e}),C=ee(i,{environmentInjector:n,elementInjector:D}),x=C.location.nativeElement;return p.scrollable&&x.classList.add("component-host-scrollable"),this._applicationRef.attachView(C.hostView),new z([[x]],C.hostView,C)}_setAriaHidden(e){let n=e.parentElement;n&&e!==this._document.body&&(Array.from(n.children).forEach(i=>{i!==e&&i.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(n))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,n)=>{e?n.setAttribute("aria-hidden",e):n.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){let n=()=>{let i=this._modalRefs.indexOf(e);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(n,n)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{let n=this._windowCmpts.indexOf(e);n>-1&&(this._windowCmpts.splice(n,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Wn=(()=>{class t{constructor(){this._injector=v(Z),this._modalStack=v(St),this._config=v(yt)}open(e,n={}){let i=ue(Me(ue({},this._config),{animation:this._config.animation}),n);return this._modalStack.open(this._injector,e,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var $n=new Pe("live announcer delay",{providedIn:"root",factory:()=>100});function xt(t,a){t&1&&(o(0,"div",10)(1,"div",11)(2,"span",12),c(3,"Loading..."),s()()())}function Nt(t,a){if(t&1){let e=M();o(0,"div",13)(1,"p"),c(2,"No parts in this assembly yet."),s(),o(3,"button",14),m("click",function(){_(e);let i=d();return f(i.showAddDialog=!0)}),c(4," Add First Part "),s()()}}function It(t,a){if(t&1&&(o(0,"span",29),c(1),s()),t&2){let e=d().$implicit;r(),b("(",e.reference_designator,")")}}function Rt(t,a){if(t&1&&(o(0,"div",30),c(1),s()),t&2){let e=d().$implicit;r(),w(e.part.description)}}function Pt(t,a){if(t&1&&(o(0,"div",30),c(1),s()),t&2){let e=d().$implicit;r(),b("Note: ",e.notes,"")}}function At(t,a){if(t&1){let e=M();o(0,"div",17)(1,"div",18),g(2,"i",19),o(3,"div",20)(4,"div",21)(5,"span",22),c(6),s(),h(7,It,2,1,"span",23),s(),h(8,Rt,2,1,"div",24)(9,Pt,2,1,"div",24),s(),o(10,"div",21)(11,"label",25),c(12,"Qty:"),s(),o(13,"input",26),E("ngModelChange",function(i){let l=_(e).$implicit;return O(l.quantity,i)||(l.quantity=i),f(i)}),m("change",function(){let i=_(e).$implicit,l=d(2);return f(l.updateQuantity(i.id,i.quantity))}),s(),o(14,"button",27),m("click",function(){let i=_(e).$implicit,l=d(2);return f(l.deleteChild(i.id))}),g(15,"i",28),s()()()()}if(t&2){let e=a.$implicit;r(6),w(e.part.part_number),r(),u("ngIf",e.reference_designator),r(),u("ngIf",e.part.description),r(),u("ngIf",e.notes),r(4),S("ngModel",e.quantity)}}function kt(t,a){if(t&1&&(o(0,"div",15),h(1,At,16,5,"div",16),s()),t&2){let e=d();r(),u("ngForOf",e.children)}}function Ft(t,a){if(t&1&&(o(0,"option",52),c(1),s()),t&2){let e=a.$implicit;u("value",e.id),r(),Ge(" ",e.part_number,"",e.description?" - "+e.description:""," ")}}function Bt(t,a){if(t&1){let e=M();o(0,"div",31)(1,"div",32)(2,"div",33)(3,"div",34)(4,"h5",35),c(5,"Add Part to BOM"),s(),o(6,"button",36),m("click",function(){_(e);let i=d();return f(i.showAddDialog=!1)}),s()(),o(7,"div",37)(8,"div",38)(9,"label",39),c(10,"Part *"),s(),o(11,"select",40),E("ngModelChange",function(i){_(e);let l=d();return O(l.newChild.childId,i)||(l.newChild.childId=i),f(i)}),o(12,"option",41),c(13,"Select a part"),s(),h(14,Ft,2,3,"option",42),s()(),o(15,"div",43)(16,"div",44)(17,"label",39),c(18,"Quantity *"),s(),o(19,"input",45),E("ngModelChange",function(i){_(e);let l=d();return O(l.newChild.quantity,i)||(l.newChild.quantity=i),f(i)}),s()(),o(20,"div",44)(21,"label",39),c(22,"Reference Designator"),s(),o(23,"input",46),E("ngModelChange",function(i){_(e);let l=d();return O(l.newChild.referenceDesignator,i)||(l.newChild.referenceDesignator=i),f(i)}),s()()(),o(24,"div",47)(25,"label",39),c(26,"Notes"),s(),o(27,"input",48),E("ngModelChange",function(i){_(e);let l=d();return O(l.newChild.notes,i)||(l.newChild.notes=i),f(i)}),s()()(),o(28,"div",49)(29,"button",50),m("click",function(){_(e);let i=d();return f(i.showAddDialog=!1)}),c(30,"Cancel"),s(),o(31,"button",51),m("click",function(){_(e);let i=d();return f(i.addChild())}),c(32," Add Part "),s()()()()()}if(t&2){let e=d();r(11),S("ngModel",e.newChild.childId),r(3),u("ngForOf",e.availableParts),r(5),S("ngModel",e.newChild.quantity),r(4),S("ngModel",e.newChild.referenceDesignator),r(4),S("ngModel",e.newChild.notes),r(4),u("disabled",!e.newChild.childId)}}function Lt(t,a){if(t&1){let e=M();o(0,"div",31)(1,"div",32)(2,"div",33)(3,"div",53)(4,"h5",54),g(5,"i",55),c(6,"Circular Reference Warning "),s(),o(7,"button",36),m("click",function(){_(e);let i=d();return f(i.showCircularWarning=!1)}),s()(),o(8,"div",37)(9,"p"),c(10),s(),o(11,"p",29),c(12," Do you want to proceed anyway? This may cause issues with BOM explosion and inventory tracking. "),s()(),o(13,"div",49)(14,"button",50),m("click",function(){_(e);let i=d();return f(i.showCircularWarning=!1)}),c(15,"Cancel"),s(),o(16,"button",56),m("click",function(){_(e);let i=d();return f(i.confirmCircular())}),c(17,"Add Anyway"),s()()()()()}if(t&2){let e=d();r(10),w(e.circularWarningMessage)}}var Ze=(()=>{class t{constructor(e,n){this.partsService=e,this.relationshipsService=n,this.partId="",this.update=new q,this.children=[],this.availableParts=[],this.loading=!0,this.showAddDialog=!1,this.showCircularWarning=!1,this.circularWarningMessage="",this.pendingChildId=null,this.newChild={childId:"",quantity:1,referenceDesignator:"",notes:""}}ngOnInit(){return y(this,null,function*(){yield this.loadPart(),yield this.loadAvailableParts()})}loadPart(){return y(this,null,function*(){this.loading=!0;let e=yield this.partsService.getPartWithRelationships(this.partId);e&&e.children&&(this.children=e.children.sort((n,i)=>n.sort_order-i.sort_order)),this.loading=!1})}loadAvailableParts(){return y(this,null,function*(){this.partsService.parts$.subscribe(e=>{this.availableParts=e.filter(n=>n.id!==this.partId)})})}addChild(){return y(this,null,function*(){if(!this.newChild.childId)return;let e=yield this.relationshipsService.checkCircularReference(this.partId,this.newChild.childId);if(e.would_cycle){this.circularWarningMessage=e.message,this.pendingChildId=this.newChild.childId,this.showCircularWarning=!0;return}yield this.createRelationship(!1)})}confirmCircular(){return y(this,null,function*(){yield this.createRelationship(!0),this.showCircularWarning=!1,this.pendingChildId=null})}createRelationship(e){return y(this,null,function*(){try{yield this.relationshipsService.createRelationship(this.partId,this.newChild.childId,this.newChild.quantity,{referenceDesignator:this.newChild.referenceDesignator||void 0,notes:this.newChild.notes||void 0,skipCircularCheck:e}),this.newChild={childId:"",quantity:1,referenceDesignator:"",notes:""},this.showAddDialog=!1,yield this.loadPart(),this.update.emit()}catch(n){console.error("Error creating relationship:",n)}})}updateQuantity(e,n){return y(this,null,function*(){yield this.relationshipsService.updateRelationship(e,{quantity:n}),yield this.loadPart(),this.update.emit()})}deleteChild(e){return y(this,null,function*(){confirm("Are you sure you want to remove this part from the BOM?")&&(yield this.relationshipsService.deleteRelationship(e),yield this.loadPart(),this.update.emit())})}static{this.\u0275fac=function(n){return new(n||t)(k(j),k(ze))}}static{this.\u0275cmp=N({type:t,selectors:[["app-bom-editor"]],inputs:{partId:"partId"},outputs:{update:"update"},standalone:!0,features:[I],decls:13,vars:6,consts:[[1,"card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"bi","bi-plus-lg","me-1"],[1,"card-body"],["class","text-center py-4",4,"ngIf"],["class","text-center py-4 text-muted",4,"ngIf"],["class","list-group",4,"ngIf"],["class","modal d-block","tabindex","-1","style","background: rgba(0,0,0,0.5);",4,"ngIf"],[1,"text-center","py-4"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"visually-hidden"],[1,"text-center","py-4","text-muted"],[1,"btn","btn-sm","btn-outline-primary","mt-2",3,"click"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"d-flex","align-items-center","gap-3"],[1,"bi","bi-grip-vertical","text-muted"],[1,"flex-grow-1"],[1,"d-flex","align-items-center","gap-2"],[1,"font-monospace","fw-medium"],["class","text-muted small",4,"ngIf"],["class","small text-muted",4,"ngIf"],[1,"small","text-muted","mb-0"],["type","number","min","1",1,"form-control","form-control-sm",2,"width","80px",3,"ngModelChange","change","ngModel"],[1,"btn","btn-sm","btn-ghost-danger",3,"click"],[1,"bi","bi-trash"],[1,"text-muted","small"],[1,"small","text-muted"],["tabindex","-1",1,"modal","d-block",2,"background","rgba(0,0,0,0.5)"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"form-label"],[1,"form-select",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"row"],[1,"col-6"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., R1, C2",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-3"],["type","text","placeholder","Optional notes",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[3,"value"],[1,"modal-header","bg-warning","bg-opacity-10"],[1,"modal-title","text-warning"],[1,"bi","bi-exclamation-triangle","me-2"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"div",1)(2,"h6",2),c(3),s(),o(4,"button",3),m("click",function(){return i.showAddDialog=!0}),g(5,"i",4),c(6," Add Part "),s()(),o(7,"div",5),h(8,xt,4,0,"div",6)(9,Nt,5,0,"div",7)(10,kt,2,1,"div",8),s()(),h(11,Bt,33,6,"div",9)(12,Lt,18,1,"div",9)),n&2&&(r(3),b("Bill of Materials (",i.children.length,")"),r(5),u("ngIf",i.loading),r(),u("ngIf",!i.loading&&i.children.length===0),r(),u("ngIf",!i.loading&&i.children.length>0),r(),u("ngIf",i.showAddDialog),r(),u("ngIf",i.showCircularWarning))},dependencies:[B,$,F,le,ae,re,ie,$e,oe,ne,je,se],styles:[".min-w-0[_ngcontent-%COMP%]{min-width:0}.btn-ghost-danger[_ngcontent-%COMP%]{color:var(--bs-danger);background-color:transparent;border:none}.btn-ghost-danger[_ngcontent-%COMP%]:hover{background-color:rgba(var(--bs-danger-rgb),.1)}"]})}}return t})();function Ht(t,a){t&1&&(o(0,"div",2)(1,"div",3)(2,"span",4),c(3,"Loading..."),s()()())}function Vt(t,a){t&1&&(o(0,"span",20),c(1,"Original"),s())}function Gt(t,a){if(t&1&&(o(0,"span",21),c(1),s()),t&2){let e=d().$implicit;r(),b("v",e.level,"")}}function Wt(t,a){t&1&&g(0,"i",22)}function $t(t,a){if(t&1&&(me(0),o(1,"div",13)(2,"div",14),g(3,"i",15),o(4,"div")(5,"div",16),c(6),s(),h(7,Vt,2,0,"span",17)(8,Gt,2,1,"span",18),s()()(),h(9,Wt,1,0,"i",19),be()),t&2){let e=a.$implicit,n=a.index,i=d(2);r(),W("ring-primary",e.part.id===i.partId),r(5),w(e.part.part_number),r(),u("ngIf",e.level===0),r(),u("ngIf",e.level>0),r(),u("ngIf",n<i.chain.length-1)}}function jt(t,a){t&1&&(o(0,"span",35),c(1,"Original"),s())}function zt(t,a){if(t&1&&(o(0,"span",36),c(1),s()),t&2){let e=d().$implicit;r(),b("Modified v",e.level,"")}}function Ut(t,a){t&1&&(o(0,"span",37),c(1,"Current"),s())}function Kt(t,a){if(t&1&&(o(0,"div",38),c(1),s()),t&2){let e=d().$implicit;r(),b(" ",e.part.description," ")}}function Qt(t,a){if(t&1&&(o(0,"div",39),c(1),s()),t&2){let e=d().$implicit;r(),b(" \u{1F4CD} ",e.part.default_location," ")}}function Jt(t,a){if(t&1&&(o(0,"div",40),c(1),s()),t&2){let e=d().$implicit;r(),b(" Note: ",e.part.notes," ")}}function qt(t,a){if(t&1&&(o(0,"div",23)(1,"div",24)(2,"div",25),g(3,"i",26),o(4,"div")(5,"div",27)(6,"span",28),c(7),s(),h(8,jt,2,0,"span",29)(9,zt,2,1,"span",30)(10,Ut,2,0,"span",31),s(),h(11,Kt,2,1,"div",32),s()(),h(12,Qt,2,1,"div",33),s(),h(13,Jt,2,1,"div",34),s()),t&2){let e=a.$implicit,n=d(2);W("bg-light",e.part.id===n.partId)("border-primary",e.part.id===n.partId),r(7),w(e.part.part_number),r(),u("ngIf",e.level===0),r(),u("ngIf",e.level>0),r(),u("ngIf",e.part.id===n.partId),r(),u("ngIf",e.part.description),r(),u("ngIf",e.part.default_location),r(),u("ngIf",e.part.notes)}}function Yt(t,a){if(t&1&&(o(0,"div",5)(1,"div",6)(2,"h5",7),c(3,"Modification History"),s()(),o(4,"div",8)(5,"div",9),h(6,$t,10,6,"ng-container",10),s(),o(7,"div",11),h(8,qt,14,11,"div",12),s()()()),t&2){let e=d();r(6),u("ngForOf",e.chain),r(2),u("ngForOf",e.chain)}}var Xe=(()=>{class t{constructor(e){this.partsService=e,this.partId="",this.chain=[],this.loading=!0}ngOnInit(){return y(this,null,function*(){this.partId&&(yield this.loadChain())})}loadChain(){return y(this,null,function*(){this.loading=!0,this.chain=yield this.partsService.getModificationChain(this.partId),this.loading=!1})}static{this.\u0275fac=function(n){return new(n||t)(k(j))}}static{this.\u0275cmp=N({type:t,selectors:[["app-modification-chain"]],inputs:{partId:"partId"},standalone:!0,features:[I],decls:2,vars:2,consts:[["class","text-center py-4",4,"ngIf"],["class","card",4,"ngIf"],[1,"text-center","py-4"],["role","status",1,"spinner-border","spinner-border-sm","text-primary"],[1,"visually-hidden"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"d-flex","align-items-center","gap-2","flex-wrap","mb-4"],[4,"ngFor","ngForOf"],[1,"list-group"],["class","list-group-item",3,"bg-light","border-primary",4,"ngFor","ngForOf"],[1,"border","rounded","p-2"],[1,"d-flex","align-items-center","gap-2"],[1,"bi","bi-box-seam","text-muted"],[1,"small","font-monospace","fw-medium"],["class","badge bg-primary mt-1",4,"ngIf"],["class","badge bg-info text-dark mt-1",4,"ngIf"],["class","bi bi-arrow-right text-muted",4,"ngIf"],[1,"badge","bg-primary","mt-1"],[1,"badge","bg-info","text-dark","mt-1"],[1,"bi","bi-arrow-right","text-muted"],[1,"list-group-item"],[1,"d-flex","justify-content-between","align-items-start"],[1,"d-flex","align-items-start","gap-2"],[1,"bi","bi-box-seam","text-muted","mt-1"],[1,"d-flex","align-items-center","gap-2","flex-wrap"],[1,"font-monospace","fw-medium"],["class","badge bg-primary",4,"ngIf"],["class","badge bg-info text-dark",4,"ngIf"],["class","badge bg-success",4,"ngIf"],["class","small text-muted mt-1",4,"ngIf"],["class","text-muted small",4,"ngIf"],["class","small text-muted mt-2 ps-4",4,"ngIf"],[1,"badge","bg-primary"],[1,"badge","bg-info","text-dark"],[1,"badge","bg-success"],[1,"small","text-muted","mt-1"],[1,"text-muted","small"],[1,"small","text-muted","mt-2","ps-4"]],template:function(n,i){n&1&&h(0,Ht,4,0,"div",0)(1,Yt,9,2,"div",1),n&2&&(u("ngIf",i.loading),r(),u("ngIf",!i.loading&&i.chain.length>1))},dependencies:[B,$,F],styles:[".ring-primary[_ngcontent-%COMP%]{box-shadow:0 0 0 2px var(--bs-primary)}"]})}}return t})();function Zt(t,a){t&1&&(o(0,"div",7)(1,"div",8)(2,"span",9),c(3,"Loading..."),s()()())}function Xt(t,a){if(t&1){let e=M();o(0,"button",21),m("click",function(){_(e);let i=d(3);return f(i.isEditing=!0)}),g(1,"i",22),c(2," Edit "),s()}}function ei(t,a){if(t&1){let e=M();o(0,"div",23)(1,"button",24),m("click",function(){_(e);let i=d(3);return f(i.cancel())}),g(2,"i",25),c(3," Cancel "),s(),o(4,"button",26),m("click",function(){_(e);let i=d(3);return f(i.save())}),g(5,"i",27),c(6," Save "),s()()}if(t&2){let e=d(3);r(4),u("disabled",!e.editForm.part_number.trim())}}function ti(t,a){if(t&1&&(o(0,"div",18),h(1,Xt,3,0,"button",19)(2,ei,7,1,"div",20),s()),t&2){let e=d(2);r(),u("ngIf",!e.isEditing),r(),u("ngIf",e.isEditing)}}function ii(t,a){if(t&1){let e=M();o(0,"div")(1,"div",28)(2,"div",29)(3,"label",30),c(4,"Part Number *"),s(),o(5,"input",31),E("ngModelChange",function(i){_(e);let l=d(2);return O(l.editForm.part_number,i)||(l.editForm.part_number=i),f(i)}),s()(),o(6,"div",29)(7,"label",30),c(8,"Classification"),s(),o(9,"select",32),E("ngModelChange",function(i){_(e);let l=d(2);return O(l.editForm.classification_type,i)||(l.editForm.classification_type=i),f(i)}),o(10,"option",33),c(11,"Select classification"),s(),o(12,"option",34),c(13,"Purchased"),s(),o(14,"option",35),c(15,"Manufactured"),s(),o(16,"option",36),c(17,"Assembly"),s(),o(18,"option",37),c(19,"Modified"),s()()(),o(20,"div",38)(21,"label",30),c(22,"Description"),s(),o(23,"input",31),E("ngModelChange",function(i){_(e);let l=d(2);return O(l.editForm.description,i)||(l.editForm.description=i),f(i)}),s()(),o(24,"div",38)(25,"label",30),c(26,"Default Location"),s(),o(27,"input",31),E("ngModelChange",function(i){_(e);let l=d(2);return O(l.editForm.default_location,i)||(l.editForm.default_location=i),f(i)}),s()(),o(28,"div",38)(29,"label",30),c(30,"Notes"),s(),o(31,"textarea",39),E("ngModelChange",function(i){_(e);let l=d(2);return O(l.editForm.notes,i)||(l.editForm.notes=i),f(i)}),s()()()()}if(t&2){let e=d(2);r(5),S("ngModel",e.editForm.part_number),r(4),S("ngModel",e.editForm.classification_type),r(14),S("ngModel",e.editForm.description),r(4),S("ngModel",e.editForm.default_location),r(4),S("ngModel",e.editForm.notes)}}function ni(t,a){if(t&1&&(o(0,"div",44)(1,"span",45),c(2,"Description: "),s(),o(3,"span"),c(4),s()()),t&2){let e=d(3);r(4),w(e.part.description)}}function si(t,a){if(t&1&&(o(0,"div",44)(1,"span",45),c(2,"Location: "),s(),o(3,"span",46),c(4),s()()),t&2){let e=d(3);r(4),b("\u{1F4CD} ",e.part.default_location,"")}}function oi(t,a){if(t&1&&(o(0,"div",44)(1,"span",45),c(2,"Notes: "),s(),o(3,"span"),c(4),s()()),t&2){let e=d(3);r(4),w(e.part.notes)}}function ai(t,a){if(t&1&&(o(0,"div")(1,"div",40)(2,"h4",41),c(3),s(),g(4,"app-classification-badge",42),s(),h(5,ni,5,1,"div",43)(6,si,5,1,"div",43)(7,oi,5,1,"div",43),s()),t&2){let e=d(2);r(3),w(e.part.part_number),r(),u("classification",e.part.classification_type),r(),u("ngIf",e.part.description),r(),u("ngIf",e.part.default_location),r(),u("ngIf",e.part.notes)}}function ri(t,a){if(t&1&&(o(0,"span",52),c(1),s()),t&2){let e=d(3);r(),b(" (",e.part.base_part.description,") ")}}function li(t,a){if(t&1&&(o(0,"div",11)(1,"div",12)(2,"h6",13),c(3,"Based On"),s()(),o(4,"div",14)(5,"div",47),g(6,"i",48),o(7,"span",49),c(8),s(),g(9,"i",50),o(10,"span",49),c(11),s(),h(12,ri,2,1,"span",51),s()()()),t&2){let e=d(2);r(8),w(e.part.base_part.part_number),r(3),w(e.part.part_number),r(),u("ngIf",e.part.base_part.description)}}function ci(t,a){if(t&1&&(o(0,"div"),g(1,"app-modification-chain",53),s()),t&2){let e=d(2);r(),u("partId",e.partId)}}function di(t,a){if(t&1){let e=M();o(0,"div",54)(1,"app-bom-editor",55),m("update",function(){_(e);let i=d(2);return f(i.loadPart())}),s()()}if(t&2){let e=d(2);r(),u("partId",e.partId)}}function ui(t,a){if(t&1&&(o(0,"div",64),c(1),s()),t&2){let e=d().$implicit;r(),b(" ",e.part.description," ")}}function hi(t,a){if(t&1&&(o(0,"span",65),c(1),s()),t&2){let e=d().$implicit;r(),b("(",e.reference_designator,")")}}function pi(t,a){if(t&1&&(o(0,"div",59)(1,"div",60)(2,"div",47),g(3,"i",48),o(4,"div")(5,"div",49),c(6),s(),h(7,ui,2,1,"div",61),s()(),o(8,"div",62),c(9),h(10,hi,2,1,"span",63),s()()()),t&2){let e=a.$implicit;r(6),w(e.part.part_number),r(),u("ngIf",e.part.description),r(2),b(" Qty: ",e.quantity," "),r(),u("ngIf",e.reference_designator)}}function _i(t,a){if(t&1&&(o(0,"div",56)(1,"div",12)(2,"h6",13),c(3),s()(),o(4,"div",14)(5,"div",57),h(6,pi,11,4,"div",58),s()()()),t&2){let e=d(2);r(3),b("Where Used (",e.part.used_in.length,")"),r(3),u("ngForOf",e.part.used_in)}}function fi(t,a){if(t&1&&(o(0,"div"),h(1,ti,3,2,"div",10),o(2,"div",11)(3,"div",12)(4,"h6",13),c(5,"Part Information"),s()(),o(6,"div",14),h(7,ii,32,5,"div",5)(8,ai,8,5,"div",5),s()(),h(9,li,13,3,"div",15)(10,ci,2,1,"div",5)(11,di,2,1,"div",16)(12,_i,7,2,"div",17),s()),t&2){let e=d();r(),u("ngIf",!e.isNew),r(6),u("ngIf",e.isEditing),r(),u("ngIf",!e.isEditing&&e.part),r(),u("ngIf",!e.isNew&&e.isModified&&(e.part==null?null:e.part.base_part)),r(),u("ngIf",!e.isNew&&(e.isModified||(e.part==null?null:e.part.modifications)&&e.part.modifications.length>0)),r(),u("ngIf",!e.isNew&&e.isAssembly),r(),u("ngIf",!e.isNew&&(e.part==null?null:e.part.used_in)&&e.part.used_in.length>0)}}function gi(t,a){if(t&1){let e=M();o(0,"div",66)(1,"button",67),m("click",function(){_(e);let i=d();return f(i.activeModal.dismiss())}),c(2,"Cancel"),s(),o(3,"button",68),m("click",function(){_(e);let i=d();return f(i.save())}),c(4," Create Part "),s()()}if(t&2){let e=d();r(3),u("disabled",!e.editForm.part_number.trim())}}var ds=(()=>{class t{constructor(e,n){this.activeModal=e,this.partsService=n,this.isNew=!1,this.part=null,this.loading=!0,this.isEditing=!1,this.editForm={part_number:"",description:"",classification_type:"",default_location:"",notes:""}}ngOnInit(){return y(this,null,function*(){this.isNew?(this.isEditing=!0,this.presetClassification&&(this.editForm.classification_type=this.presetClassification),this.loading=!1):this.partId&&(yield this.loadPart())})}loadPart(){return y(this,null,function*(){this.loading=!0,this.partId&&(this.part=yield this.partsService.getPartWithRelationships(this.partId),this.part&&(this.editForm={part_number:this.part.part_number,description:this.part.description||"",classification_type:this.part.classification_type||"",default_location:this.part.default_location||"",notes:this.part.notes||""})),this.loading=!1})}save(){return y(this,null,function*(){this.isNew?(yield this.partsService.createPart({part_number:this.editForm.part_number.trim(),description:this.editForm.description.trim()||null,classification_type:this.editForm.classification_type||null,is_assembly:!1,is_modified:!1,default_location:this.editForm.default_location.trim()||null,base_part_id:null,notes:this.editForm.notes.trim()||null}),this.activeModal.close()):this.partId&&(yield this.partsService.updatePart(this.partId,{part_number:this.editForm.part_number.trim(),description:this.editForm.description.trim()||null,classification_type:this.editForm.classification_type||null,default_location:this.editForm.default_location.trim()||null,notes:this.editForm.notes.trim()||null}),yield this.loadPart(),this.isEditing=!1)})}cancel(){this.isNew?this.activeModal.dismiss():(this.isEditing=!1,this.part&&(this.editForm={part_number:this.part.part_number,description:this.part.description||"",classification_type:this.part.classification_type||"",default_location:this.part.default_location||"",notes:this.part.notes||""}))}get isAssembly(){return this.part?.is_assembly===!0}get isModified(){return this.part?.is_modified===!0}getClassificationBadgeClass(e){return{purchased:"badge bg-primary",manufactured:"badge bg-warning text-dark"}[e]}static{this.\u0275fac=function(n){return new(n||t)(k(U),k(j))}}static{this.\u0275cmp=N({type:t,selectors:[["app-part-detail"]],inputs:{partId:"partId",isNew:"isNew",presetClassification:"presetClassification"},standalone:!0,features:[I],decls:8,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body",2,"max-height","80vh","overflow-y","auto"],["class","text-center py-5",4,"ngIf"],[4,"ngIf"],["class","modal-footer",4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["class","d-flex justify-content-end mb-3",4,"ngIf"],[1,"card","mb-3"],[1,"card-header"],[1,"mb-0"],[1,"card-body"],["class","card mb-3",4,"ngIf"],["class","mt-3",4,"ngIf"],["class","card mt-3",4,"ngIf"],[1,"d-flex","justify-content-end","mb-3"],["class","btn btn-sm btn-outline-secondary",3,"click",4,"ngIf"],["class","btn-group btn-group-sm",4,"ngIf"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"bi","bi-pencil","me-1"],[1,"btn-group","btn-group-sm"],[1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-x","me-1"],[1,"btn","btn-primary",3,"click","disabled"],[1,"bi","bi-check-lg","me-1"],[1,"row","g-3"],[1,"col-md-6"],[1,"form-label"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","purchased"],["value","manufactured"],["value","assembly"],["value","modified"],[1,"col-12"],["rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","align-items-center","gap-2","mb-2"],[1,"mb-0","font-monospace"],[3,"classification"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"text-muted"],[1,"fw-medium"],[1,"d-flex","align-items-center","gap-2"],[1,"bi","bi-box-seam","text-muted"],[1,"font-monospace","fw-medium"],[1,"bi","bi-arrow-right","text-muted"],["class","text-muted small ms-2",4,"ngIf"],[1,"text-muted","small","ms-2"],[3,"partId"],[1,"mt-3"],[3,"update","partId"],[1,"card","mt-3"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"d-flex","justify-content-between","align-items-center"],["class","small text-muted",4,"ngIf"],[1,"text-muted","small"],["class","ms-2",4,"ngIf"],[1,"small","text-muted"],[1,"ms-2"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"h5",1),c(2),s(),o(3,"button",2),m("click",function(){return i.activeModal.dismiss()}),s()(),o(4,"div",3),h(5,Zt,4,0,"div",4)(6,fi,13,7,"div",5),s(),h(7,gi,5,1,"div",6)),n&2&&(r(2),w(i.isNew?"Create New Part":"Part Details"),r(3),u("ngIf",i.loading),r(),u("ngIf",!i.loading),r(),u("ngIf",i.isNew))},dependencies:[B,$,F,le,ae,re,ie,oe,ne,se,Ue,Ze,Xe],encapsulation:2})}}return t})();export{Ue as a,U as b,Wn as c,ds as d};
