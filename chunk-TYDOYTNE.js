import{a as Pe}from"./chunk-WLYUEHG5.js";import{a as Ee}from"./chunk-3RS5Y76G.js";import{a as fe}from"./chunk-HWGX3DK4.js";import{a as ke}from"./chunk-VQJ2QKKZ.js";import{a as ve}from"./chunk-JMCLK4XY.js";import{a as ye}from"./chunk-X6NM5MJK.js";import{a as Me}from"./chunk-KMPFFIFL.js";import"./chunk-BC7WZKGI.js";import{a as we}from"./chunk-TIC6WQIR.js";import{a as Ce}from"./chunk-6CNJLGU4.js";import{c as ce,f as me,i as pe}from"./chunk-SJKOT4HS.js";import{a as K,b as Ie,c as Se,d as Te}from"./chunk-SVWDNLVH.js";import{a as Y}from"./chunk-SJCJM33I.js";import{a as _e,b as Q,c as N,f as W,h as z,i as ue,j as ge,k as he,l as be,m as $,n as F}from"./chunk-ACCF75FY.js";import{$a as u,$b as A,Aa as le,Ab as H,Bb as se,Ca as l,Da as M,Sa as b,T as ne,Ua as c,Va as T,Wa as S,Xa as U,Y as oe,Za as o,_a as n,_b as de,ab as R,ac as V,bb as G,ca as E,cb as w,db as g,dc as L,eb as d,g as Z,ic as xe,ja as re,ka as p,la as _,mb as a,nb as v,ob as x,pb as O,qb as ee,rb as f,sa as q,sb as y,tb as C,vb as D,zb as ae}from"./chunk-2TFJQIGG.js";import{e as k}from"./chunk-DVOCWXDE.js";function Be(r,m){r&1&&u(0,"div",21)}var Oe=(()=>{class r{constructor(){this.show=!1,this.lineItemsCount=0,this.defaultToolModel=null,this.showChange=new q,this.saveTemplate=new q,this.templateName="",this.toolModel="",this.saving=!1}close(){this.show=!1,this.showChange.emit(!1),this.templateName="",this.toolModel=""}save(){this.templateName.trim()&&(this.saving=!0,this.saveTemplate.emit({name:this.templateName.trim(),toolModel:this.toolModel.trim()||this.defaultToolModel}),setTimeout(()=>{this.saving=!1,this.close()},500))}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=E({type:r,selectors:[["app-save-as-template-dialog"]],inputs:{show:"show",lineItemsCount:"lineItemsCount",defaultToolModel:"defaultToolModel"},outputs:{showChange:"showChange",saveTemplate:"saveTemplate"},standalone:!0,features:[D],decls:34,vars:13,consts:[["tabindex","-1",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"bi","bi-save","me-2"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"text-muted","small","mb-3"],[1,"mb-3"],[1,"form-label"],["type","text","placeholder","e.g., Standard 230Q BOM",1,"form-control",3,"ngModelChange","ngModel"],["type","text",1,"form-control",3,"ngModelChange","ngModel","placeholder"],[1,"form-text"],[1,"alert","alert-info","small"],[1,"bi","bi-info-circle","me-2"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"bi","me-1"],["class","modal-backdrop fade show",4,"ngIf"],[1,"modal-backdrop","fade","show"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),u(5,"i",5),a(6,"Save as BOM Template "),n(),o(7,"button",6),g("click",function(){return t.close()}),n()(),o(8,"div",7)(9,"p",8),a(10," Save this order's parts list as a reusable template. You can use templates when importing new orders. "),n(),o(11,"div",9)(12,"label",10),a(13,"Template Name *"),n(),o(14,"input",11),C("ngModelChange",function(h){return y(t.templateName,h)||(t.templateName=h),h}),n()(),o(15,"div",9)(16,"label",10),a(17,"Tool Model (optional)"),n(),o(18,"input",12),C("ngModelChange",function(h){return y(t.toolModel,h)||(t.toolModel=h),h}),n(),o(19,"div",13),a(20,"Associate this template with a specific tool model"),n()(),o(21,"div",14),u(22,"i",15),a(23," This template will include "),o(24,"strong"),a(25),n(),a(26," from the current order. "),n()(),o(27,"div",16)(28,"button",17),g("click",function(){return t.close()}),a(29,"Cancel"),n(),o(30,"button",18),g("click",function(){return t.save()}),u(31,"i",19),a(32),n()()()()(),b(33,Be,1,0,"div",20)),i&2&&(T("display",t.show?"block":"none"),S("show",t.show),l(14),f("ngModel",t.templateName),l(4),f("ngModel",t.toolModel),c("placeholder",t.defaultToolModel||"e.g., 230Q"),l(7),x("",t.lineItemsCount," parts"),l(5),c("disabled",!t.templateName.trim()||t.saving),l(),U(t.saving?"bi-arrow-clockwise spin":"bi-save"),l(),x(" ",t.saving?"Saving...":"Save Template"," "),l(),c("ngIf",t.show))},dependencies:[L,V,F,Q,N,W],styles:[".spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return r})();function qe(r,m){if(r&1&&(o(0,"span",45),a(1),n()),r&2){let e=d().$implicit;l(),x("(",e.serial_number,")")}}function Qe(r,m){if(r&1){let e=w();o(0,"div",16)(1,"input",42),g("change",function(){let t=p(e).$implicit,s=d();return _(s.toggleTool(t.id))}),n(),o(2,"label",43),a(3),b(4,qe,2,1,"span",44),n()()}if(r&2){let e=m.$implicit,i=d();l(),c("id","tool-"+e.id)("checked",i.selectedTools.has(e.id)),l(),c("for","tool-"+e.id),l(),x(" ",e.tool_number," "),l(),c("ngIf",e.serial_number)}}function je(r,m){if(r&1&&(o(0,"span"),a(1),n()),r&2){let e=d();l(),x(" | PO: ",e.order==null?null:e.order.po_number,"")}}function Ue(r,m){if(r&1&&(o(0,"span"),a(1),n()),r&2){let e=d();l(),x(" | Due: ",e.formatDate(e.order==null?null:e.order.due_date),"")}}function Re(r,m){r&1&&(o(0,"th"),a(1,"Location"),n())}function Ge(r,m){if(r&1&&(o(0,"tr",30)(1,"td",53),u(2,"i",54),a(3),n()()),r&2){let e=d().$implicit,i=d();l(3),x("",i.getLocationGroup(e.location)," ")}}function He(r,m){if(r&1&&(o(0,"td",55),a(1),n()),r&2){let e=d().$implicit;l(),v(e.location||"-")}}function ze(r,m){if(r&1&&(o(0,"span",56),a(1),n()),r&2){let e=d().$implicit;l(),v(e.total_picked)}}function $e(r,m){r&1&&(o(0,"span"),a(1,"-"),n())}function Ke(r,m){if(r&1&&(R(0),b(1,Ge,4,1,"tr",46),o(2,"tr")(3,"td",47),u(4,"div",48),n(),o(5,"td",49),a(6),n(),b(7,He,2,1,"td",50),o(8,"td",28),a(9),n(),o(10,"td",51),a(11),n(),o(12,"td",47),b(13,ze,2,1,"span",52)(14,$e,2,0,"span",27),n()(),G()),r&2){let e=m.$implicit,i=m.index,t=d();l(),c("ngIf",t.groupByLocation&&t.shouldShowGroupHeader(e,i)),l(5),v(e.part_number),l(),c("ngIf",t.showLocation),l(2),v(e.description||"-"),l(2),v(e.qty_per_unit),l(2),c("ngIf",e.total_picked>0),l(),c("ngIf",e.total_picked===0)}}function Ye(r,m){r&1&&u(0,"div",57)}var De=(()=>{class r{constructor(){this.show=!1,this.order=null,this.tools=[],this.lineItems=[],this.selectedTools=new Set,this.showCompleted=!1,this.showLocation=!0,this.groupByLocation=!0,this.closeCallback=null}ngOnInit(){this.selectAllTools()}setCloseCallback(e){this.closeCallback=e}close(){this.show=!1,this.closeCallback&&this.closeCallback()}toggleTool(e){this.selectedTools.has(e)?this.selectedTools.delete(e):this.selectedTools.add(e)}selectAllTools(){this.selectedTools=new Set(this.tools.map(e=>e.id))}clearToolSelection(){this.selectedTools.clear()}getSelectedToolNumbers(){return this.tools.filter(e=>this.selectedTools.has(e.id)).map(e=>e.tool_number)}get filteredItems(){let e=this.lineItems;return this.showCompleted||(e=e.filter(i=>i.remaining>0)),this.groupByLocation&&(e=[...e].sort((i,t)=>{let s=i.location||"",h=t.location||"";return!s&&h?1:s&&!h?-1:s.localeCompare(h,void 0,{numeric:!0})})),e}getLocationGroup(e){if(!e)return"No Location";let i=e.split("-");return i.length>=2?`${i[0]}-${i[1]}`:i[0]}shouldShowGroupHeader(e,i){if(!this.groupByLocation)return!1;if(i===0)return!0;let s=this.filteredItems[i-1];return this.getLocationGroup(e.location)!==this.getLocationGroup(s.location)}formatDate(e){return e?new Date(e).toLocaleDateString():"-"}print(){window.print()}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=E({type:r,selectors:[["app-print-pick-list"]],inputs:{show:"show",order:"order",tools:"tools",lineItems:"lineItems"},standalone:!0,features:[D],decls:78,vars:16,consts:[["tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"bi","bi-printer","me-2"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row","mb-4"],[1,"col-md-6"],[1,"form-label"],[1,"border","rounded","p-2",2,"max-height","150px","overflow-y","auto"],["class","form-check",4,"ngFor","ngForOf"],[1,"mt-2"],[1,"btn","btn-sm","btn-outline-secondary","me-1",3,"click"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"form-check"],["type","checkbox","id","showCompleted",1,"form-check-input",3,"ngModelChange","ngModel"],["for","showCompleted",1,"form-check-label"],["type","checkbox","id","showLocation",1,"form-check-input",3,"ngModelChange","ngModel"],["for","showLocation",1,"form-check-label"],["type","checkbox","id","groupByLocation",1,"form-check-input",3,"ngModelChange","ngModel"],["for","groupByLocation",1,"form-check-label"],["id","printPreview",1,"border","rounded","p-3","bg-body"],[1,"text-center","mb-3"],[1,"mb-1"],[1,"text-muted","small","mb-0"],[4,"ngIf"],[1,"small","text-muted"],[1,"table","table-sm","table-bordered"],[1,"table-secondary"],[2,"width","30px"],[1,"text-center",2,"width","80px"],[4,"ngFor","ngForOf"],[1,"row","mt-4","small","text-muted"],[1,"col-6"],[1,"col-6","text-end"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"bi","bi-printer","me-1"],["class","modal-backdrop fade show",4,"ngIf"],["type","checkbox",1,"form-check-input",3,"change","id","checked"],[1,"form-check-label",3,"for"],["class","text-muted small",4,"ngIf"],[1,"text-muted","small"],["class","table-secondary",4,"ngIf"],[1,"text-center"],[1,"border","rounded",2,"width","20px","height","20px"],[1,"font-monospace","small"],["class","small",4,"ngIf"],[1,"text-center","fw-bold"],["class","text-success",4,"ngIf"],["colspan","6",1,"fw-bold","small","py-1"],[1,"bi","bi-geo-alt","me-1"],[1,"small"],[1,"text-success"],[1,"modal-backdrop","fade","show"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),u(5,"i",5),a(6,"Print Pick List "),n(),o(7,"button",6),g("click",function(){return t.close()}),n()(),o(8,"div",7)(9,"div",8)(10,"div",9)(11,"label",10),a(12,"Select Tools to Include"),n(),o(13,"div",11),b(14,Qe,5,5,"div",12),n(),o(15,"div",13)(16,"button",14),g("click",function(){return t.selectAllTools()}),a(17,"Select All"),n(),o(18,"button",15),g("click",function(){return t.clearToolSelection()}),a(19,"Clear"),n()()(),o(20,"div",9)(21,"label",10),a(22,"Options"),n(),o(23,"div",16)(24,"input",17),C("ngModelChange",function(h){return y(t.showCompleted,h)||(t.showCompleted=h),h}),n(),o(25,"label",18),a(26,"Include completed items"),n()(),o(27,"div",16)(28,"input",19),C("ngModelChange",function(h){return y(t.showLocation,h)||(t.showLocation=h),h}),n(),o(29,"label",20),a(30,"Show location column"),n()(),o(31,"div",16)(32,"input",21),C("ngModelChange",function(h){return y(t.groupByLocation,h)||(t.groupByLocation=h),h}),n(),o(33,"label",22),a(34,"Group by location"),n()()()(),o(35,"div",23)(36,"div",24)(37,"h4",25),a(38),n(),o(39,"p",26),a(40),b(41,je,2,1,"span",27)(42,Ue,2,1,"span",27),n(),o(43,"p",28),a(44),n()(),o(45,"table",29)(46,"thead",30)(47,"tr"),u(48,"th",31),o(49,"th"),a(50,"Part Number"),n(),b(51,Re,2,0,"th",27),o(52,"th"),a(53,"Description"),n(),o(54,"th",32),a(55,"Qty"),n(),o(56,"th",32),a(57,"Picked"),n()()(),o(58,"tbody"),b(59,Ke,15,7,"ng-container",33),n()(),o(60,"div",34)(61,"div",35)(62,"p",25)(63,"strong"),a(64,"Picked By:"),n(),a(65," _____________________"),n()(),o(66,"div",36)(67,"p",25)(68,"strong"),a(69,"Date:"),n(),a(70," _____________________"),n()()()()(),o(71,"div",37)(72,"button",38),g("click",function(){return t.close()}),a(73,"Cancel"),n(),o(74,"button",39),g("click",function(){return t.print()}),u(75,"i",40),a(76," Print "),n()()()()(),b(77,Ye,1,0,"div",41)),i&2&&(T("display",t.show?"block":"none"),S("show",t.show),l(14),c("ngForOf",t.tools),l(10),f("ngModel",t.showCompleted),l(4),f("ngModel",t.showLocation),l(4),f("ngModel",t.groupByLocation),l(6),x("Pick List - SO-",t.order==null?null:t.order.so_number,""),l(2),x(" ",(t.order==null?null:t.order.customer_name)||"No customer"," "),l(),c("ngIf",t.order==null?null:t.order.po_number),l(),c("ngIf",t.order==null?null:t.order.due_date),l(2),x(" Tools: ",t.getSelectedToolNumbers().join(", ")||"None selected"," "),l(7),c("ngIf",t.showLocation),l(8),c("ngForOf",t.filteredItems),l(18),c("ngIf",t.show))},dependencies:[L,A,V,F,_e,N,W],styles:["@media print{.modal-header[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%], .modal-backdrop[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%], .border[_ngcontent-%COMP%], .bg-light[_ngcontent-%COMP%]{display:none!important}.modal[_ngcontent-%COMP%], .modal-dialog[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]{position:static!important;display:block!important;width:100%!important;max-width:none!important;margin:0!important;padding:0!important;border:none!important;box-shadow:none!important}#printPreview[_ngcontent-%COMP%]{border:none!important;padding:.5in!important;background:#fff!important}.table[_ngcontent-%COMP%]{font-size:10pt;width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 8px;border:1px solid #333}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f0f0f0!important;-webkit-print-color-adjust:exact;print-color-adjust:exact;font-weight:700;border-bottom:2px solid #000}.table-secondary[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#e8e8e8!important;-webkit-print-color-adjust:exact;print-color-adjust:exact;font-weight:700;border-top:2px solid #000;border-bottom:1px solid #000}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{page-break-inside:avoid}.table-secondary[_ngcontent-%COMP%]{page-break-after:avoid}h4[_ngcontent-%COMP%]{margin-bottom:.2in;font-size:16pt}.row.mt-4[_ngcontent-%COMP%]{margin-top:.4in!important;page-break-inside:avoid}.border.rounded[_ngcontent-%COMP%]{border:1.5px solid #000!important;border-radius:0!important;-webkit-print-color-adjust:exact;print-color-adjust:exact}body[_ngcontent-%COMP%], p[_ngcontent-%COMP%], span[_ngcontent-%COMP%], td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{color:#000!important}.text-muted[_ngcontent-%COMP%]{color:#555!important}.text-success[_ngcontent-%COMP%]{color:#28a745!important;-webkit-print-color-adjust:exact;print-color-adjust:exact}}"]})}}return r})();function Xe(r,m){if(r&1&&(o(0,"p",33),a(1),n()),r&2){let e=d(2);l(),v(e.lineItem.description)}}function Je(r,m){if(r&1){let e=w();o(0,"div",34)(1,"div",35)(2,"strong"),a(3),n(),o(4,"span",36),a(5),n()(),o(6,"div",37)(7,"button",38),g("click",function(){let t=p(e).$implicit,s=d(2);return _(s.decrementAllocation(t))}),u(8,"i",39),n(),o(9,"input",40),C("ngModelChange",function(t){let s=p(e).$implicit;return y(s.allocatedQty,t)||(s.allocatedQty=t),_(t)}),n(),o(10,"button",38),g("click",function(){let t=p(e).$implicit,s=d(2);return _(s.incrementAllocation(t))}),u(11,"i",41),n()()()}if(r&2){let e=m.$implicit,i=d(2);l(3),v(e.toolNumber),l(2),O(" (",e.currentPicked,"/",e.maxQty," picked) "),l(2),c("disabled",e.allocatedQty<=0),l(2),f("ngModel",e.allocatedQty),c("min",0)("max",e.maxQty-e.currentPicked),l(),c("disabled",e.allocatedQty>=e.maxQty-e.currentPicked||i.totalAllocated>=i.availableToAllocate)}}function Ze(r,m){r&1&&(o(0,"div",42),u(1,"i",43),a(2," Allocated quantity exceeds available inventory! "),n())}function et(r,m){if(r&1){let e=w();o(0,"div",13)(1,"div",14)(2,"strong",15),a(3),n(),b(4,Xe,2,1,"p",16),n(),o(5,"div",17)(6,"div",18)(7,"div",19)(8,"span",20),a(9,"Total Needed:"),n(),o(10,"strong",21),a(11),n()(),o(12,"div",19)(13,"span",20),a(14,"Picked:"),n(),o(15,"strong",21),a(16),n()(),o(17,"div",19)(18,"span",20),a(19,"Available:"),n(),o(20,"strong",21),a(21),n()()()(),o(22,"div",14)(23,"label",22),a(24,"Available to Allocate"),n(),o(25,"input",23),C("ngModelChange",function(t){p(e);let s=d();return y(s.availableToAllocate,t)||(s.availableToAllocate=t),_(t)}),g("change",function(){p(e);let t=d();return _(t.onAvailableChange())}),n(),o(26,"div",24),a(27,"Enter the quantity you have available to distribute"),n()(),u(28,"hr"),o(29,"h6"),a(30,"Allocate to Tools"),n(),o(31,"div",25),b(32,Je,12,8,"div",26),n(),o(33,"div",27)(34,"div")(35,"button",28),g("click",function(){p(e);let t=d();return _(t.distributeEvenly())}),a(36," Distribute Evenly "),n(),o(37,"button",29),g("click",function(){p(e);let t=d();return _(t.clearAllocations())}),a(38," Clear "),n()(),o(39,"div",30)(40,"span",31),a(41,"Allocated:"),n(),o(42,"strong",21),a(43),n()()(),b(44,Ze,3,0,"div",32),n()}if(r&2){let e,i=d();l(3),v(i.lineItem.part_number),l(),c("ngIf",i.lineItem.description),l(7),v(i.lineItem.total_qty_needed),l(5),v(i.lineItem.total_picked),l(4),S("text-warning",(i.lineItem.qty_available||0)<i.availableToAllocate),l(),x(" ",(e=i.lineItem.qty_available)!==null&&e!==void 0?e:"Unknown"," "),l(4),f("ngModel",i.availableToAllocate),c("min",0),l(7),c("ngForOf",i.allocations),l(10),S("text-danger",i.totalAllocated>i.availableToAllocate),l(),O(" ",i.totalAllocated,"/",i.availableToAllocate," "),l(),c("ngIf",i.totalAllocated>i.availableToAllocate)}}function tt(r,m){r&1&&u(0,"div",44)}var Ve=(()=>{class r{constructor(){this.show=!1,this.lineItem=null,this.tools=[],this.getToolPicked=()=>0,this.showChange=new q,this.distribute=new q,this.allocations=[],this.availableToAllocate=0,this.saving=!1}ngOnChanges(e){e.show&&this.show&&this.lineItem&&this.initializeAllocations()}initializeAllocations(){this.lineItem&&(this.availableToAllocate=this.lineItem.qty_available??this.lineItem.remaining,this.allocations=this.tools.map(e=>{let i=this.getToolPicked(this.lineItem,e);return{toolId:e.id,toolNumber:e.tool_number,currentPicked:i,maxQty:this.lineItem.qty_per_unit,allocatedQty:0}}))}get totalAllocated(){return this.allocations.reduce((e,i)=>e+i.allocatedQty,0)}onAvailableChange(){this.totalAllocated>this.availableToAllocate&&this.clearAllocations()}incrementAllocation(e){let i=e.maxQty-e.currentPicked,t=this.availableToAllocate-this.totalAllocated;e.allocatedQty<i&&t>0&&e.allocatedQty++}decrementAllocation(e){e.allocatedQty>0&&e.allocatedQty--}distributeEvenly(){this.clearAllocations();let e=this.allocations.filter(s=>s.currentPicked<s.maxQty);if(e.length===0)return;let i=this.availableToAllocate,t=0;for(;i>0;){let s=e[t];if(s.maxQty-s.currentPicked-s.allocatedQty>0&&(s.allocatedQty++,i--),t=(t+1)%e.length,e.every(P=>P.allocatedQty>=P.maxQty-P.currentPicked))break}}clearAllocations(){this.allocations.forEach(e=>e.allocatedQty=0)}close(){this.show=!1,this.showChange.emit(!1)}save(){if(this.totalAllocated===0||this.totalAllocated>this.availableToAllocate)return;this.saving=!0;let e=this.allocations.filter(i=>i.allocatedQty>0).map(i=>({toolId:i.toolId,qty:i.allocatedQty}));this.distribute.emit(e),setTimeout(()=>{this.saving=!1,this.close()},500)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=E({type:r,selectors:[["app-distribute-inventory-dialog"]],inputs:{show:"show",lineItem:"lineItem",tools:"tools",getToolPicked:"getToolPicked"},outputs:{showChange:"showChange",distribute:"distribute"},standalone:!0,features:[re,D],decls:16,vars:10,consts:[["tabindex","-1",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"bi","bi-diagram-3","me-2"],["type","button",1,"btn-close",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"bi","me-1"],["class","modal-backdrop fade show",4,"ngIf"],[1,"modal-body"],[1,"mb-3"],[1,"font-monospace"],["class","text-muted small mb-0",4,"ngIf"],[1,"alert","alert-info","small","mb-3"],[1,"row"],[1,"col-4"],[1,"text-muted"],[1,"ms-1"],[1,"form-label"],["type","number",1,"form-control",3,"ngModelChange","change","ngModel","min"],[1,"form-text"],[1,"d-flex","flex-column","gap-2"],["class","d-flex align-items-center gap-2 p-2 border rounded",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","mt-3"],[1,"btn","btn-sm","btn-outline-secondary","me-1",3,"click"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"text-end"],[1,"small","text-muted"],["class","alert alert-danger small mt-3 mb-0",4,"ngIf"],[1,"text-muted","small","mb-0"],[1,"d-flex","align-items-center","gap-2","p-2","border","rounded"],[1,"flex-grow-1"],[1,"small","text-muted","ms-2"],[1,"input-group",2,"width","140px"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[1,"bi","bi-dash"],["type","number",1,"form-control","form-control-sm","text-center",3,"ngModelChange","ngModel","min","max"],[1,"bi","bi-plus"],[1,"alert","alert-danger","small","mt-3","mb-0"],[1,"bi","bi-exclamation-triangle","me-1"],[1,"modal-backdrop","fade","show"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),u(5,"i",5),a(6,"Distribute Inventory "),n(),o(7,"button",6),g("click",function(){return t.close()}),n()(),b(8,et,45,15,"div",7),o(9,"div",8)(10,"button",9),g("click",function(){return t.close()}),a(11,"Cancel"),n(),o(12,"button",10),g("click",function(){return t.save()}),u(13,"i",11),a(14),n()()()()(),b(15,tt,1,0,"div",12)),i&2&&(T("display",t.show?"block":"none"),S("show",t.show),l(8),c("ngIf",t.lineItem),l(4),c("disabled",t.totalAllocated===0||t.totalAllocated>t.availableToAllocate||t.saving),l(),U(t.saving?"bi-arrow-clockwise spin":"bi-check-circle"),l(),x(" ",t.saving?"Saving...":"Apply Allocation"," "),l(),c("ngIf",t.show))},dependencies:[L,A,V,F,Q,z,N,$,be,W],styles:[".spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return r})();function ot(r,m){if(r&1&&(o(0,"div",12),a(1),n()),r&2){let e=d();l(),v(e.partDescription)}}function rt(r,m){r&1&&(o(0,"div",13)(1,"div",14)(2,"span",15),a(3,"Loading..."),n()()())}function lt(r,m){if(r&1&&(o(0,"div",16),a(1),n()),r&2){let e=d();l(),x(" ",e.error," ")}}function at(r,m){r&1&&(o(0,"div",17),u(1,"i",18),o(2,"p",19),a(3,"This assembly has no components."),n()())}function st(r,m){if(r&1&&(o(0,"tr")(1,"td",29),a(2),n(),o(3,"td",30),a(4),n(),o(5,"td"),u(6,"app-classification-badge",31),n(),o(7,"td",32),a(8),n(),o(9,"td",26)(10,"span",33),a(11),n()()()),r&2){let e=m.$implicit;l(2),v(e.part_number),l(2),v(e.description||"-"),l(2),c("classification",e.classification_type)("size","sm"),l(2),v(e.total_quantity),l(3),x("L",e.max_level,"")}}function dt(r,m){if(r&1&&(o(0,"div")(1,"div",20)(2,"div",21)(3,"div",22),a(4),n(),o(5,"div",12),a(6,"Unique Parts"),n()(),o(7,"div",21)(8,"div",22),a(9),n(),o(10,"div",12),a(11,"Total Quantity"),n()(),o(12,"div",21)(13,"div",22),a(14),n(),o(15,"div",12),a(16,"Max Depth"),n()()(),o(17,"div",23)(18,"table",24)(19,"thead",25)(20,"tr")(21,"th"),a(22,"Part Number"),n(),o(23,"th"),a(24,"Description"),n(),o(25,"th"),a(26,"Type"),n(),o(27,"th",26),a(28,"Qty"),n(),o(29,"th",26),a(30,"Level"),n()()(),o(31,"tbody"),b(32,st,12,6,"tr",27),n()()(),o(33,"div",28),a(34," Level 0 = direct children, Level 1+ = nested subassemblies "),n()()),r&2){let e=d();l(4),v(e.totalParts),l(5),v(e.totalQuantity),l(5),v(e.maxDepth),l(18),c("ngForOf",e.explodedParts)}}var Le=(()=>{class r{constructor(e,i){this.activeModal=e,this.partsService=i,this.partId="",this.partNumber="",this.explodedParts=[],this.loading=!0,this.error=null}ngOnInit(){return k(this,null,function*(){this.partId&&(yield this.fetchExplodedBOM())})}fetchExplodedBOM(){return k(this,null,function*(){this.loading=!0,this.error=null;try{this.explodedParts=yield this.partsService.getExplodedBOM(this.partId)}catch(e){this.error=e instanceof Error?e.message:"Failed to load BOM"}finally{this.loading=!1}})}get totalParts(){return this.explodedParts.length}get totalQuantity(){return this.explodedParts.reduce((e,i)=>e+i.total_quantity,0)}get maxDepth(){return this.explodedParts.length>0?Math.max(...this.explodedParts.map(e=>e.max_level)):0}static{this.\u0275fac=function(i){return new(i||r)(M(Ie),M(Y))}}static{this.\u0275cmp=E({type:r,selectors:[["app-exploded-bom-dialog"]],inputs:{partId:"partId",partNumber:"partNumber",partDescription:"partDescription"},standalone:!0,features:[D],decls:14,vars:6,consts:[[1,"modal-header"],[1,"modal-title"],[1,"bi","bi-boxes","me-2","text-secondary"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"font-monospace","fw-semibold"],["class","small text-muted",4,"ngIf"],["class","text-center py-5",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","text-center py-5 text-muted",4,"ngIf"],[4,"ngIf"],[1,"small","text-muted"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"alert","alert-danger"],[1,"text-center","py-5","text-muted"],[1,"bi","bi-box-seam","display-4","opacity-50"],[1,"mt-3"],[1,"row","g-3","mb-3"],[1,"col-4","text-center"],[1,"display-6","fw-bold"],[1,"table-responsive","border","rounded"],[1,"table","table-sm","table-hover","mb-0"],[1,"table-light"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"text-center","text-muted","small","mt-3","pt-3","border-top"],[1,"font-monospace"],[1,"text-muted","small"],[3,"classification","size"],[1,"text-center","fw-medium"],[1,"badge","bg-secondary"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"h5",1),u(2,"i",2),a(3," Exploded BOM "),n(),o(4,"button",3),g("click",function(){return t.activeModal.dismiss()}),n()(),o(5,"div",4)(6,"div",5)(7,"div",6),a(8),n(),b(9,ot,2,1,"div",7),n(),b(10,rt,4,0,"div",8)(11,lt,2,1,"div",9)(12,at,4,0,"div",10)(13,dt,35,4,"div",11),n()),i&2&&(l(8),v(t.partNumber),l(),c("ngIf",t.partDescription),l(),c("ngIf",t.loading),l(),c("ngIf",t.error),l(),c("ngIf",!t.loading&&!t.error&&t.explodedParts.length===0),l(),c("ngIf",!t.loading&&!t.error&&t.explodedParts.length>0))},dependencies:[L,A,V,K],encapsulation:2})}}return r})();var Ae=(()=>{class r{constructor(e){this.supabase=e,this.loadingSubject=new Z(!1),this.errorSubject=new Z(null),this.loading$=this.loadingSubject.asObservable(),this.error$=this.errorSubject.asObservable()}addLineItem(e,i){return k(this,null,function*(){try{this.loadingSubject.next(!0),this.errorSubject.next(null);let{data:t,error:s}=yield this.supabase.from("line_items").insert({order_id:e,part_number:i.part_number,description:i.description||null,location:i.location||null,qty_per_unit:i.qty_per_unit,total_qty_needed:i.total_qty_needed,qty_available:i.qty_available??null,tool_ids:i.tool_ids||null}).select().single();if(s)throw s;return t}catch(t){return this.errorSubject.next(t instanceof Error?t.message:"Failed to add line item"),null}finally{this.loadingSubject.next(!1)}})}updateLineItem(e,i){return k(this,null,function*(){try{this.loadingSubject.next(!0),this.errorSubject.next(null);let{data:t,error:s}=yield this.supabase.from("line_items").update({part_number:i.part_number,description:i.description||null,location:i.location||null,qty_per_unit:i.qty_per_unit,total_qty_needed:i.total_qty_needed,qty_available:i.qty_available??null,tool_ids:i.tool_ids||null}).eq("id",e).select().single();if(s)throw s;return t}catch(t){return this.errorSubject.next(t instanceof Error?t.message:"Failed to update line item"),null}finally{this.loadingSubject.next(!1)}})}deleteLineItem(e){return k(this,null,function*(){try{this.loadingSubject.next(!0),this.errorSubject.next(null);let{error:i}=yield this.supabase.from("line_items").delete().eq("id",e);if(i)throw i;return!0}catch(i){return this.errorSubject.next(i instanceof Error?i.message:"Failed to delete line item"),!1}finally{this.loadingSubject.next(!1)}})}static{this.\u0275fac=function(i){return new(i||r)(oe(xe))}}static{this.\u0275prov=ne({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var mt=(r,m,e)=>({"bg-success":r,"bg-warning text-dark":m,"bg-body-secondary text-body border":e}),ie=(r,m,e,i)=>({"text-success-emphasis":r,"text-warning-emphasis":m,"text-danger-emphasis":e,"text-muted":i}),pt=(r,m,e,i,t)=>({"text-warning-emphasis fw-bold":r,"text-danger-emphasis fw-bold":m,"text-success-emphasis":e,"text-warning fw-bold":i,"text-success":t});function _t(r,m){r&1&&(o(0,"div",2)(1,"div",3)(2,"span",4),a(3,"Loading..."),n()(),o(4,"p",5),a(5,"Loading order..."),n()())}function ut(r,m){r&1&&(o(0,"div",2)(1,"a",6),u(2,"i",7),a(3," Back to Orders "),n(),o(4,"div",8)(5,"div",9)(6,"p",10),a(7,"Order not found"),n()()()())}function gt(r,m){if(r&1){let e=w();o(0,"div",87),u(1,"i",88),o(2,"div",89)(3,"strong"),a(4,"All items picked!"),n(),a(5," This order is ready to be marked complete. "),n(),o(6,"button",90),g("click",function(){p(e);let t=d(2);return _(t.handleMarkComplete())}),u(7,"i",91),a(8," Mark Complete "),n()()}}function ht(r,m){r&1&&(o(0,"div",87),u(1,"i",88),o(2,"strong"),a(3,"Order Complete"),n()())}function bt(r,m){r&1&&(o(0,"div",92),u(1,"i",93),o(2,"strong"),a(3,"Order Cancelled"),n()())}function xt(r,m){if(r&1&&(o(0,"div",94),u(1,"i",95),o(2,"strong"),a(3,"Order Overdue"),n(),a(4),n()),r&2){let e=d(2);l(4),x(" - Due on ",e.utils.formatDate(e.order.due_date)," ")}}function vt(r,m){if(r&1&&(o(0,"div",96),u(1,"i",97),o(2,"strong"),a(3),n(),a(4),n()),r&2){let e=d(2);l(3),v(e.utils.getDueDateStatus(e.order.due_date).label),l(),x(" - ",e.utils.formatDate(e.order.due_date)," ")}}function ft(r,m){if(r&1){let e=w();o(0,"div",94),u(1,"i",98),o(2,"div",89)(3,"strong"),a(4,"Concurrent Pick Detected"),n(),o(5,"p",99),a(6),n()(),o(7,"button",100),g("click",function(){p(e);let t=d(2);return _(t.overPickWarning=null)}),n()()}if(r&2){let e=d(2);l(6),v(e.overPickWarning)}}function yt(r,m){if(r&1){let e=w();o(0,"button",90),g("click",function(){p(e);let t=d(2);return _(t.handleMarkComplete())}),u(1,"i",91),a(2," Mark Complete "),n()}}function Ct(r,m){if(r&1&&(o(0,"span",101),a(1),n()),r&2){let e=d(2);l(),x(" ",e.getOrderSummary()," ")}}function wt(r,m){if(r&1){let e=w();o(0,"button",23),g("click",function(t){return p(e),d(2).startEditing(),_(t.stopPropagation())}),u(1,"i",102),a(2," Edit "),n()}}function kt(r,m){if(r&1){let e=w();o(0,"div",103),g("click",function(t){return p(e),_(t.stopPropagation())}),o(1,"button",23),g("click",function(){p(e);let t=d(2);return _(t.cancelEditing())}),a(2,"Cancel"),n(),o(3,"button",104),g("click",function(){p(e);let t=d(2);return _(t.saveChanges())}),a(4,"Save"),n()()}}function It(r,m){if(r&1&&(o(0,"div",106)(1,"div",107)(2,"p",108),a(3,"SO Number"),n(),o(4,"p",109),a(5),n()(),o(6,"div",107)(7,"p",108),a(8,"Customer"),n(),o(9,"p",109),a(10),n()(),o(11,"div",107)(12,"p",108),a(13,"PO Number"),n(),o(14,"p",109),a(15),n()(),o(16,"div",107)(17,"p",108),a(18,"Tool Model"),n(),o(19,"p",109),a(20),n()(),o(21,"div",107)(22,"p",108),a(23,"Tools"),n(),o(24,"p",109),a(25),n()(),o(26,"div",107)(27,"p",108),a(28,"Order Date"),n(),o(29,"p",109),a(30),n()(),o(31,"div",107)(32,"p",108),a(33,"Due Date"),n(),o(34,"p",109),a(35),n()(),o(36,"div",110)(37,"p",108),a(38,"Notes"),n(),o(39,"p",109),a(40),n()()()),r&2){let e=d(3);l(5),v(e.order.so_number),l(5),v(e.order.customer_name||"-"),l(5),v(e.order.po_number||"-"),l(5),v(e.order.tool_model||"-"),l(5),x("",e.tools.length," tool(s)"),l(5),v(e.utils.formatDate(e.order.order_date)),l(5),v(e.utils.formatDate(e.order.due_date)),l(5),v(e.order.notes||"-")}}function St(r,m){if(r&1){let e=w();o(0,"div",106)(1,"div",111)(2,"label",112),a(3,"SO Number"),n(),o(4,"input",113),C("ngModelChange",function(t){p(e);let s=d(3);return y(s.editForm.so_number,t)||(s.editForm.so_number=t),_(t)}),n()(),o(5,"div",111)(6,"label",112),a(7,"Customer"),n(),o(8,"input",113),C("ngModelChange",function(t){p(e);let s=d(3);return y(s.editForm.customer_name,t)||(s.editForm.customer_name=t),_(t)}),n()(),o(9,"div",111)(10,"label",112),a(11,"PO Number"),n(),o(12,"input",113),C("ngModelChange",function(t){p(e);let s=d(3);return y(s.editForm.po_number,t)||(s.editForm.po_number=t),_(t)}),n()(),o(13,"div",111)(14,"label",112),a(15,"Tool Model"),n(),o(16,"input",113),C("ngModelChange",function(t){p(e);let s=d(3);return y(s.editForm.tool_model,t)||(s.editForm.tool_model=t),_(t)}),n()(),o(17,"div",111)(18,"label",112),a(19,"Order Date"),n(),o(20,"input",114),C("ngModelChange",function(t){p(e);let s=d(3);return y(s.editForm.order_date,t)||(s.editForm.order_date=t),_(t)}),n()(),o(21,"div",111)(22,"label",112),a(23,"Due Date"),n(),o(24,"input",114),C("ngModelChange",function(t){p(e);let s=d(3);return y(s.editForm.due_date,t)||(s.editForm.due_date=t),_(t)}),n()(),o(25,"div",115)(26,"label",112),a(27,"Notes"),n(),o(28,"input",113),C("ngModelChange",function(t){p(e);let s=d(3);return y(s.editForm.notes,t)||(s.editForm.notes=t),_(t)}),n()()()}if(r&2){let e=d(3);l(4),f("ngModel",e.editForm.so_number),l(4),f("ngModel",e.editForm.customer_name),l(4),f("ngModel",e.editForm.po_number),l(4),f("ngModel",e.editForm.tool_model),l(4),f("ngModel",e.editForm.order_date),l(4),f("ngModel",e.editForm.due_date),l(4),f("ngModel",e.editForm.notes)}}function Tt(r,m){if(r&1&&(o(0,"div",9),b(1,It,41,8,"div",105)(2,St,29,7,"div",105),n()),r&2){let e=d(2);l(),c("ngIf",!e.isEditing),l(),c("ngIf",e.isEditing)}}function Pt(r,m){if(r&1){let e=w();o(0,"div",8)(1,"div",116),u(2,"i",117),o(3,"p",10),a(4,"No tools defined for this order"),n(),o(5,"p",30),a(6,"Import an Excel file with tool definitions or add tools manually"),n(),o(7,"button",118),g("click",function(){p(e);let t=d(2);return _(t.showAddToolModal=!0)}),u(8,"i",119),a(9," Add Tool "),n()()()}}function Mt(r,m){if(r&1){let e=w();o(0,"button",162),g("click",function(){p(e);let t=d(3);return _(t.partSearchQuery="")}),u(1,"i",163),n()}}function Et(r,m){if(r&1&&(o(0,"span",164),a(1),n()),r&2){let e=d(3);l(),v(e.outOfStockCount)}}function Ot(r,m){if(r&1&&(o(0,"span",169),a(1),n()),r&2){let e=d().$implicit;l(),x("[",e.tool_model,"]")}}function Dt(r,m){if(r&1){let e=w();o(0,"li")(1,"a",133),g("click",function(){let t=p(e).$implicit,s=d(4);return _(s.toolFilter=t.id)}),a(2),b(3,Ot,2,1,"span",168),n()()}if(r&2){let e=m.$implicit,i=d(4);l(),S("active",i.toolFilter===e.id),l(),x(" ",e.tool_number,""),l(),c("ngIf",e.tool_model)}}function Vt(r,m){if(r&1){let e=w();o(0,"div",129)(1,"button",165),u(2,"i",166),a(3),n(),o(4,"ul",132)(5,"li")(6,"a",133),g("click",function(){p(e);let t=d(3);return _(t.toolFilter=null)}),a(7,"All Tools"),n()(),o(8,"li"),u(9,"hr",167),n(),b(10,Dt,4,4,"li",160),n()()}if(r&2){let e=d(3);l(),c("ngClass",e.toolFilter?"btn-primary":"btn-outline-secondary"),l(2),x(" ",e.toolFilter?e.getToolFilterLabel(e.toolFilter):"All Tools"," "),l(3),S("active",!e.toolFilter),l(4),c("ngForOf",e.tools)}}function Lt(r,m){if(r&1&&(o(0,"div",170),a(1),n()),r&2){let e=d(3);l(),ee(" ",e.sortedLineItems.length," of ",e.lineItemsWithPicks.length,' parts match "',e.partSearchQuery,'" ')}}function At(r,m){r&1&&u(0,"i",176)}function Nt(r,m){if(r&1&&(o(0,"small",177),a(1),n()),r&2){let e=d().$implicit;l(),v(e.tool_model)}}function Wt(r,m){if(r&1){let e=w();o(0,"span",171),g("click",function(){let t=p(e).$implicit,s=d(3);return _(s.toolFilter=s.toolFilter===t.id?null:t.id)}),o(1,"span",172),a(2),o(3,"small",173),a(4),n(),b(5,At,1,0,"i",174),n(),b(6,Nt,2,1,"small",175),n()}if(r&2){let e=m.$implicit,i=d(3);T("outline",i.toolFilter===e.id?"2px solid #0d6efd":"none"),c("ngClass",ae(8,mt,i.getToolProgress(e.id)===100,i.getToolProgress(e.id)>0&&i.getToolProgress(e.id)<100,i.getToolProgress(e.id)===0))("title",i.getToolTooltip(e)),l(2),x(" ",e.tool_number," "),l(2),x("",i.getToolProgress(e.id),"%"),l(),c("ngIf",i.getToolProgress(e.id)===100),l(),c("ngIf",e.tool_model)}}function Ft(r,m){if(r&1){let e=w();o(0,"button",208),g("click",function(){p(e);let t=d(2).$implicit,s=d(3);return _(s.handlePickAllInLocation(s.getLocationGroup(t)))}),u(1,"i",209),a(2),n()}if(r&2){let e=d(2).$implicit,i=d(3);c("disabled",i.isSubmitting!==null),l(2),x(" Pick All in ",i.getLocationGroup(e)," ")}}function Bt(r,m){if(r&1&&(o(0,"tr",203)(1,"td",204)(2,"div",147),u(3,"i",205),o(4,"strong"),a(5),n(),o(6,"span",122),a(7),n(),o(8,"span",206),a(9),n(),b(10,Ft,3,2,"button",207),n()()()),r&2){let e=d().$implicit,i=d(3);l(5),v(i.getLocationGroup(e)),l(2),x("",i.getLocationGroupCount(e)," items"),l(2),x("",i.getLocationGroupRemaining(e)," remaining"),l(),c("ngIf",i.getLocationGroupRemaining(e)>0)}}function qt(r,m){r&1&&(o(0,"span",218),u(1,"i",219),a(2," Complete "),n())}function Qt(r,m){if(r&1&&(o(0,"span",220),a(1),n()),r&2){let e=d(2).$implicit,i=d(3);l(),O(" ",i.getAssemblyGroupPickedCount(e),"/",i.getAssemblyGroupCount(e)," picked ")}}function jt(r,m){if(r&1&&(o(0,"div",221)(1,"div",222),u(2,"div",32),n(),o(3,"span",30),a(4),n()()),r&2){let e=d(2).$implicit,i=d(3);l(2),T("width",i.getAssemblyGroupProgress(e),"%")("background-color","var(--color-purple)"),l(2),x("",i.getAssemblyGroupProgress(e),"%")}}function Ut(r,m){if(r&1&&(o(0,"tr",210)(1,"td",204)(2,"div",211),u(3,"i",212),o(4,"strong",213),a(5),n(),o(6,"span",214),a(7),n(),b(8,qt,3,0,"span",215)(9,Qt,2,2,"span",216)(10,jt,5,5,"div",217),n()()()),r&2){let e=d().$implicit,i=d(3);l(5),v(e.assembly_group||"No Assembly"),l(2),x("",i.getAssemblyGroupCount(e)," parts"),l(),c("ngIf",i.isAssemblyGroupComplete(e)),l(),c("ngIf",!i.isAssemblyGroupComplete(e)&&i.getAssemblyGroupPickedCount(e)>0),l(),c("ngIf",!i.isAssemblyGroupComplete(e))}}function Rt(r,m){if(r&1){let e=w();o(0,"button",223),g("click",function(){p(e);let t=d().$implicit,s=d(3);return _(s.toggleExpanded(t.id))}),u(1,"i",135),n()}if(r&2){let e=d().$implicit,i=d(3);l(),c("ngClass",i.expandedItems.has(e.id)?"bi-chevron-down":"bi-chevron-right")}}function Gt(r,m){r&1&&(o(0,"span",224),u(1,"i",225),a(2," Issue "),n())}function Ht(r,m){if(r&1&&(o(0,"span",226),a(1),n()),r&2){let e=d().$implicit,i=d(3);l(),O(" ",e.tool_ids.length," of ",i.tools.length," tools ")}}function zt(r,m){if(r&1&&(o(0,"span",227),a(1),n()),r&2){let e=d().$implicit,i=d(3);c("ngClass",H(2,ie,i.isItemComplete(e),i.isItemPartial(e)&&!i.hasOpenIssue(e.id),i.hasOpenIssue(e.id),!i.isItemComplete(e)&&!i.isItemPartial(e)&&!i.hasOpenIssue(e.id))),l(),x(" Assy: ",e.assembly_group," ")}}function $t(r,m){if(r&1&&(o(0,"span",123),u(1,"i",228),a(2),n()),r&2){let e=d().$implicit;l(2),x("",e.location," ")}}function Kt(r,m){if(r&1&&(o(0,"span",229),a(1,"-"),n()),r&2){let e=d().$implicit,i=d(3);c("ngClass",i.isItemComplete(e)?"text-success-emphasis":"text-muted")}}function Yt(r,m){if(r&1&&(o(0,"span",229),a(1),n()),r&2){let e=d().$implicit,i=d(3);c("ngClass",se(2,pt,e.qty_available<e.total_qty_needed&&i.isItemPartial(e)&&!i.hasOpenIssue(e.id),i.hasOpenIssue(e.id),i.isItemComplete(e),e.qty_available<e.total_qty_needed&&!i.isItemComplete(e)&&!i.isItemPartial(e)&&!i.hasOpenIssue(e.id),e.qty_available>=e.total_qty_needed&&!i.isItemComplete(e)&&!i.isItemPartial(e)&&!i.hasOpenIssue(e.id))),l(),x(" ",e.qty_available," ")}}function Xt(r,m){if(r&1&&(o(0,"span",229),a(1,"-"),n()),r&2){let e=d().$implicit,i=d(3);c("ngClass",H(1,ie,i.isItemComplete(e),i.isItemPartial(e)&&!i.hasOpenIssue(e.id),i.hasOpenIssue(e.id),!i.isItemComplete(e)&&!i.isItemPartial(e)&&!i.hasOpenIssue(e.id)))}}function Jt(r,m){r&1&&u(0,"i",230)}function Zt(r,m){if(r&1){let e=w();o(0,"button",231),g("click",function(){p(e);let t=d().$implicit,s=d(3);return _(s.openBOMDialog(t))}),u(1,"i",232),n()}}function ei(r,m){if(r&1){let e=w();o(0,"button",233),g("click",function(){p(e);let t=d().$implicit,s=d(3);return _(s.handleUndoLastPick(t))}),u(1,"i",234),n()}if(r&2){let e=d().$implicit,i=d(3);c("disabled",i.isSubmitting===e.id)}}function ti(r,m){if(r&1){let e=w();o(0,"button",235),g("click",function(){p(e);let t=d().$implicit,s=d(3);return _(s.openDistributeDialog(t))}),u(1,"i",236),n()}if(r&2){let e=d().$implicit,i=d(3);c("disabled",i.isSubmitting===e.id)}}function ii(r,m){if(r&1){let e=w();o(0,"button",237),g("click",function(){p(e);let t=d().$implicit,s=d(3);return _(s.openPartialPickModal(t))}),u(1,"i",238),n()}if(r&2){let e=d().$implicit,i=d(3);c("disabled",i.isSubmitting===e.id)}}function ni(r,m){if(r&1){let e=w();o(0,"button",239),g("click",function(){p(e);let t=d().$implicit,s=d(3);return _(s.openReportIssueModal(t))}),u(1,"i",138),n()}if(r&2){let e=d().$implicit,i=d(3);c("ngClass",i.hasOpenIssue(e.id)?"btn-danger":"btn-outline-warning")("disabled",i.isSubmitting===e.id)}}function oi(r,m){if(r&1&&(o(0,"span",253),a(1),n()),r&2){let e=d().$implicit;l(),x(' "',e.pick.notes,'" ')}}function ri(r,m){if(r&1){let e=w();o(0,"div",246)(1,"div",247)(2,"span",248),a(3),n(),o(4,"span",10),u(5,"i",249),a(6),n(),o(7,"span",10),u(8,"i",250),a(9),n(),o(10,"span",10),a(11),n(),b(12,oi,2,1,"span",251),n(),o(13,"button",252),g("click",function(){let t=p(e).$implicit,s=d(5);return _(s.handleDeletePick(t.pick))}),u(14,"i",201),n()()}if(r&2){let e=m.$implicit,i=m.index,t=d(2).$implicit,s=d(3);S("border-primary",i===0),l(2),c("ngClass",i===0?"bg-primary":"bg-secondary"),l(),x(" ",e.pick.qty_picked,"x "),l(3),x("",e.toolNumber," "),l(3),x("",e.pick.picked_by||"Unknown"," "),l(2),x(" ",s.utils.formatDateTime(e.pick.picked_at)," "),l(),c("ngIf",e.pick.notes),l(),c("disabled",s.isSubmitting===t.id)}}function li(r,m){if(r&1&&(o(0,"tr",154)(1,"td",240)(2,"div",241)(3,"div",242),u(4,"i",243),o(5,"strong"),a(6,"Pick History"),n(),o(7,"span",122),a(8),n()(),o(9,"div",244),b(10,ri,15,9,"div",245),n()()()()),r&2){let e=d().$implicit,i=d(3);l(8),x("",i.getPickHistoryForItem(e.id).length," records"),l(2),c("ngForOf",i.getPickHistoryForItem(e.id))}}function ai(r,m){if(r&1){let e=w();R(0),b(1,Bt,11,4,"tr",178)(2,Ut,11,5,"tr",179),o(3,"tr",180)(4,"td",181),b(5,Rt,2,1,"button",182),n(),o(6,"td")(7,"div",147)(8,"span",183),g("click",function(t){let s=p(e).$implicit,h=d(3);return _(h.openPartDetail(s.part_number,t))}),a(9),n(),o(10,"button",184),g("click",function(t){let s=p(e).$implicit,h=d(3);return _(h.copyPartNumber(s.part_number,t))}),u(11,"i",135),n()(),b(12,Gt,3,0,"span",185)(13,Ht,2,2,"span",186)(14,zt,2,7,"span",187),n(),o(15,"td"),u(16,"app-classification-badge",188),n(),o(17,"td",189),a(18),n(),o(19,"td"),b(20,$t,3,1,"span",190)(21,Kt,2,1,"span",191),n(),o(22,"td",181),b(23,Yt,2,8,"span",191)(24,Xt,2,6,"span",191),n(),o(25,"td",181)(26,"span",192),b(27,Jt,1,0,"i",193),a(28),n()(),o(29,"td")(30,"div",194),b(31,Zt,2,0,"button",195)(32,ei,2,1,"button",196)(33,ti,2,1,"button",197)(34,ii,2,1,"button",198)(35,ni,2,2,"button",199),o(36,"button",200),g("click",function(){let t=p(e).$implicit,s=d(3);return _(s.openDeleteLineItemModal(t))}),u(37,"i",201),n()()()(),b(38,li,11,2,"tr",202),G()}if(r&2){let e=m.$implicit,i=m.index,t=d(3);l(),c("ngIf",t.sortMode==="location"&&t.shouldShowLocationHeader(e,i)),l(),c("ngIf",t.sortMode==="assembly"&&t.shouldShowAssemblyHeader(e,i)),l(),S("table-success",t.isItemComplete(e))("table-warning",t.isItemPartial(e))("table-danger",t.hasOpenIssue(e.id))("keyboard-selected",t.keyboardSelectedIndex===i),c("id","line-item-"+i),l(2),c("ngIf",t.getPickHistoryForItem(e.id).length>0),l(4),v(e.part_number),l(2),c("ngClass",t.copiedPartNumber===e.part_number?"bi-check-lg text-success":"bi-copy"),l(),c("ngIf",t.hasOpenIssue(e.id)),l(),c("ngIf",e.tool_ids&&e.tool_ids.length>0&&e.tool_ids.length<t.tools.length),l(),c("ngIf",e.assembly_group&&t.sortMode!=="assembly"),l(2),c("classification",t.getPartClassification(e.part_number))("size","sm"),l(),c("ngClass",H(36,ie,t.isItemComplete(e),t.isItemPartial(e)&&!t.hasOpenIssue(e.id),t.hasOpenIssue(e.id),!t.isItemComplete(e)&&!t.isItemPartial(e)&&!t.hasOpenIssue(e.id))),l(),x(" ",e.description||"-"," "),l(2),c("ngIf",e.location),l(),c("ngIf",!e.location),l(2),c("ngIf",e.qty_available!==null&&e.qty_available!==void 0),l(),c("ngIf",e.qty_available===null||e.qty_available===void 0),l(2),c("ngClass",t.isItemComplete(e)?"pill-complete":t.isItemPartial(e)?"pill-partial":"pill-pending"),l(),c("ngIf",t.isItemComplete(e)),l(),O(" ",e.total_picked,"/",e.total_qty_needed," "),l(3),c("ngIf",t.isAssemblyPart(e.part_number)),l(),c("ngIf",t.getPickHistoryForItem(e.id).length>0),l(),c("ngIf",t.isItemComplete(e)),l(),c("ngIf",!t.isItemComplete(e)),l(),c("ngIf",!t.isItemComplete(e)),l(),c("disabled",t.isSubmitting===e.id),l(2),c("ngIf",t.expandedItems.has(e.id))}}function si(r,m){r&1&&(o(0,"div",254),u(1,"i",255),o(2,"p"),a(3,"No line items for this order"),n()())}function di(r,m){if(r&1){let e=w();o(0,"div")(1,"div",120)(2,"h2",121),a(3,"Picking"),n(),o(4,"span",122),a(5),n(),o(6,"span",123),a(7),n(),o(8,"div",124)(9,"span",125),u(10,"i",126),n(),o(11,"input",127),C("ngModelChange",function(t){p(e);let s=d(2);return y(s.partSearchQuery,t)||(s.partSearchQuery=t),_(t)}),n(),b(12,Mt,2,0,"button",128),n(),o(13,"div",129)(14,"button",130),u(15,"i",131),a(16),n(),o(17,"ul",132)(18,"li")(19,"a",133),g("click",function(){p(e);let t=d(2);return _(t.setSortMode("part_number"))}),a(20,"Sort by Part Number"),n()(),o(21,"li")(22,"a",133),g("click",function(){p(e);let t=d(2);return _(t.setSortMode("location"))}),a(23,"Sort by Location"),n()(),o(24,"li")(25,"a",133),g("click",function(){p(e);let t=d(2);return _(t.setSortMode("assembly"))}),a(26,"Sort by Assembly"),n()()()(),o(27,"button",134),g("click",function(){p(e);let t=d(2);return _(t.toggleHideCompleted())}),u(28,"i",135),o(29,"span",136),a(30),n()(),o(31,"button",137),g("click",function(){p(e);let t=d(2);return _(t.toggleShowOutOfStockOnly())}),u(32,"i",138),o(33,"span",136),a(34,"Out of Stock"),n(),b(35,Et,2,1,"span",139),n(),b(36,Vt,11,5,"div",140),o(37,"div",141)(38,"button",23),g("click",function(){p(e);let t=d(2);return _(t.showManageToolsModal=!0)}),u(39,"i",142),a(40," Manage Tools "),n(),o(41,"button",143),g("click",function(){p(e);let t=d(2);return _(t.showAddLineItemModal=!0)}),u(42,"i",119),a(43," Add Part "),n()()(),b(44,Lt,2,3,"div",144),o(45,"div",145)(46,"div",146)(47,"div",147)(48,"span",30),a(49,"Tools:"),n(),o(50,"div",148),b(51,Wt,7,12,"span",149),n()(),o(52,"div",147)(53,"span",30),a(54,"Total:"),n(),o(55,"span",150),a(56),n()()()(),o(57,"div",8)(58,"div",151)(59,"div",152)(60,"table",153)(61,"thead")(62,"tr",154),u(63,"th",155),o(64,"th"),a(65,"Part Number"),n(),o(66,"th",156),a(67,"Type"),n(),o(68,"th"),a(69,"Description"),n(),o(70,"th"),a(71,"Location"),n(),o(72,"th",157),a(73,"Stock"),n(),o(74,"th",158),a(75,"Total"),n(),o(76,"th",159),a(77,"Actions"),n()()(),o(78,"tbody"),b(79,ai,39,41,"ng-container",160),n()()()()(),b(80,si,4,0,"div",161),n()}if(r&2){let e=d(2);l(5),x("",e.lineItems.length," parts"),l(2),x("",e.tools.length," tool(s)"),l(4),f("ngModel",e.partSearchQuery),l(),c("ngIf",e.partSearchQuery),l(4),x(" ",e.sortMode==="part_number"?"Part Number":e.sortMode==="location"?"Location":"Assembly"," "),l(3),S("active",e.sortMode==="part_number"),l(3),S("active",e.sortMode==="location"),l(3),S("active",e.sortMode==="assembly"),l(2),c("ngClass",e.hideCompleted?"btn-primary":"btn-outline-secondary"),l(),c("ngClass",e.hideCompleted?"bi-eye-slash-fill":"bi-eye"),l(2),v(e.hideCompleted?"Show All":"Hide Done"),l(),c("ngClass",e.showOutOfStockOnly?"btn-warning":"btn-outline-secondary"),l(4),c("ngIf",e.outOfStockCount>0),l(),c("ngIf",e.tools.length>1),l(8),c("ngIf",e.partSearchQuery),l(7),c("ngForOf",e.tools),l(5),O("",e.completedLineItems,"/",e.totalLineItems," parts"),l(23),c("ngForOf",e.sortedLineItems),l(),c("ngIf",e.sortedLineItems.length===0)}}function ci(r,m){r&1&&u(0,"div",256)}function mi(r,m){r&1&&(o(0,"div",257),a(1," No tools defined yet "),n())}function pi(r,m){if(r&1&&(o(0,"span",264),a(1),n()),r&2){let e=d().$implicit;l(),v(e.tool_model)}}function _i(r,m){if(r&1&&(o(0,"span",265),a(1),n()),r&2){let e=d().$implicit;l(),x("SN: ",e.serial_number,"")}}function ui(r,m){if(r&1){let e=w();o(0,"div",260)(1,"div")(2,"strong"),a(3),n(),b(4,pi,2,1,"span",261)(5,_i,2,1,"span",262),o(6,"div",30),a(7),n()(),o(8,"button",263),g("click",function(){let t=p(e).$implicit,s=d(3);return _(s.handleDeleteTool(t))}),u(9,"i",201),n()()}if(r&2){let e=m.$implicit,i=d(3);l(3),v(e.tool_number),l(),c("ngIf",e.tool_model),l(),c("ngIf",e.serial_number),l(2),x("Progress: ",i.getToolProgress(e.id),"%"),l(),c("disabled",i.getToolProgress(e.id)>0)("title",i.getToolProgress(e.id)>0?"Cannot delete tool with picks":"Delete tool")}}function gi(r,m){if(r&1&&(o(0,"div",258),b(1,ui,10,6,"div",259),n()),r&2){let e=d(2);l(),c("ngForOf",e.tools)}}function hi(r,m){r&1&&u(0,"div",256)}function bi(r,m){r&1&&u(0,"div",256)}function xi(r,m){if(r&1&&(o(0,"p",275),a(1),n()),r&2){let e=d(3);l(),v(e.partialPickItem.description)}}function vi(r,m){if(r&1&&(o(0,"option",276),a(1),n()),r&2){let e=m.$implicit,i=d(3);c("value",e.id),l(),ee(" ",e.tool_number," (",i.getToolPicked(i.partialPickItem,e),"/",i.partialPickItem.qty_per_unit," picked) ")}}function fi(r,m){if(r&1&&(o(0,"small",10),a(1),n()),r&2){let e=d(3);l(),x(" Remaining for this tool: ",e.getRemainingForToolById(e.partialPickItem,e.partialPickToolId)," ")}}function yi(r,m){if(r&1){let e=w();o(0,"div",51)(1,"div",52)(2,"strong"),a(3),n(),b(4,xi,2,1,"p",266),n(),o(5,"div",52)(6,"label",53),a(7,"Select Tool"),n(),o(8,"select",267),C("ngModelChange",function(t){p(e);let s=d(2);return y(s.partialPickToolId,t)||(s.partialPickToolId=t),_(t)}),b(9,vi,2,4,"option",268),n()(),o(10,"div",52)(11,"label",53),a(12,"Quantity to Pick"),n(),o(13,"div",269)(14,"button",270),g("click",function(){p(e);let t=d(2);return _(t.partialPickQty=t.Math.max(1,t.partialPickQty-1))}),u(15,"i",271),n(),o(16,"input",272),C("ngModelChange",function(t){p(e);let s=d(2);return y(s.partialPickQty,t)||(s.partialPickQty=t),_(t)}),n(),o(17,"button",270),g("click",function(){p(e);let t=d(2);return _(t.partialPickQty=t.partialPickQty+1)}),u(18,"i",70),n()(),b(19,fi,2,1,"small",273),n(),o(20,"div",52)(21,"label",53),a(22,"Note (optional)"),n(),o(23,"textarea",274),C("ngModelChange",function(t){p(e);let s=d(2);return y(s.partialPickNote,t)||(s.partialPickNote=t),_(t)}),n()()()}if(r&2){let e=d(2);l(3),v(e.partialPickItem.part_number),l(),c("ngIf",e.partialPickItem.description),l(4),f("ngModel",e.partialPickToolId),l(),c("ngForOf",e.tools),l(7),f("ngModel",e.partialPickQty),l(3),c("ngIf",e.partialPickToolId),l(4),f("ngModel",e.partialPickNote)}}function Ci(r,m){r&1&&u(0,"div",256)}function wi(r,m){if(r&1&&(o(0,"div",51)(1,"p"),a(2,"This will remove all picks for this part on the selected tool."),n(),o(3,"div",277)(4,"strong"),a(5),n(),u(6,"br"),o(7,"span",10),a(8),n()()()),r&2){let e=d(2);l(5),v(e.undoToolData.item.part_number),l(3),O("",e.undoToolData.pickedQty,"x will be removed from ",e.undoToolData.toolNumber,"")}}function ki(r,m){r&1&&u(0,"div",256)}function Ii(r,m){if(r&1&&(o(0,"p",275),a(1),n()),r&2){let e=d(3);l(),v(e.issueReportItem.description)}}function Si(r,m){if(r&1){let e=w();o(0,"div",51)(1,"div",52)(2,"strong"),a(3),n(),b(4,Ii,2,1,"p",266),n(),o(5,"div",52)(6,"label",53),a(7,"Issue Type"),n(),o(8,"select",267),C("ngModelChange",function(t){p(e);let s=d(2);return y(s.issueType,t)||(s.issueType=t),_(t)}),o(9,"option",278),a(10,"Out of Stock"),n(),o(11,"option",279),a(12,"Damaged"),n(),o(13,"option",280),a(14,"Wrong Part"),n(),o(15,"option",281),a(16,"Missing"),n(),o(17,"option",282),a(18,"Other"),n()()(),o(19,"div",52)(20,"label",53),a(21,"Description (optional)"),n(),o(22,"textarea",283),C("ngModelChange",function(t){p(e);let s=d(2);return y(s.issueDescription,t)||(s.issueDescription=t),_(t)}),n()()()}if(r&2){let e=d(2);l(3),v(e.issueReportItem.part_number),l(),c("ngIf",e.issueReportItem.description),l(4),f("ngModel",e.issueType),l(14),f("ngModel",e.issueDescription)}}function Ti(r,m){r&1&&u(0,"div",256)}function Pi(r,m){if(r&1&&(o(0,"div",277),u(1,"i",98),a(2),n()),r&2){let e=d(3);l(2),x(" This part has existing picks (",e.deleteLineItemTarget.total_picked," picked). You must undo all picks before removing. ")}}function Mi(r,m){if(r&1&&(o(0,"div",51)(1,"p"),a(2,"Are you sure you want to remove "),o(3,"strong"),a(4),n(),a(5," from this order? This cannot be undone."),n(),b(6,Pi,3,1,"div",284),n()),r&2){let e=d(2);l(4),v(e.deleteLineItemTarget.part_number),l(2),c("ngIf",e.deleteLineItemTarget.total_picked>0)}}function Ei(r,m){r&1&&u(0,"div",256)}function Oi(r,m){if(r&1&&(o(0,"div",51)(1,"p"),a(2,"Are you sure you want to undo the last pick for "),o(3,"strong"),a(4),n(),a(5,"?"),n(),o(6,"p",275),a(7,"This will remove the most recent pick from this item."),n()()),r&2){let e=d(2);l(4),v(e.undoPickTarget.part_number)}}function Di(r,m){r&1&&u(0,"div",256)}function Vi(r,m){if(r&1){let e=w();o(0,"div",285),g("click",function(){p(e);let t=d(2);return _(t.showPrintModal=!1)}),n()}}function Li(r,m){if(r&1){let e=w();o(0,"div"),b(1,gt,9,0,"div",11)(2,ht,4,0,"div",11)(3,bt,4,0,"div",12)(4,xt,5,1,"div",13)(5,vt,5,2,"div",14)(6,ft,8,1,"div",13),o(7,"div",15)(8,"a",16),u(9,"i",7),a(10," Back to Orders "),n(),o(11,"div",17)(12,"h1",18),a(13),n(),o(14,"select",19),C("ngModelChange",function(t){p(e);let s=d();return y(s.order.status,t)||(s.order.status=t),_(t)}),g("change",function(){p(e);let t=d();return _(t.handleStatusChange())}),o(15,"option",20),a(16,"Active"),n(),o(17,"option",21),a(18,"Complete"),n(),o(19,"option",22),a(20,"Cancelled"),n()(),o(21,"button",23),g("click",function(){p(e);let t=d();return _(t.handleExport())}),u(22,"i",24),a(23," Export "),n(),o(24,"button",25),g("click",function(){p(e);let t=d();return _(t.showPrintModal=!0)}),u(25,"i",26),a(26," Print "),n(),o(27,"button",27),g("click",function(){p(e);let t=d();return _(t.showSaveTemplateModal=!0)}),u(28,"i",28),a(29," Template "),n(),o(30,"div",29)(31,"span",30),a(32,"Progress:"),n(),o(33,"div",31),u(34,"div",32),n(),o(35,"span",33),a(36),n(),o(37,"span",30),a(38),n()(),b(39,yt,3,0,"button",34),n()(),o(40,"div",35)(41,"div",36),g("click",function(){p(e);let t=d();return _(!t.isEditing&&(t.isOrderInfoExpanded=!t.isOrderInfoExpanded))}),o(42,"div",37),u(43,"i",38),o(44,"span",39),a(45,"Order Information"),n(),b(46,Ct,2,1,"span",40),n(),b(47,wt,3,0,"button",41)(48,kt,5,0,"div",42),n(),b(49,Tt,3,2,"div",43),n(),b(50,Pt,10,0,"div",44)(51,di,81,23,"div",1),o(52,"div",45)(53,"div",46)(54,"div",47)(55,"div",48)(56,"h5",49),a(57,"Add Tool"),n(),o(58,"button",50),g("click",function(){p(e);let t=d();return _(t.showAddToolModal=!1)}),n()(),o(59,"div",51)(60,"div",52)(61,"label",53),a(62,"Tool Number"),n(),o(63,"input",54),C("ngModelChange",function(t){p(e);let s=d();return y(s.newToolNumber,t)||(s.newToolNumber=t),_(t)}),n()(),o(64,"div",52)(65,"label",53),a(66,"Tool Model"),n(),o(67,"input",54),C("ngModelChange",function(t){p(e);let s=d();return y(s.newToolModel,t)||(s.newToolModel=t),_(t)}),n()(),o(68,"div",52)(69,"label",53),a(70,"Serial Number (optional)"),n(),o(71,"input",55),C("ngModelChange",function(t){p(e);let s=d();return y(s.newToolSerial,t)||(s.newToolSerial=t),_(t)}),n()()(),o(72,"div",56)(73,"button",57),g("click",function(){p(e);let t=d();return _(t.showAddToolModal=!1)}),a(74,"Cancel"),n(),o(75,"button",58),g("click",function(){p(e);let t=d();return _(t.handleAddTool())}),a(76,"Add Tool"),n()()()()(),b(77,ci,1,0,"div",59),o(78,"div",45)(79,"div",46)(80,"div",47)(81,"div",48)(82,"h5",49),a(83,"Manage Tools"),n(),o(84,"button",50),g("click",function(){p(e);let t=d();return _(t.showManageToolsModal=!1)}),n()(),o(85,"div",51),b(86,mi,2,0,"div",60)(87,gi,2,1,"div",61),u(88,"hr"),o(89,"h6"),a(90,"Add New Tool"),n(),o(91,"div",62)(92,"div",63)(93,"input",64),C("ngModelChange",function(t){p(e);let s=d();return y(s.newToolNumber,t)||(s.newToolNumber=t),_(t)}),n()(),o(94,"div",65)(95,"input",66),C("ngModelChange",function(t){p(e);let s=d();return y(s.newToolModel,t)||(s.newToolModel=t),_(t)}),n()(),o(96,"div",67)(97,"input",68),C("ngModelChange",function(t){p(e);let s=d();return y(s.newToolSerial,t)||(s.newToolSerial=t),_(t)}),n()(),o(98,"div",67)(99,"button",69),g("click",function(){p(e);let t=d();return _(t.handleAddTool())}),u(100,"i",70),n()()()(),o(101,"div",56)(102,"button",57),g("click",function(){p(e);let t=d();return _(t.showManageToolsModal=!1)}),a(103,"Close"),n()()()()(),b(104,hi,1,0,"div",59),o(105,"div",45)(106,"div",46)(107,"div",47)(108,"div",48)(109,"h5",49),a(110,"Add Part"),n(),o(111,"button",50),g("click",function(){p(e);let t=d();return _(t.showAddLineItemModal=!1)}),n()(),o(112,"div",51)(113,"div",52)(114,"label",53),a(115,"Part Number *"),n(),o(116,"input",55),C("ngModelChange",function(t){p(e);let s=d();return y(s.newLineItem.part_number,t)||(s.newLineItem.part_number=t),_(t)}),n()(),o(117,"div",52)(118,"label",53),a(119,"Description"),n(),o(120,"input",55),C("ngModelChange",function(t){p(e);let s=d();return y(s.newLineItem.description,t)||(s.newLineItem.description=t),_(t)}),n()(),o(121,"div",52)(122,"label",53),a(123,"Location"),n(),o(124,"input",55),C("ngModelChange",function(t){p(e);let s=d();return y(s.newLineItem.location,t)||(s.newLineItem.location=t),_(t)}),n()(),o(125,"div",71)(126,"div",72)(127,"label",53),a(128,"Qty Per Unit"),n(),o(129,"input",73),C("ngModelChange",function(t){p(e);let s=d();return y(s.newLineItem.qty_per_unit,t)||(s.newLineItem.qty_per_unit=t),_(t)}),n()(),o(130,"div",72)(131,"label",53),a(132,"Total Needed"),n(),o(133,"input",73),C("ngModelChange",function(t){p(e);let s=d();return y(s.newLineItem.total_qty_needed,t)||(s.newLineItem.total_qty_needed=t),_(t)}),n()()()(),o(134,"div",56)(135,"button",57),g("click",function(){p(e);let t=d();return _(t.showAddLineItemModal=!1)}),a(136,"Cancel"),n(),o(137,"button",74),g("click",function(){p(e);let t=d();return _(t.handleAddLineItem())}),a(138,"Add Part"),n()()()()(),b(139,bi,1,0,"div",59),o(140,"div",45)(141,"div",46)(142,"div",47)(143,"div",48)(144,"h5",49),a(145,"Set Pick Quantity"),n(),o(146,"button",50),g("click",function(){p(e);let t=d();return _(t.showPartialPickModal=!1)}),n()(),b(147,yi,24,7,"div",75),o(148,"div",56)(149,"button",57),g("click",function(){p(e);let t=d();return _(t.showPartialPickModal=!1)}),a(150,"Cancel"),n(),o(151,"button",74),g("click",function(){p(e);let t=d();return _(t.handlePartialPick())}),a(152),n()()()()(),b(153,Ci,1,0,"div",59),o(154,"div",45)(155,"div",46)(156,"div",47)(157,"div",48)(158,"h5",49),a(159),n(),o(160,"button",50),g("click",function(){p(e);let t=d();return _(t.showUndoToolModal=!1)}),n()(),b(161,wi,9,3,"div",75),o(162,"div",56)(163,"button",57),g("click",function(){p(e);let t=d();return _(t.showUndoToolModal=!1)}),a(164,"Cancel"),n(),o(165,"button",76),g("click",function(){p(e);let t=d();return _(t.confirmUndoToolPick())}),u(166,"i",77),a(167," Undo Pick "),n()()()()(),b(168,ki,1,0,"div",59),o(169,"div",45)(170,"div",46)(171,"div",47)(172,"div",48)(173,"h5",49),a(174,"Report Issue"),n(),o(175,"button",50),g("click",function(){p(e);let t=d();return _(t.showReportIssueModal=!1)}),n()(),b(176,Si,23,4,"div",75),o(177,"div",56)(178,"button",57),g("click",function(){p(e);let t=d();return _(t.showReportIssueModal=!1)}),a(179,"Cancel"),n(),o(180,"button",76),g("click",function(){p(e);let t=d();return _(t.handleReportIssue())}),u(181,"i",78),a(182," Report Issue "),n()()()()(),b(183,Ti,1,0,"div",59),o(184,"div",45)(185,"div",46)(186,"div",47)(187,"div",48)(188,"h5",49),a(189,"Remove Part from Order"),n(),o(190,"button",50),g("click",function(){p(e);let t=d();return _(t.showDeleteLineItemModal=!1)}),n()(),b(191,Mi,7,2,"div",75),o(192,"div",56)(193,"button",57),g("click",function(){p(e);let t=d();return _(t.showDeleteLineItemModal=!1)}),a(194,"Cancel"),n(),o(195,"button",79),g("click",function(){p(e);let t=d();return _(t.handleDeleteLineItem())}),u(196,"i",80),a(197," Remove "),n()()()()(),b(198,Ei,1,0,"div",59),o(199,"div",45)(200,"div",46)(201,"div",47)(202,"div",48)(203,"h5",49),a(204,"Undo Last Pick"),n(),o(205,"button",50),g("click",function(){p(e);let t=d();return _(t.showUndoPickModal=!1)}),n()(),b(206,Oi,8,1,"div",75),o(207,"div",56)(208,"button",57),g("click",function(){p(e);let t=d();return _(t.showUndoPickModal=!1)}),a(209,"Cancel"),n(),o(210,"button",81),g("click",function(){p(e);let t=d();return _(t.confirmUndoPick())}),u(211,"i",77),a(212," Undo Pick "),n()()()()(),b(213,Di,1,0,"div",59),o(214,"app-save-as-template-dialog",82),C("showChange",function(t){p(e);let s=d();return y(s.showSaveTemplateModal,t)||(s.showSaveTemplateModal=t),_(t)}),g("saveTemplate",function(t){p(e);let s=d();return _(s.handleSaveAsTemplate(t))}),n(),u(215,"app-print-pick-list",83),b(216,Vi,1,0,"div",84),o(217,"app-distribute-inventory-dialog",85),C("showChange",function(t){p(e);let s=d();return y(s.showDistributeModal,t)||(s.showDistributeModal=t),_(t)}),g("distribute",function(t){p(e);let s=d();return _(s.handleDistribute(t))}),n(),o(218,"app-print-tag-dialog",86),g("close",function(){p(e);let t=d();return _(t.closePrintTagDialog())}),n()()}if(r&2){let e=d();l(),c("ngIf",e.isFullyPicked&&e.order.status==="active"),l(),c("ngIf",e.order.status==="complete"),l(),c("ngIf",e.order.status==="cancelled"),l(),c("ngIf",e.order.status==="active"&&e.utils.getDueDateStatus(e.order.due_date).status==="overdue"),l(),c("ngIf",e.order.status==="active"&&e.utils.getDueDateStatus(e.order.due_date).status==="due-soon"),l(),c("ngIf",e.overPickWarning),l(7),x("SO-",e.order.so_number,""),l(),f("ngModel",e.order.status),l(20),T("width",e.progressPercent,"%"),l(2),x("",e.progressPercent,"%"),l(2),O("(",e.completedLineItems,"/",e.totalLineItems," parts)"),l(),c("ngIf",e.isFullyPicked&&e.order.status==="active"),l(4),c("ngClass",e.isOrderInfoExpanded?"bi-chevron-down":"bi-chevron-right"),l(3),c("ngIf",!e.isOrderInfoExpanded&&!e.isEditing),l(),c("ngIf",!e.isEditing),l(),c("ngIf",e.isEditing),l(),c("ngIf",e.isOrderInfoExpanded||e.isEditing),l(),c("ngIf",e.tools.length===0),l(),c("ngIf",e.tools.length>0),l(),T("display",e.showAddToolModal?"block":"none"),S("show",e.showAddToolModal),l(11),f("ngModel",e.newToolNumber),c("placeholder",e.generateNextToolNumber()),l(4),f("ngModel",e.newToolModel),c("placeholder",e.order.tool_model||""),l(4),f("ngModel",e.newToolSerial),l(6),c("ngIf",e.showAddToolModal),l(),T("display",e.showManageToolsModal?"block":"none"),S("show",e.showManageToolsModal),l(8),c("ngIf",e.tools.length===0),l(),c("ngIf",e.tools.length>0),l(6),f("ngModel",e.newToolNumber),l(2),f("ngModel",e.newToolModel),c("placeholder",e.order.tool_model||"Model"),l(2),f("ngModel",e.newToolSerial),l(7),c("ngIf",e.showManageToolsModal),l(),T("display",e.showAddLineItemModal?"block":"none"),S("show",e.showAddLineItemModal),l(11),f("ngModel",e.newLineItem.part_number),l(4),f("ngModel",e.newLineItem.description),l(4),f("ngModel",e.newLineItem.location),l(5),f("ngModel",e.newLineItem.qty_per_unit),l(4),f("ngModel",e.newLineItem.total_qty_needed),l(4),c("disabled",!e.newLineItem.part_number.trim()),l(2),c("ngIf",e.showAddLineItemModal),l(),T("display",e.showPartialPickModal?"block":"none"),S("show",e.showPartialPickModal),l(7),c("ngIf",e.partialPickItem),l(4),c("disabled",!e.partialPickToolId||e.partialPickQty<1),l(),x(" Pick ",e.partialPickQty," "),l(),c("ngIf",e.showPartialPickModal),l(),T("display",e.showUndoToolModal?"block":"none"),S("show",e.showUndoToolModal),l(5),x("Undo Pick for ",e.undoToolData==null?null:e.undoToolData.toolNumber,"?"),l(2),c("ngIf",e.undoToolData),l(7),c("ngIf",e.showUndoToolModal),l(),T("display",e.showReportIssueModal?"block":"none"),S("show",e.showReportIssueModal),l(7),c("ngIf",e.issueReportItem),l(7),c("ngIf",e.showReportIssueModal),l(),T("display",e.showDeleteLineItemModal?"block":"none"),S("show",e.showDeleteLineItemModal),l(7),c("ngIf",e.deleteLineItemTarget),l(4),c("disabled",e.deleteLineItemTarget&&e.deleteLineItemTarget.total_picked>0),l(3),c("ngIf",e.showDeleteLineItemModal),l(),T("display",e.showUndoPickModal?"block":"none"),S("show",e.showUndoPickModal),l(7),c("ngIf",e.undoPickTarget),l(7),c("ngIf",e.showUndoPickModal),l(),f("show",e.showSaveTemplateModal),c("lineItemsCount",e.lineItems.length)("defaultToolModel",e.order.tool_model||null),l(),c("show",e.showPrintModal)("order",e.order)("tools",e.tools)("lineItems",e.lineItemsWithPicks),l(),c("ngIf",e.showPrintModal),l(),f("show",e.showDistributeModal),c("lineItem",e.distributeItem)("tools",e.tools)("getToolPicked",e.getToolPickedBound),l(),c("isOpen",e.showPrintTagDialog)("tagData",e.printTagData)}}var In=(()=>{class r{constructor(e,i,t,s,h,I,P,B,J,Ne,We,Fe){this.route=e,this.ordersService=i,this.picksService=t,this.lineItemsService=s,this.issuesService=h,this.settingsService=I,this.excelService=P,this.bomTemplatesService=B,this.activityLogService=J,this.partsService=Ne,this.modalService=We,this.utils=Fe,this.Math=Math,this.order=null,this.tools=[],this.lineItems=[],this.lineItemsWithPicks=[],this.picks=[],this.openIssues=new Set,this.loading=!0,this.isEditing=!1,this.isOrderInfoExpanded=!1,this.showAddToolModal=!1,this.showManageToolsModal=!1,this.showAddLineItemModal=!1,this.showPartialPickModal=!1,this.showUndoToolModal=!1,this.showReportIssueModal=!1,this.showSaveTemplateModal=!1,this.showPrintModal=!1,this.showDistributeModal=!1,this.showDeleteLineItemModal=!1,this.showUndoPickModal=!1,this.sortMode="part_number",this.hideCompleted=!1,this.showOutOfStockOnly=!1,this.toolFilter=null,this.expandedItems=new Set,this.isSubmitting=null,this.partSearchQuery="",this.keyboardSelectedIndex=-1,this.distributeItem=null,this.deleteLineItemTarget=null,this.undoPickTarget=null,this.overPickWarning=null,this.scrollToItemId=null,this.partsMap=new Map,this.showPrintTagDialog=!1,this.printTagData=null,this.editForm={so_number:"",po_number:"",customer_name:"",tool_model:"",order_date:"",due_date:"",notes:""},this.newToolNumber="",this.newToolModel="",this.newToolSerial="",this.newLineItem={part_number:"",description:"",location:"",qty_per_unit:1,total_qty_needed:1},this.partialPickItem=null,this.partialPickToolId="",this.partialPickQty=1,this.partialPickNote="",this.undoToolData=null,this.issueReportItem=null,this.issueType="out_of_stock",this.issueDescription="",this.copiedPartNumber=null,this.orderId=null,this.subscriptions=[],this.allToolsPicksMap=new Map,this.getToolPickedBound=this.getToolPicked.bind(this)}handleKeydown(e){let i=e.target;if(i.tagName==="INPUT"||i.tagName==="TEXTAREA"||i.tagName==="SELECT"||this.showPartialPickModal||this.showUndoToolModal||this.showReportIssueModal||this.showSaveTemplateModal||this.showPrintModal||this.showDistributeModal||this.showAddToolModal||this.showManageToolsModal||this.showAddLineItemModal||this.showDeleteLineItemModal||this.showUndoPickModal)return;let t=this.sortedLineItems;if(t.length!==0)switch(e.key){case"ArrowDown":case"j":e.preventDefault(),this.keyboardSelectedIndex<t.length-1&&(this.keyboardSelectedIndex++,this.scrollToSelectedItem());break;case"ArrowUp":case"k":e.preventDefault(),this.keyboardSelectedIndex>0?(this.keyboardSelectedIndex--,this.scrollToSelectedItem()):this.keyboardSelectedIndex===-1&&t.length>0&&(this.keyboardSelectedIndex=0,this.scrollToSelectedItem());break;case"Enter":case" ":if(this.keyboardSelectedIndex>=0&&this.keyboardSelectedIndex<t.length){e.preventDefault();let s=t[this.keyboardSelectedIndex];this.isItemComplete(s)||(this.tools.length===1?this.handleQuickPick(s,this.tools[0]):this.handlePickAllTools(s))}break;case"Escape":this.keyboardSelectedIndex=-1;break;case"Home":e.preventDefault(),t.length>0&&(this.keyboardSelectedIndex=0,this.scrollToSelectedItem());break;case"End":e.preventDefault(),t.length>0&&(this.keyboardSelectedIndex=t.length-1,this.scrollToSelectedItem());break}}scrollToSelectedItem(){setTimeout(()=>{let e=document.getElementById(`line-item-${this.keyboardSelectedIndex}`);e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})})}scrollToLineItemById(){if(!this.scrollToItemId)return;let i=this.sortedLineItems.findIndex(t=>t.id===this.scrollToItemId);i>=0?setTimeout(()=>{let t=document.getElementById(`line-item-${i}`);t&&t.scrollIntoView({behavior:"smooth",block:"center"}),this.scrollToItemId=null},100):this.scrollToItemId=null}ngOnInit(){let e=localStorage.getItem("picking-sort-preference");(e==="location"||e==="part_number"||e==="assembly")&&(this.sortMode=e),localStorage.getItem("picking-hide-completed")==="true"&&(this.hideCompleted=!0),localStorage.getItem("picking-show-out-of-stock")==="true"&&(this.showOutOfStockOnly=!0),this.route.params.subscribe(s=>{this.orderId=s.id,this.orderId&&(this.loadOrder(),this.picksService.loadPicksForOrder(this.orderId),this.issuesService.loadIssuesForOrder(this.orderId))}),this.subscriptions.push(this.picksService.lineItemsWithPicks$.subscribe(s=>{this.lineItemsWithPicks=s,this.updateAllToolsPicksMap(),this.scrollToItemId&&this.scrollToLineItemById()}),this.picksService.picks$.subscribe(s=>{this.picks=s,this.updateAllToolsPicksMap()}),this.issuesService.issues$.subscribe(s=>{this.openIssues=new Set(s.filter(h=>h.status==="open").map(h=>h.line_item_id))}),this.partsService.parts$.subscribe(s=>{this.partsMap=new Map(s.map(h=>[h.part_number,h]))}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}updateAllToolsPicksMap(){this.allToolsPicksMap=this.picksService.getPicksForAllTools()}loadOrder(){return k(this,null,function*(){if(!this.orderId)return;this.loading=!0;let e=yield this.ordersService.getOrder(this.orderId);this.order=e.order,this.tools=e.tools,this.lineItems=e.lineItems,this.loading=!1})}get sortModeValue(){return this.sortMode}set sortModeValue(e){this.sortMode=e,localStorage.setItem("picking-sort-preference",e)}get sortedLineItems(){let e=[...this.lineItemsWithPicks];if(this.partSearchQuery.trim()){let i=this.partSearchQuery.toLowerCase();e=e.filter(t=>t.part_number.toLowerCase().includes(i)||t.description?.toLowerCase().includes(i)||t.location?.toLowerCase().includes(i))}return this.toolFilter&&(e=e.filter(i=>!i.tool_ids||i.tool_ids.length===0||i.tool_ids.includes(this.toolFilter))),this.hideCompleted&&(e=e.filter(i=>!this.isItemComplete(i))),this.showOutOfStockOnly&&(e=e.filter(i=>i.qty_available===0)),this.sortMode==="location"?e.sort((i,t)=>{let s=i.location||"",h=t.location||"";if(!s&&h)return 1;if(s&&!h)return-1;if(!s&&!h)return this.alphanumericCompare(i.part_number,t.part_number);let I=this.alphanumericCompare(s,h);return I!==0?I:this.alphanumericCompare(i.part_number,t.part_number)}):this.sortMode==="assembly"?e.sort((i,t)=>{let s=i.assembly_group||"",h=t.assembly_group||"";if(!s&&h)return 1;if(s&&!h)return-1;if(!s&&!h)return this.alphanumericCompare(i.part_number,t.part_number);let I=this.alphanumericCompare(s,h);return I!==0?I:this.alphanumericCompare(i.part_number,t.part_number)}):e.sort((i,t)=>this.alphanumericCompare(i.part_number,t.part_number)),e}alphanumericCompare(e,i){return e.localeCompare(i,void 0,{numeric:!0,sensitivity:"base"})}getLocationPrefix(e){if(!e)return"No Location";let i=e.split("-");return i.length>=2?`${i[0]}-${i[1]}`:i[0]||"No Location"}shouldShowLocationHeader(e,i){if(this.sortMode!=="location")return!1;if(i===0)return!0;let s=this.sortedLineItems[i-1];return this.getLocationPrefix(e.location)!==this.getLocationPrefix(s.location)}getLocationGroup(e){return this.getLocationPrefix(e.location)}getLocationGroupCount(e){let i=this.getLocationPrefix(e.location);return this.sortedLineItems.filter(t=>this.getLocationPrefix(t.location)===i).length}getLocationGroupRemaining(e){let i=this.getLocationPrefix(e.location);return this.sortedLineItems.filter(t=>this.getLocationPrefix(t.location)===i).reduce((t,s)=>t+s.remaining,0)}shouldShowAssemblyHeader(e,i){if(this.sortMode!=="assembly")return!1;if(i===0)return!0;let s=this.sortedLineItems[i-1];return(e.assembly_group||"")!==(s.assembly_group||"")}getAssemblyGroupCount(e){let i=e.assembly_group||"";return this.sortedLineItems.filter(t=>(t.assembly_group||"")===i).length}isAssemblyGroupComplete(e){let i=e.assembly_group||"";return this.sortedLineItems.filter(t=>(t.assembly_group||"")===i).every(t=>this.isItemComplete(t))}getAssemblyGroupPickedCount(e){let i=e.assembly_group||"";return this.sortedLineItems.filter(t=>(t.assembly_group||"")===i).filter(t=>this.isItemComplete(t)).length}getAssemblyGroupProgress(e){let i=e.assembly_group||"",t=this.sortedLineItems.filter(h=>(h.assembly_group||"")===i);if(t.length===0)return 0;let s=t.filter(h=>this.isItemComplete(h)).length;return Math.round(s/t.length*100)}setSortMode(e){this.sortMode=e,localStorage.setItem("picking-sort-preference",e)}toggleHideCompleted(){this.hideCompleted=!this.hideCompleted,localStorage.setItem("picking-hide-completed",String(this.hideCompleted))}toggleShowOutOfStockOnly(){this.showOutOfStockOnly=!this.showOutOfStockOnly,localStorage.setItem("picking-show-out-of-stock",String(this.showOutOfStockOnly))}get outOfStockCount(){return this.lineItemsWithPicks.filter(e=>e.qty_available===0).length}getToolNumberById(e){return this.tools.find(i=>i.id===e)?.tool_number||e}getToolTooltip(e){let i=[e.tool_number];return e.tool_model&&i.push(`Model: ${e.tool_model}`),e.serial_number&&i.push(`SN: ${e.serial_number}`),i.push(`Progress: ${this.getToolProgress(e.id)}%`),i.join(" | ")}getToolFilterLabel(e){let i=this.tools.find(t=>t.id===e);return i?i.tool_model?`${i.tool_number} [${i.tool_model}]`:i.tool_number:e}handlePickAllInLocation(e){return k(this,null,function*(){let i=this.sortedLineItems.filter(h=>this.getLocationPrefix(h.location)===e&&h.remaining>0);if(i.length===0)return;this.isSubmitting="batch";let t=this.settingsService.getUserName(),s=!1;for(let h of i)for(let I of this.tools){let P=this.getRemainingForTool(h,I);if(P>0){let B=yield this.picksService.recordPick(h.id,I.id,P,t);B&&"overPickWarning"in B&&B.overPickWarning&&(s=!0)}}s&&(this.overPickWarning="Some items may have been over-picked. Another user may have picked items at the same time. Please review the quantities.",setTimeout(()=>this.overPickWarning=null,8e3)),this.isSubmitting=null})}get totalLineItems(){return this.lineItemsWithPicks.length}get completedLineItems(){return this.lineItemsWithPicks.filter(e=>e.total_picked>=e.total_qty_needed).length}get progressPercent(){return this.totalLineItems>0?Math.round(this.completedLineItems/this.totalLineItems*100):0}get isFullyPicked(){return this.progressPercent===100&&this.totalLineItems>0}getToolProgress(e){let i=this.picksService.getPicksForTool(e),t=this.lineItems.filter(I=>!I.tool_ids||I.tool_ids.length===0||I.tool_ids.includes(e)),s=t.length,h=t.filter(I=>(i.get(I.id)||0)>=I.qty_per_unit).length;return s>0?Math.round(h/s*100):0}getToolLabel(e){return e.tool_number.includes("-")&&e.tool_number.split("-").pop()||e.tool_number.slice(-2)}getToolPicked(e,i){return this.allToolsPicksMap.get(i.id)?.get(e.id)||0}getRemainingForTool(e,i){return e.qty_per_unit-this.getToolPicked(e,i)}getRemainingForToolById(e,i){let t=this.tools.find(s=>s.id===i);return t?this.getRemainingForTool(e,t):0}isToolComplete(e,i){return this.getToolPicked(e,i)>=e.qty_per_unit}isToolPartial(e,i){let t=this.getToolPicked(e,i);return t>0&&t<e.qty_per_unit}isItemComplete(e){return e.remaining===0}isItemPartial(e){return e.total_picked>0&&e.remaining>0}getRemainingToolsCount(e){return this.tools.filter(i=>!this.isToolComplete(e,i)).length}hasOpenIssue(e){return this.openIssues.has(e)}getToolButtonClass(e,i){return this.isToolComplete(e,i)?"btn-success":this.isToolPartial(e,i)?"btn-warning":"btn-light"}getToolButtonTitle(e,i){let t=this.getToolPicked(e,i),s=e.qty_per_unit;return this.isToolComplete(e,i)?`${i.tool_number}: Complete - Click to undo`:this.isToolPartial(e,i)?`${i.tool_number}: Partial (${t}/${s}) - Click for options`:`${i.tool_number}: Click to pick ${s}`}getPickHistoryForItem(e){let i=this.picks.filter(t=>t.line_item_id===e);return i.sort((t,s)=>new Date(s.picked_at).getTime()-new Date(t.picked_at).getTime()),i.map(t=>{let s=this.tools.find(h=>h.id===t.tool_id);return{pick:t,toolNumber:s?.tool_number||"Unknown"}})}toggleExpanded(e){this.expandedItems.has(e)?this.expandedItems.delete(e):this.expandedItems.add(e)}handleToolClick(e,i){return k(this,null,function*(){let t=this.getToolPicked(e,i),s=e.qty_per_unit;this.isToolComplete(e,i)?(this.undoToolData={item:e,toolId:i.id,toolNumber:i.tool_number,pickedQty:t},this.showUndoToolModal=!0):this.isToolPartial(e,i)?this.openPartialPickModal(e,i.id):yield this.handlePickForTool(e,i)})}handlePickForTool(e,i){return k(this,null,function*(){let t=this.getRemainingForTool(e,i);if(t<=0)return;this.isSubmitting=e.id,this.scrollToItemId=e.id;let s=this.settingsService.getUserName(),h=yield this.picksService.recordPick(e.id,i.id,t,s);h&&"overPickWarning"in h&&h.overPickWarning&&(this.overPickWarning=h.overPickWarning,setTimeout(()=>this.overPickWarning=null,8e3)),h&&this.settingsService.isTagPrintingEnabled()&&this.order&&(this.printTagData={partNumber:e.part_number,description:e.description,location:e.location,soNumber:this.order.so_number,toolNumber:i.tool_number,qtyPicked:t,pickedBy:s,pickedAt:new Date},this.showPrintTagDialog=!0),this.isSubmitting=null})}handleQuickPick(e,i){return k(this,null,function*(){yield this.handlePickForTool(e,i)})}handlePickAllTools(e){return k(this,null,function*(){this.isSubmitting=e.id,this.scrollToItemId=e.id;let i=this.settingsService.getUserName(),t=!1;for(let s of this.tools){let h=this.getRemainingForTool(e,s);if(h>0){let I=yield this.picksService.recordPick(e.id,s.id,h,i);I&&"overPickWarning"in I&&I.overPickWarning&&(t=!0)}}t&&(this.overPickWarning="Some items may have been over-picked. Another user may have picked items at the same time. Please review the quantities.",setTimeout(()=>this.overPickWarning=null,8e3)),this.isSubmitting=null})}handleUndoLastPick(e){this.getPickHistoryForItem(e.id).length!==0&&(this.undoPickTarget=e,this.showUndoPickModal=!0)}confirmUndoPick(){return k(this,null,function*(){if(!this.undoPickTarget)return;let e=this.getPickHistoryForItem(this.undoPickTarget.id);e.length!==0&&(this.isSubmitting=this.undoPickTarget.id,yield this.picksService.undoPick(e[0].pick.id,this.settingsService.getUserName()),this.isSubmitting=null,this.showUndoPickModal=!1,this.undoPickTarget=null)})}handleDeletePick(e){return k(this,null,function*(){this.isSubmitting=e.line_item_id,yield this.picksService.undoPick(e.id,this.settingsService.getUserName()),this.isSubmitting=null})}confirmUndoToolPick(){return k(this,null,function*(){if(!this.undoToolData)return;this.isSubmitting=this.undoToolData.item.id;let e=this.picks.filter(t=>t.line_item_id===this.undoToolData.item.id&&t.tool_id===this.undoToolData.toolId),i=this.settingsService.getUserName();for(let t of e)yield this.picksService.undoPick(t.id,i);this.isSubmitting=null,this.showUndoToolModal=!1,this.undoToolData=null})}openPartialPickModal(e,i){this.partialPickItem=e,this.partialPickToolId=i||(this.tools.length>0?this.tools[0].id:""),this.partialPickQty=1,this.partialPickNote="",this.showPartialPickModal=!0}handlePartialPick(){return k(this,null,function*(){if(!this.partialPickItem||!this.partialPickToolId||this.partialPickQty<1)return;let e=this.getRemainingForToolById(this.partialPickItem,this.partialPickToolId),i=Math.min(this.partialPickQty,e);if(i<=0)return;this.isSubmitting=this.partialPickItem.id,this.scrollToItemId=this.partialPickItem.id;let t=this.settingsService.getUserName(),s=yield this.picksService.recordPick(this.partialPickItem.id,this.partialPickToolId,i,t,this.partialPickNote||void 0);s&&"overPickWarning"in s&&s.overPickWarning&&(this.overPickWarning=s.overPickWarning,setTimeout(()=>this.overPickWarning=null,8e3)),this.isSubmitting=null,this.showPartialPickModal=!1,this.partialPickItem=null})}openReportIssueModal(e){this.issueReportItem=e,this.issueType="out_of_stock",this.issueDescription="",this.showReportIssueModal=!0}handleReportIssue(){return k(this,null,function*(){if(!this.issueReportItem||!this.orderId)return;let e=this.settingsService.getUserName();yield this.issuesService.reportIssue(this.issueReportItem.id,this.orderId,this.issueType,this.issueDescription||void 0,e),this.showReportIssueModal=!1,this.issueReportItem=null})}generateNextToolNumber(){return this.order?this.ordersService.generateNextToolNumber(this.order.so_number,this.tools):""}getOrderSummary(){if(!this.order)return"No details";let e=[this.order.customer_name,this.order.po_number?"PO: "+this.order.po_number:null,this.order.tool_model,this.order.due_date?"Due: "+this.utils.formatDate(this.order.due_date):null].filter(i=>i!=null);return e.length>0?e.join(" \u2022 "):"No details"}handleStatusChange(){return k(this,null,function*(){this.order&&(yield this.ordersService.updateOrder(this.order.id,{status:this.order.status}))})}handleMarkComplete(){return k(this,null,function*(){this.order&&(yield this.ordersService.updateOrder(this.order.id,{status:"complete"}),yield this.loadOrder())})}startEditing(){this.order&&(this.editForm={so_number:this.order.so_number||"",po_number:this.order.po_number||"",customer_name:this.order.customer_name||"",tool_model:this.order.tool_model||"",order_date:this.order.order_date||"",due_date:this.order.due_date||"",notes:this.order.notes||""},this.isEditing=!0,this.isOrderInfoExpanded=!0)}cancelEditing(){this.isEditing=!1}saveChanges(){return k(this,null,function*(){this.order&&(yield this.ordersService.updateOrder(this.order.id,{so_number:this.editForm.so_number||this.order.so_number,po_number:this.editForm.po_number||null,customer_name:this.editForm.customer_name||null,tool_model:this.editForm.tool_model||null,order_date:this.editForm.order_date||null,due_date:this.editForm.due_date||null,notes:this.editForm.notes||null}),this.isEditing=!1,yield this.loadOrder())})}handleExport(){return k(this,null,function*(){this.order&&(yield this.excelService.exportOrderToExcel(this.order,this.tools,this.lineItemsWithPicks,this.picks))})}handleAddTool(){return k(this,null,function*(){if(!this.orderId)return;let e=this.newToolNumber.trim()||this.generateNextToolNumber(),i=this.newToolModel.trim()||this.order?.tool_model||void 0;yield this.ordersService.addTool(this.orderId,e,this.newToolSerial||void 0,i),this.newToolNumber="",this.newToolModel="",this.newToolSerial="",this.showAddToolModal=!1,yield this.loadOrder()})}handleDeleteTool(e){return k(this,null,function*(){this.orderId&&(this.getToolProgress(e.id)>0||(yield this.ordersService.deleteTool(e.id),yield this.loadOrder()))})}handleAddLineItem(){return k(this,null,function*(){if(!this.orderId||!this.newLineItem.part_number.trim()||!this.order)return;let e=this.newLineItem.part_number.trim();(yield this.lineItemsService.addLineItem(this.orderId,{part_number:e,description:this.newLineItem.description.trim()||void 0,location:this.newLineItem.location.trim()||void 0,qty_per_unit:this.newLineItem.qty_per_unit,total_qty_needed:this.newLineItem.total_qty_needed}))&&(yield this.activityLogService.logActivity({type:"part_added",order_id:this.order.id,so_number:this.order.so_number,part_number:e,description:`Part ${e} added to SO-${this.order.so_number}`,performed_by:this.settingsService.getUserName(),details:{qty_per_unit:this.newLineItem.qty_per_unit,total_qty_needed:this.newLineItem.total_qty_needed,location:this.newLineItem.location.trim()||null}})),this.newLineItem={part_number:"",description:"",location:"",qty_per_unit:1,total_qty_needed:1},this.showAddLineItemModal=!1,yield this.loadOrder(),this.orderId&&this.picksService.loadPicksForOrder(this.orderId)})}openDeleteLineItemModal(e){this.deleteLineItemTarget=e,this.showDeleteLineItemModal=!0}handleDeleteLineItem(){return k(this,null,function*(){if(!this.deleteLineItemTarget||!this.orderId||!this.order||this.deleteLineItemTarget.total_picked>0)return;let e=this.deleteLineItemTarget.part_number,i=this.deleteLineItemTarget.id,t={qty_per_unit:this.deleteLineItemTarget.qty_per_unit,total_qty_needed:this.deleteLineItemTarget.total_qty_needed,location:this.deleteLineItemTarget.location||null,description:this.deleteLineItemTarget.description||null};(yield this.lineItemsService.deleteLineItem(i))&&(yield this.activityLogService.logActivity({type:"part_removed",order_id:this.order.id,so_number:this.order.so_number,part_number:e,description:`Part ${e} removed from SO-${this.order.so_number}`,performed_by:this.settingsService.getUserName(),details:t}),yield this.loadOrder(),this.orderId&&this.picksService.loadPicksForOrder(this.orderId)),this.showDeleteLineItemModal=!1,this.deleteLineItemTarget=null})}copyPartNumber(e,i){return k(this,null,function*(){i.stopPropagation(),(yield this.utils.copyToClipboard(e))&&(this.copiedPartNumber=e,setTimeout(()=>{this.copiedPartNumber===e&&(this.copiedPartNumber=null)},2e3))})}handleSaveAsTemplate(e){return k(this,null,function*(){this.lineItems.length!==0&&(yield this.bomTemplatesService.createTemplateFromOrder(e.name,e.toolModel,this.lineItems))})}openDistributeDialog(e){this.distributeItem=e,this.showDistributeModal=!0}handleDistribute(e){return k(this,null,function*(){if(!this.distributeItem)return;this.isSubmitting=this.distributeItem.id,this.scrollToItemId=this.distributeItem.id;let i=this.settingsService.getUserName(),t=new Date,s=!1,h=[];for(let I of e)if(I.qty>0){let P=yield this.picksService.recordPick(this.distributeItem.id,I.toolId,I.qty,i);P&&(h.push(I),"overPickWarning"in P&&P.overPickWarning&&(s=!0))}if(s&&(this.overPickWarning="Some items may have been over-picked. Another user may have picked items at the same time. Please review the quantities.",setTimeout(()=>this.overPickWarning=null,8e3)),h.length>0&&this.settingsService.isTagPrintingEnabled()&&this.order){let I=h.map(P=>{let B=this.tools.find(J=>J.id===P.toolId);return{partNumber:this.distributeItem.part_number,description:this.distributeItem.description,location:this.distributeItem.location,soNumber:this.order.so_number,toolNumber:B?.tool_number||"Unknown",qtyPicked:P.qty,pickedBy:i,pickedAt:t}});this.printTagData=I,this.showPrintTagDialog=!0}this.isSubmitting=null,this.distributeItem=null})}closePrintTagDialog(){this.showPrintTagDialog=!1,this.printTagData=null}getPartClassification(e){return this.partsMap.get(e)?.classification_type||null}isAssemblyPart(e){return this.partsMap.get(e)?.is_assembly===!0}openBOMDialog(e){let i=this.partsMap.get(e.part_number);if(i){let t=this.modalService.open(Le,{size:"lg",scrollable:!0});t.componentInstance.partId=i.id,t.componentInstance.partNumber=e.part_number,t.componentInstance.partDescription=e.description}}openPartDetail(e,i){return k(this,null,function*(){i?.stopPropagation();let t=yield this.partsService.getPartByPartNumber(e);if(t){let s=this.modalService.open(Te,{size:"lg",scrollable:!0});s.componentInstance.partId=t.id}})}static{this.\u0275fac=function(i){return new(i||r)(M(ce),M(fe),M(ye),M(Ae),M(Pe),M(ve),M(we),M(Me),M(Ee),M(Y),M(Se),M(Ce))}}static{this.\u0275cmp=E({type:r,selectors:[["app-order-detail"]],hostBindings:function(i,t){i&1&&g("keydown",function(h){return t.handleKeydown(h)},!1,le)},standalone:!0,features:[D],decls:3,vars:3,consts:[["class","text-center py-5",4,"ngIf"],[4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-muted","mt-3"],["routerLink","/orders",1,"btn","btn-link","mb-3"],[1,"bi","bi-arrow-left","me-1"],[1,"card"],[1,"card-body"],[1,"text-muted"],["class","alert alert-success d-flex align-items-center mb-3",4,"ngIf"],["class","alert alert-secondary d-flex align-items-center mb-3",4,"ngIf"],["class","alert alert-danger d-flex align-items-center mb-3",4,"ngIf"],["class","alert alert-warning d-flex align-items-center mb-3",4,"ngIf"],[1,"page-header"],["routerLink","/orders",1,"text-decoration-none","small"],[1,"d-flex","flex-wrap","align-items-center","gap-3","mt-2"],[1,"page-title","mb-0"],[1,"form-select","form-select-sm","w-auto",3,"ngModelChange","change","ngModel"],["value","active"],["value","complete"],["value","cancelled"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-download","me-1"],["title","Print Pick List",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-printer","me-1"],["title","Save as BOM Template",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-save","me-1"],[1,"d-flex","align-items-center","gap-2","ms-auto","bg-body-secondary","rounded","px-3","py-2"],[1,"small","text-muted"],[1,"progress",2,"width","100px","height","8px"],[1,"progress-bar"],[1,"small","fw-semibold"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],[1,"card","mb-4"],[1,"card-header","d-flex","justify-content-between","align-items-center","cursor-pointer",3,"click"],[1,"d-flex","align-items-center"],[1,"bi","me-2",3,"ngClass"],[1,"fw-semibold"],["class","text-muted small ms-2",4,"ngIf"],["class","btn btn-outline-secondary btn-sm",3,"click",4,"ngIf"],["class","d-flex gap-2",3,"click",4,"ngIf"],["class","card-body",4,"ngIf"],["class","card",4,"ngIf"],["tabindex","-1",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"form-label"],["type","text",1,"form-control",3,"ngModelChange","ngModel","placeholder"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["class","modal-backdrop fade show",4,"ngIf"],["class","text-center text-muted py-3",4,"ngIf"],["class","list-group",4,"ngIf"],[1,"row","g-2"],[1,"col-5"],["type","text","placeholder","Tool Number",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"col-3"],["type","text",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","placeholder"],[1,"col-2"],["type","text","placeholder","Serial",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","btn-sm","w-100",3,"click"],[1,"bi","bi-plus"],[1,"row"],[1,"col-6","mb-3"],["type","number","min","1",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","modal-body",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],[1,"bi","bi-arrow-counterclockwise","me-1"],[1,"bi","bi-exclamation-triangle","me-1"],["type","button",1,"btn","btn-danger",3,"click","disabled"],[1,"bi","bi-trash","me-1"],["type","button",1,"btn","btn-warning",3,"click"],[3,"showChange","saveTemplate","show","lineItemsCount","defaultToolModel"],[3,"show","order","tools","lineItems"],["class","modal-backdrop fade show",3,"click",4,"ngIf"],[3,"showChange","distribute","show","lineItem","tools","getToolPicked"],[3,"close","isOpen","tagData"],[1,"alert","alert-success","d-flex","align-items-center","mb-3"],[1,"bi","bi-check-circle-fill","me-2"],[1,"flex-grow-1"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"bi","bi-check-circle","me-1"],[1,"alert","alert-secondary","d-flex","align-items-center","mb-3"],[1,"bi","bi-x-circle-fill","me-2"],[1,"alert","alert-danger","d-flex","align-items-center","mb-3"],[1,"bi","bi-exclamation-circle-fill","me-2"],[1,"alert","alert-warning","d-flex","align-items-center","mb-3"],[1,"bi","bi-clock-fill","me-2"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[1,"mb-0","small"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"text-muted","small","ms-2"],[1,"bi","bi-pencil","me-1"],[1,"d-flex","gap-2",3,"click"],[1,"btn","btn-primary","btn-sm",3,"click"],["class","row g-3",4,"ngIf"],[1,"row","g-3"],[1,"col-6","col-md-3"],[1,"text-muted","small","mb-1"],[1,"fw-medium","mb-0"],[1,"col-12"],[1,"col-md-3"],[1,"form-label","small"],["type","text",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["type","date",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"col-md-6"],[1,"card-body","text-center","py-5"],[1,"bi","bi-box-seam","display-4","text-muted","mb-3"],[1,"btn","btn-primary","mt-2",3,"click"],[1,"bi","bi-plus","me-1"],[1,"d-flex","flex-wrap","align-items-center","gap-2","mb-3"],[1,"h6","fw-semibold","mb-0"],[1,"badge","bg-secondary"],[1,"badge","bg-body-secondary","text-body","border"],[1,"input-group",2,"width","180px"],[1,"input-group-text","py-1","px-2"],[1,"bi","bi-search","small"],["type","text","placeholder","Search parts...",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["class","btn btn-outline-secondary btn-sm","type","button",3,"click",4,"ngIf"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-outline-secondary","btn-sm","dropdown-toggle"],[1,"bi","bi-sort-down","me-1"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["title","Hide fully picked items",1,"btn","btn-sm",3,"click","ngClass"],[1,"bi",3,"ngClass"],[1,"d-none","d-md-inline","ms-1"],["title","Show only items with zero stock",1,"btn","btn-sm",3,"click","ngClass"],[1,"bi","bi-exclamation-triangle"],["class","badge bg-secondary ms-1",4,"ngIf"],["class","dropdown",4,"ngIf"],[1,"ms-auto","d-flex","gap-2"],[1,"bi","bi-gear","me-1"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],["class","small text-muted mb-2",4,"ngIf"],[1,"card","mb-2"],[1,"card-body","py-2","d-flex","align-items-center","justify-content-between","flex-wrap","gap-2"],[1,"d-flex","align-items-center","gap-2"],[1,"d-flex","gap-1","flex-wrap"],["class","badge d-flex flex-column align-items-center cursor-pointer","style","padding: 0.3em 0.5em;",3,"ngClass","outline","title","click",4,"ngFor","ngForOf"],[1,"badge","bg-primary"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-hover","mb-0","align-middle"],[1,"table-secondary"],[2,"width","30px"],[2,"width","100px"],[1,"text-center",2,"width","60px"],[1,"text-center",2,"width","80px"],[2,"width","180px"],[4,"ngFor","ngForOf"],["class","text-center py-5 text-muted",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-x"],[1,"badge","bg-secondary","ms-1"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-sm","dropdown-toggle",3,"ngClass"],[1,"bi","bi-funnel","me-1"],[1,"dropdown-divider"],["class","text-muted ms-1",4,"ngIf"],[1,"text-muted","ms-1"],[1,"small","text-muted","mb-2"],[1,"badge","d-flex","flex-column","align-items-center","cursor-pointer",2,"padding","0.3em 0.5em",3,"click","ngClass","title"],[1,"d-flex","align-items-center","gap-1"],[1,"opacity-75"],["class","bi bi-check-circle-fill",4,"ngIf"],["class","opacity-75","style","font-size: 0.6rem; line-height: 1;",4,"ngIf"],[1,"bi","bi-check-circle-fill"],[1,"opacity-75",2,"font-size","0.6rem","line-height","1"],["class","table-info",4,"ngIf"],["class","assembly-group-header",4,"ngIf"],[3,"id"],[1,"text-center"],["class","btn btn-sm btn-link p-0",3,"click",4,"ngIf"],["onmouseover","this.style.textDecoration='underline'","onmouseout","this.style.textDecoration='none'",1,"font-monospace","fw-medium","text-primary",2,"cursor","pointer",3,"click"],["title","Copy Part Number",1,"btn","btn-sm","btn-ghost","p-0","text-muted",3,"click"],["class","badge bg-danger ms-1",4,"ngIf"],["class","badge bg-primary-subtle text-primary border border-primary ms-1",4,"ngIf"],["class","small d-block",3,"ngClass",4,"ngIf"],[3,"classification","size"],[1,"small",3,"ngClass"],["class","badge bg-body-secondary text-body border",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"pill-badge",3,"ngClass"],["class","bi bi-check-circle-fill","style","font-size: 0.65rem;",4,"ngIf"],[1,"d-flex","gap-1"],["class","btn btn-sm btn-outline-secondary","title","View exploded BOM",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline-secondary","title","Undo last pick",3,"disabled","click",4,"ngIf"],["class","btn btn-sm btn-outline-success","title","Edit pick allocations",3,"disabled","click",4,"ngIf"],["class","btn btn-sm btn-outline-primary","title","Make picks for this item",3,"disabled","click",4,"ngIf"],["class","btn btn-sm","title","Report issue",3,"ngClass","disabled","click",4,"ngIf"],["title","Remove part from order",1,"btn","btn-sm","btn-outline-danger",3,"click","disabled"],[1,"bi","bi-trash"],["class","table-secondary",4,"ngIf"],[1,"table-info"],["colspan","8",1,"py-2"],[1,"bi","bi-geo-alt-fill","text-primary"],[1,"badge","bg-info"],["class","btn btn-sm btn-success ms-auto","title","Pick all remaining items in this location",3,"disabled","click",4,"ngIf"],["title","Pick all remaining items in this location",1,"btn","btn-sm","btn-success","ms-auto",3,"click","disabled"],[1,"bi","bi-check-all","me-1"],[1,"assembly-group-header"],[1,"d-flex","align-items-center","gap-2","flex-wrap"],[1,"bi","bi-box-seam","text-purple"],[1,"text-purple"],[1,"pill-badge","pill-purple"],["class","pill-badge pill-complete",4,"ngIf"],["class","pill-badge pill-partial",4,"ngIf"],["class","ms-auto d-flex align-items-center gap-2",4,"ngIf"],[1,"pill-badge","pill-complete"],[1,"bi","bi-check-circle"],[1,"pill-badge","pill-partial"],[1,"ms-auto","d-flex","align-items-center","gap-2"],[1,"progress",2,"width","80px","height","6px"],[1,"btn","btn-sm","btn-link","p-0",3,"click"],[1,"badge","bg-danger","ms-1"],[1,"bi","bi-exclamation-triangle-fill"],[1,"badge","bg-primary-subtle","text-primary","border","border-primary","ms-1"],[1,"small","d-block",3,"ngClass"],[1,"bi","bi-geo-alt","me-1"],[3,"ngClass"],[1,"bi","bi-check-circle-fill",2,"font-size","0.65rem"],["title","View exploded BOM",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"bi","bi-eye"],["title","Undo last pick",1,"btn","btn-sm","btn-outline-secondary",3,"click","disabled"],[1,"bi","bi-arrow-counterclockwise"],["title","Edit pick allocations",1,"btn","btn-sm","btn-outline-success",3,"click","disabled"],[1,"bi","bi-pencil"],["title","Make picks for this item",1,"btn","btn-sm","btn-outline-primary",3,"click","disabled"],[1,"bi","bi-plus-slash-minus"],["title","Report issue",1,"btn","btn-sm",3,"click","ngClass","disabled"],["colspan","7",1,"p-3"],[1,"small"],[1,"d-flex","align-items-center","gap-2","mb-2"],[1,"bi","bi-clock-history","text-muted"],[1,"list-group","list-group-flush"],["class","list-group-item d-flex justify-content-between align-items-center py-2",3,"border-primary",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","align-items-center","py-2"],[1,"d-flex","align-items-center","gap-3"],[1,"badge",3,"ngClass"],[1,"bi","bi-wrench","me-1"],[1,"bi","bi-person","me-1"],["class","fst-italic text-muted",4,"ngIf"],["title","Delete this pick",1,"btn","btn-sm","btn-outline-danger",3,"click","disabled"],[1,"fst-italic","text-muted"],[1,"text-center","py-5","text-muted"],[1,"bi","bi-inbox","display-4","mb-3"],[1,"modal-backdrop","fade","show"],[1,"text-center","text-muted","py-3"],[1,"list-group"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],["class","badge bg-info text-dark ms-2",4,"ngIf"],["class","text-muted ms-2",4,"ngIf"],[1,"btn","btn-sm","btn-outline-danger",3,"click","disabled","title"],[1,"badge","bg-info","text-dark","ms-2"],[1,"text-muted","ms-2"],["class","text-muted small mb-0",4,"ngIf"],[1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"input-group"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-dash"],["type","number","min","1",1,"form-control","text-center",3,"ngModelChange","ngModel"],["class","text-muted",4,"ngIf"],["rows","2","placeholder","Why is this a partial pick?",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-muted","small","mb-0"],[3,"value"],[1,"alert","alert-warning"],["value","out_of_stock"],["value","damaged"],["value","wrong_part"],["value","missing"],["value","other"],["rows","3","placeholder","Describe the issue...",1,"form-control",3,"ngModelChange","ngModel"],["class","alert alert-warning",4,"ngIf"],[1,"modal-backdrop","fade","show",3,"click"]],template:function(i,t){i&1&&b(0,_t,6,0,"div",0)(1,ut,8,0,"div",0)(2,Li,219,101,"div",1),i&2&&(c("ngIf",t.loading),l(),c("ngIf",!t.loading&&!t.order),l(),c("ngIf",!t.loading&&t.order))},dependencies:[L,de,A,V,pe,me,F,ge,he,Q,z,ue,N,$,W,Oe,De,ke,Ve,K],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.font-monospace[_ngcontent-%COMP%]{font-family:monospace}.tool-checkbox[_ngcontent-%COMP%]{width:32px;height:32px;padding:0;font-size:.7rem;font-weight:600;border-radius:4px;display:flex;align-items:center;justify-content:center}.tool-checkbox.btn-success[_ngcontent-%COMP%]{background-color:#198754;border-color:#198754;color:#fff}.tool-checkbox.btn-success[_ngcontent-%COMP%]:hover{background-color:#dc3545;border-color:#dc3545}.tool-checkbox.btn-warning[_ngcontent-%COMP%]{background-color:#ffc107;border-color:#ffc107;color:#000;font-size:.6rem}.tool-checkbox.btn-light[_ngcontent-%COMP%]{background-color:var(--bs-secondary-bg);border-color:var(--bs-border-color);color:var(--bs-body-color)}.tool-checkbox.btn-light[_ngcontent-%COMP%]:hover{background-color:#0d6efd;border-color:#0d6efd;color:#fff}.tool-checkbox.ring[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #0d6efd}.modal.show[_ngcontent-%COMP%]{display:block!important}.table-success[_ngcontent-%COMP%]{background-color:var(--color-success-subtle)!important}.table-warning[_ngcontent-%COMP%]{background-color:var(--color-warning-subtle)!important}.table-danger[_ngcontent-%COMP%]{background-color:var(--color-danger-subtle)!important}.table-info[_ngcontent-%COMP%]{background-color:var(--color-info-subtle)!important}.assembly-group-header[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--color-purple-subtle)!important;border-left:3px solid var(--color-purple)}.text-purple[_ngcontent-%COMP%]{color:var(--color-purple)}.keyboard-selected[_ngcontent-%COMP%]{outline:2px solid var(--brand-primary)!important;outline-offset:-2px}.keyboard-selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--brand-primary-subtle)!important}"]})}}return r})();export{In as OrderDetailComponent};
