import{a as we}from"./chunk-V3DYSMA6.js";import{a as xe}from"./chunk-VQJ2QKKZ.js";import{a as ge}from"./chunk-JMCLK4XY.js";import{a as be}from"./chunk-X6NM5MJK.js";import"./chunk-BC7WZKGI.js";import{a as he}from"./chunk-XRYMOE7L.js";import{a as Pe}from"./chunk-2X7OXSZJ.js";import{a as ve}from"./chunk-TIC6WQIR.js";import{a as fe}from"./chunk-6CNJLGU4.js";import{c as le,e as ce,f as $,i as G}from"./chunk-SJKOT4HS.js";import{a as ye,c as Ce}from"./chunk-JG2EF2JX.js";import{a as ke}from"./chunk-SJCJM33I.js";import{a as de,b as Q,c as R,f as L,h as me,i as Y,j as J,k as K,l as pe,m as ue,n as W}from"./chunk-ACCF75FY.js";import{$a as _,$b as U,Ab as Z,Ca as r,Da as P,Sa as b,Ua as c,Va as z,Wa as C,Xa as ie,Za as o,_a as n,_b as H,ab as ne,ac as F,bb as oe,ca as M,cb as w,db as u,dc as V,eb as m,ib as re,ic as _e,ja as q,jb as ae,ka as f,kb as se,la as v,mb as l,nb as h,ob as x,pb as D,rb as I,sa as A,sb as S,tb as E,vb as N,wb as X,xb as j,zb as B}from"./chunk-2TFJQIGG.js";import{e as T}from"./chunk-DVOCWXDE.js";var Fe=a=>["/orders",a];function Ve(a,p){if(a&1&&(o(0,"p",37),l(1),n()),a&2){let e=m(2);r(),h(e.part.description)}}function Qe(a,p){if(a&1&&(o(0,"span",38),l(1),n()),a&2){let e=m(2);r(),h(e.part.location)}}function Re(a,p){a&1&&(o(0,"span"),l(1,"Enter the quantity you have available to distribute across orders"),n())}function Le(a,p){a&1&&(o(0,"span",39),_(1,"i",40),l(2,"This part is complete. You can still adjust allocations for corrections. "),n())}function We(a,p){a&1&&(o(0,"span",51),l(1,"Complete"),n())}function qe(a,p){if(a&1){let e=w();o(0,"div",41)(1,"div",42)(2,"a",43),l(3),n(),o(4,"span",44),l(5),n(),b(6,We,2,0,"span",45),n(),o(7,"div",46)(8,"button",47),u("click",function(){let t=f(e).$implicit,s=m(2);return v(s.decrementAllocation(t))}),_(9,"i",48),n(),o(10,"input",49),E("ngModelChange",function(t){let s=f(e).$implicit;return S(s.allocatedQty,t)||(s.allocatedQty=t),v(t)}),n(),o(11,"button",47),u("click",function(){let t=f(e).$implicit,s=m(2);return v(s.incrementAllocation(t))}),_(12,"i",50),n()()()}if(a&2){let e=p.$implicit,i=m(2);r(2),c("routerLink",j(11,Fe,e.orderId)),r(),D(" SO-",e.soNumber," - ",e.toolNumber," "),r(2),D(" (",e.picked,"/",e.needed," picked) "),r(),c("ngIf",e.remaining===0),r(2),c("disabled",e.allocatedQty<=-e.picked),r(2),I("ngModel",e.allocatedQty),c("min",-e.picked)("max",e.remaining),r(),c("disabled",e.allocatedQty>=e.remaining||i.totalAllocated>=i.availableToPick&&e.remaining>0)}}function ze(a,p){a&1&&(o(0,"div",52),_(1,"i",53),l(2," Negative values will undo previous picks (correction mode) "),n())}function je(a,p){a&1&&(o(0,"div",54),_(1,"i",55),l(2," Allocated quantity exceeds available inventory! "),n())}function Be(a,p){if(a&1){let e=w();o(0,"div",13)(1,"div",14)(2,"strong",15),l(3),n(),b(4,Ve,2,1,"p",16)(5,Qe,2,1,"span",17),n(),o(6,"div",18)(7,"div",19)(8,"div",20)(9,"span",21),l(10,"Total Needed:"),n(),o(11,"strong",22),l(12),n()(),o(13,"div",20)(14,"span",21),l(15,"Picked:"),n(),o(16,"strong",22),l(17),n()(),o(18,"div",20)(19,"span",21),l(20,"Remaining:"),n(),o(21,"strong",22),l(22),n()()()(),o(23,"div",14)(24,"label",23),l(25,"Available to Pick"),n(),o(26,"input",24),E("ngModelChange",function(t){f(e);let s=m();return S(s.availableToPick,t)||(s.availableToPick=t),v(t)}),u("change",function(){f(e);let t=m();return v(t.onAvailableChange())}),n(),o(27,"div",25),b(28,Re,2,0,"span",26)(29,Le,3,0,"span",27),n()(),_(30,"hr"),o(31,"h6"),l(32,"Allocate to Tools"),n(),o(33,"div",28),b(34,qe,13,13,"div",29),n(),o(35,"div",30)(36,"div")(37,"button",31),u("click",function(){f(e);let t=m();return v(t.distributeEvenly())}),l(38," Distribute Evenly "),n(),o(39,"button",31),u("click",function(){f(e);let t=m();return v(t.fillInOrder())}),l(40," Fill In Order "),n(),o(41,"button",32),u("click",function(){f(e);let t=m();return v(t.clearAllocations())}),l(42," Clear "),n()(),o(43,"div",33)(44,"span",34),l(45,"Allocated:"),n(),o(46,"strong",22),l(47),n()()(),b(48,ze,3,0,"div",35)(49,je,3,0,"div",36),n()}if(a&2){let e=m();r(3),h(e.part.part_number),r(),c("ngIf",e.part.description),r(),c("ngIf",e.part.location),r(7),h(e.part.total_needed),r(5),h(e.part.total_picked),r(5),h(e.part.remaining),r(4),I("ngModel",e.availableToPick),c("min",0),r(2),c("ngIf",e.part.remaining>0),r(),c("ngIf",e.part.remaining===0),r(5),c("ngForOf",e.allocations),r(12),C("text-danger",e.totalAllocated>e.availableToPick)("text-warning",e.totalAllocated<0),r(),D(" ",e.totalAllocated,"/",e.availableToPick," "),r(),c("ngIf",e.totalAllocated<0),r(),c("ngIf",e.totalAllocated>e.availableToPick&&e.hasPositiveAllocations)}}function He(a,p){a&1&&_(0,"div",56)}var ee=(()=>{class a{constructor(){this.show=!1,this.part=null,this.showChange=new A,this.pick=new A,this.allocations=[],this.availableToPick=0,this.saving=!1,this.pickResolve=null}ngOnChanges(e){e.show&&this.show&&this.part&&this.initializeAllocations()}initializeAllocations(){this.part&&(this.availableToPick=this.part.remaining,this.allocations=this.part.orders.map(e=>({orderId:e.order_id,soNumber:e.so_number,toolId:e.tool_id,toolNumber:e.tool_number,lineItemId:e.line_item_id,needed:e.needed,picked:e.picked,remaining:e.needed-e.picked,allocatedQty:0})))}get totalAllocated(){return this.allocations.reduce((e,i)=>e+i.allocatedQty,0)}get hasPositiveAllocations(){return this.allocations.some(e=>e.allocatedQty>0)}onAvailableChange(){this.totalAllocated>this.availableToPick&&this.clearAllocations()}incrementAllocation(e){let i=this.availableToPick-this.totalAllocated;e.allocatedQty<e.remaining&&i>0&&e.allocatedQty++}decrementAllocation(e){e.allocatedQty>0&&e.allocatedQty--}distributeEvenly(){this.clearAllocations();let e=this.allocations.filter(s=>s.remaining>0);if(e.length===0)return;let i=this.availableToPick,t=0;for(;i>0;){let s=e[t];if(s.remaining-s.allocatedQty>0&&(s.allocatedQty++,i--),t=(t+1)%e.length,e.every(y=>y.allocatedQty>=y.remaining))break}}fillInOrder(){this.clearAllocations();let e=this.availableToPick;for(let i of this.allocations){if(e<=0)break;let t=Math.min(e,i.remaining);i.allocatedQty=t,e-=t}}clearAllocations(){this.allocations.forEach(e=>e.allocatedQty=0)}close(){this.show=!1,this.showChange.emit(!1)}save(){return T(this,null,function*(){if(!this.allocations.some(t=>t.allocatedQty!==0)||this.totalAllocated>this.availableToPick&&this.allocations.some(s=>s.allocatedQty>0))return;this.saving=!0;let i=this.allocations.filter(t=>t.allocatedQty!==0).map(t=>({lineItemId:t.lineItemId,toolId:t.toolId,qty:t.allocatedQty}));this.pick.emit(i),yield new Promise(t=>{this.pickResolve=t,setTimeout(()=>{this.pickResolve&&(this.pickResolve(),this.pickResolve=null)},3e3)}),this.saving=!1,this.close()})}completePick(){this.pickResolve&&(this.pickResolve(),this.pickResolve=null)}static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275cmp=M({type:a,selectors:[["app-multi-order-pick-dialog"]],inputs:{show:"show",part:"part"},outputs:{showChange:"showChange",pick:"pick"},standalone:!0,features:[q,N],decls:16,vars:10,consts:[["tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"bi","bi-box-seam","me-2"],["type","button",1,"btn-close",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"bi","me-1"],["class","modal-backdrop fade show",4,"ngIf"],[1,"modal-body"],[1,"mb-3"],[1,"font-monospace","fs-5"],["class","text-muted small mb-0",4,"ngIf"],["class","badge bg-secondary",4,"ngIf"],[1,"alert","alert-info","small","mb-3"],[1,"row"],[1,"col-4"],[1,"text-muted"],[1,"ms-1"],[1,"form-label"],["type","number",1,"form-control",3,"ngModelChange","change","ngModel","min"],[1,"form-text"],[4,"ngIf"],["class","text-success",4,"ngIf"],[1,"d-flex","flex-column","gap-2"],["class","d-flex align-items-center gap-2 p-2 border rounded",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","mt-3"],[1,"btn","btn-sm","btn-outline-secondary","me-1",3,"click"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"text-end"],[1,"small","text-muted"],["class","alert alert-warning small mt-3 mb-0",4,"ngIf"],["class","alert alert-danger small mt-3 mb-0",4,"ngIf"],[1,"text-muted","small","mb-0"],[1,"badge","bg-secondary"],[1,"text-success"],[1,"bi","bi-check-circle","me-1"],[1,"d-flex","align-items-center","gap-2","p-2","border","rounded"],[1,"flex-grow-1"],[1,"text-decoration-none","fw-medium",3,"routerLink"],[1,"small","text-muted","ms-2"],["class","badge bg-success ms-1",4,"ngIf"],[1,"input-group",2,"width","160px"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click","disabled"],[1,"bi","bi-dash"],["type","number",1,"form-control","form-control-sm","text-center",3,"ngModelChange","ngModel","min","max"],[1,"bi","bi-plus"],[1,"badge","bg-success","ms-1"],[1,"alert","alert-warning","small","mt-3","mb-0"],[1,"bi","bi-arrow-counterclockwise","me-1"],[1,"alert","alert-danger","small","mt-3","mb-0"],[1,"bi","bi-exclamation-triangle","me-1"],[1,"modal-backdrop","fade","show"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),_(5,"i",5),l(6,"Pick Across Orders "),n(),o(7,"button",6),u("click",function(){return t.close()}),n()(),b(8,Be,50,19,"div",7),o(9,"div",8)(10,"button",9),u("click",function(){return t.close()}),l(11,"Cancel"),n(),o(12,"button",10),u("click",function(){return t.save()}),_(13,"i",11),l(14),n()()()()(),b(15,He,1,0,"div",12)),i&2&&(z("display",t.show?"block":"none"),C("show",t.show),r(8),c("ngIf",t.part),r(4),c("disabled",t.totalAllocated===0||t.totalAllocated>t.availableToPick||t.saving),r(),ie(t.saving?"bi-arrow-clockwise spin":"bi-check-circle"),r(),x(" ",t.saving?"Picking...":"Apply Picks"," "),r(),c("ngIf",t.show))},dependencies:[V,U,F,W,Q,me,R,ue,pe,L,G,$],styles:[".spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return a})();function Te(a){return{inventory_discrepancy:"Inventory Discrepancy",wrong_location:"Wrong Location",damaged:"Damaged",other:"Other"}[a]||a}function Oe(a){return{inventory_discrepancy:"bg-warning text-dark",wrong_location:"bg-info text-dark",damaged:"bg-danger",other:"bg-secondary"}[a]||"bg-secondary"}function Ue(a,p){if(a&1&&(o(0,"div",14),l(1),n()),a&2){let e=m();r(),h(e.partDescription)}}function $e(a,p){if(a&1&&(o(0,"div",14),_(1,"i",15),l(2),n()),a&2){let e=m();r(2),x("",e.partLocation," ")}}function Ge(a,p){if(a&1&&(o(0,"p",25),l(1),n()),a&2){let e=m(2);r(),h(e.existingIssue.description)}}function Ye(a,p){if(a&1&&(o(0,"p",26),_(1,"i",27),l(2),n()),a&2){let e=m(2);r(2),x("",e.existingIssue.reported_by," ")}}function Je(a,p){if(a&1){let e=w();o(0,"div")(1,"div",16)(2,"div",17)(3,"span",18),l(4),n(),o(5,"span",14),l(6),n()(),b(7,Ge,2,1,"p",19)(8,Ye,3,1,"p",20),n(),o(9,"div",21)(10,"button",22),u("click",function(){f(e);let t=m();return v(t.handleResolve())}),_(11,"i",23),l(12),n(),o(13,"button",24),u("click",function(){f(e);let t=m();return v(t.showNewIssueForm=!0)}),l(14," Report Another "),n()()()}if(a&2){let e=m();r(3),c("ngClass",e.getIssueColor(e.existingIssue.issue_type)),r(),x(" ",e.getIssueLabel(e.existingIssue.issue_type)," "),r(2),x(" Reported ",e.formatDate(e.existingIssue.created_at)," "),r(),c("ngIf",e.existingIssue.description),r(),c("ngIf",e.existingIssue.reported_by),r(2),c("disabled",e.submitting),r(2),x(" ",e.submitting?"Resolving...":"Mark as Resolved"," ")}}function Ke(a,p){if(a&1){let e=w();o(0,"div")(1,"div",28)(2,"label",29),l(3,"Issue Type"),n(),o(4,"select",30),E("ngModelChange",function(t){f(e);let s=m();return S(s.issueType,t)||(s.issueType=t),v(t)}),o(5,"option",31),l(6,"Select issue type..."),n(),o(7,"option",32),l(8,"Inventory Discrepancy"),n(),o(9,"option",33),l(10,"Wrong Location"),n(),o(11,"option",34),l(12,"Damaged"),n(),o(13,"option",35),l(14,"Other"),n()()(),o(15,"div",28)(16,"label",29),l(17,"Description (optional)"),n(),o(18,"textarea",36),E("ngModelChange",function(t){f(e);let s=m();return S(s.description,t)||(s.description=t),v(t)}),n()()()}if(a&2){let e=m();r(4),I("ngModel",e.issueType),r(14),I("ngModel",e.description)}}function Xe(a,p){if(a&1){let e=w();o(0,"div",37)(1,"button",38),u("click",function(){f(e);let t=m();return v(t.close())}),l(2,"Cancel"),n(),o(3,"button",39),u("click",function(){f(e);let t=m();return v(t.handleSubmit())}),_(4,"i",40),l(5),n()()}if(a&2){let e=m();r(3),c("disabled",!e.issueType||e.submitting),r(2),x(" ",e.submitting?"Reporting...":"Report Issue"," ")}}function Ze(a,p){a&1&&_(0,"div",41)}var Ae=(()=>{class a{constructor(){this.show=!1,this.partNumber=null,this.partDescription=null,this.partLocation=null,this.existingIssue=null,this.showChange=new A,this.submitIssue=new A,this.resolveIssue=new A,this.issueType="",this.description="",this.submitting=!1,this.showNewIssueForm=!1}ngOnChanges(e){e.show&&this.show&&(this.issueType="",this.description="",this.submitting=!1,this.showNewIssueForm=!1)}close(){this.show=!1,this.showChange.emit(!1)}handleSubmit(){this.issueType&&(this.submitting=!0,this.submitIssue.emit({issueType:this.issueType,description:this.description}))}handleResolve(){this.existingIssue&&(this.submitting=!0,this.resolveIssue.emit(this.existingIssue.id))}getIssueLabel(e){return Te(e)}getIssueColor(e){return Oe(e)}formatDate(e){return new Date(e).toLocaleDateString()}static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275cmp=M({type:a,selectors:[["app-report-part-issue-dialog"]],inputs:{show:"show",partNumber:"partNumber",partDescription:"partDescription",partLocation:"partLocation",existingIssue:"existingIssue"},outputs:{showChange:"showChange",submitIssue:"submitIssue",resolveIssue:"resolveIssue"},standalone:!0,features:[q,N],decls:18,vars:12,consts:[["tabindex","-1",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","d-flex","align-items-center","gap-2"],[1,"bi","bi-exclamation-triangle","text-warning"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"bg-body-secondary","rounded","p-3","mb-3"],[1,"fw-semibold","font-monospace"],["class","text-muted small",4,"ngIf"],[4,"ngIf"],["class","modal-footer",4,"ngIf"],["class","modal-backdrop fade show",4,"ngIf"],[1,"text-muted","small"],[1,"bi","bi-geo-alt","me-1"],[1,"border","border-danger","rounded","p-3","mb-3"],[1,"d-flex","align-items-center","gap-2","mb-2"],[1,"badge",3,"ngClass"],["class","mb-1",4,"ngIf"],["class","text-muted small mb-0",4,"ngIf"],[1,"d-flex","gap-2"],[1,"btn","btn-success","flex-fill",3,"click","disabled"],[1,"bi","bi-check-circle","me-1"],[1,"btn","btn-outline-warning",3,"click"],[1,"mb-1"],[1,"text-muted","small","mb-0"],[1,"bi","bi-person","me-1"],[1,"mb-3"],[1,"form-label"],[1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","inventory_discrepancy"],["value","wrong_location"],["value","damaged"],["value","other"],["rows","3","placeholder","E.g., 'System shows 5 in stock but shelf is empty'",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click","disabled"],[1,"bi","bi-exclamation-triangle","me-1"],[1,"modal-backdrop","fade","show"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),_(5,"i",5),l(6),n(),o(7,"button",6),u("click",function(){return t.close()}),n()(),o(8,"div",7)(9,"div",8)(10,"div",9),l(11),n(),b(12,Ue,2,1,"div",10)(13,$e,3,1,"div",10),n(),b(14,Je,15,7,"div",11)(15,Ke,19,2,"div",11),n(),b(16,Xe,6,2,"div",12),n()()(),b(17,Ze,1,0,"div",13)),i&2&&(z("display",t.show?"block":"none"),C("show",t.show),r(6),x(" ",t.existingIssue?"Part Issue":"Report Part Issue"," "),r(5),h(t.partNumber),r(),c("ngIf",t.partDescription),r(),c("ngIf",t.partLocation),r(),c("ngIf",t.existingIssue&&!t.showNewIssueForm),r(),c("ngIf",!t.existingIssue||t.showNewIssueForm),r(),c("ngIf",!t.existingIssue||t.showNewIssueForm),r(),c("ngIf",t.show))},dependencies:[V,H,F,W,J,K,Q,Y,R,L],encapsulation:2})}}return a})();var et=()=>[],tt=(a,p,e,i)=>({"text-success-emphasis":a,"text-warning-emphasis":p,"text-danger-emphasis":e,"text-muted":i}),te=(a,p,e)=>({"text-success-emphasis":a,"text-warning-emphasis":p,"text-danger-emphasis":e}),it=(a,p,e,i)=>({"text-danger-emphasis":a,"fw-bold":p,"text-warning-emphasis":e,"text-success-emphasis":i}),nt=()=>({"bg-light text-dark border":!0}),ot=a=>["/orders",a];function rt(a,p){if(a&1&&(o(0,"span",53),l(1),n()),a&2){let e=m();r(),h(e.issueCount)}}function at(a,p){if(a&1){let e=w();o(0,"div",54)(1,"input",55),u("change",function(){let t=f(e).$implicit,s=m();return v(s.toggleAssembly(t))}),n(),o(2,"label",56),l(3),n()()}if(a&2){let e=p.$implicit,i=m();r(),c("id","parts-assembly-"+e)("checked",i.selectedAssemblies.has(e)),r(),c("for","parts-assembly-"+e),r(),x(" ",e," ")}}function st(a,p){if(a&1&&(o(0,"span",53),l(1),n()),a&2){let e=m();r(),h(e.totalOutOfStockCount)}}function lt(a,p){if(a&1&&(o(0,"span",53),l(1),n()),a&2){let e=m();r(),h(e.issueCount)}}function ct(a,p){if(a&1){let e=w();o(0,"div",57),_(1,"i",58),l(2),o(3,"button",59),u("click",function(){f(e);let t=m();return v(t.copyMessage="")}),n()()}if(a&2){let e=m();r(2),x("",e.copyMessage," ")}}function dt(a,p){if(a&1&&(o(0,"div",60),_(1,"i",61),l(2),n()),a&2){let e=m();r(2),x("",e.error," ")}}function mt(a,p){a&1&&(o(0,"div",62)(1,"div",63),l(2,"Loading parts..."),n()())}function pt(a,p){if(a&1&&(o(0,"div",62)(1,"div",63),l(2),n()()),a&2){let e=m();r(2),x(" ",e.searchQuery||e.filter!=="all"?"No parts match your filters":"No parts found"," ")}}function ut(a,p){if(a&1&&(o(0,"tr",91)(1,"td",92)(2,"div",72),_(3,"i",93),o(4,"strong"),l(5),n(),o(6,"span",94),l(7),n()()()()),a&2){let e=m().$implicit,i=m(2);r(5),h(i.getLocationPrefix(e.location)||"No Location"),r(2),x("",i.getLocationGroupCount(e)," parts")}}function _t(a,p){if(a&1&&(o(0,"tr",95)(1,"td",92)(2,"div",72),_(3,"i",96),o(4,"strong"),l(5),n(),o(6,"span",94),l(7),n()()()()),a&2){let e=m().$implicit,i=m(2);r(5),h(i.getPartAssemblyName(e)||"Unassigned"),r(2),x("",i.getAssemblyGroupCount(e)," parts")}}function gt(a,p){a&1&&(o(0,"span",97),_(1,"i",98),l(2," Issue "),n())}function bt(a,p){if(a&1&&(o(0,"span",101),l(1),n()),a&2){let e=p.$implicit;c("ngClass",X(2,nt)),r(),x(" ",e," ")}}function ht(a,p){if(a&1&&(o(0,"div",99),b(1,bt,2,3,"span",100),n()),a&2){let e=m().$implicit,i=m(2);r(),c("ngForOf",i.getPartAssemblies(e))}}function ft(a,p){if(a&1&&(o(0,"div",115),_(1,"i",116),l(2),n()),a&2){let e=m().$implicit;r(2),x("",e.tool_model," ")}}function vt(a,p){if(a&1&&(o(0,"div",117),_(1,"i",118),l(2),n()),a&2){let e=m().$implicit,i=m(4);r(2),x("",i.formatAssemblyPath(e.assembly_group)," ")}}function xt(a,p){if(a&1&&(o(0,"a",108)(1,"div",109)(2,"strong",110),l(3),n(),o(4,"span",111),l(5),n()(),o(6,"div",112)(7,"span"),l(8),n(),o(9,"span"),l(10),n()(),b(11,ft,3,1,"div",113)(12,vt,3,1,"div",114),n()),a&2){let e=p.$implicit,i=m(2).$implicit;c("routerLink",j(11,ot,e.order_id))("ngClass",i.remaining===0?"bg-success-subtle text-success-emphasis border-success":"bg-body-secondary text-body")("title","SO-"+e.so_number+" - "+e.tool_number),r(3),x("SO-",e.so_number,""),r(2),h(e.tool_number),r(3),x("Qty: ",e.needed,""),r(),C("text-success",e.picked>=e.needed),r(),x("Picked: ",e.picked,""),r(),c("ngIf",e.tool_model),r(),c("ngIf",e.assembly_group)}}function yt(a,p){if(a&1){let e=w();o(0,"div",102),u("click",function(t){return f(e),v(t.stopPropagation())}),o(1,"div",103)(2,"small",104),l(3,"Order Details"),n(),o(4,"button",105),u("click",function(t){f(e);let s=m(3);return s.activeDetailsPartId=null,v(t.stopPropagation())}),n()(),o(5,"div",106),b(6,xt,13,13,"a",107),n()()}if(a&2){let e=m().$implicit;r(6),c("ngForOf",e.orders)}}function Ct(a,p){if(a&1){let e=w();ne(0),b(1,ut,8,2,"tr",69)(2,_t,8,2,"tr",70),o(3,"tr",71)(4,"td")(5,"div",72)(6,"span",73),u("click",function(t){let s=f(e).$implicit,d=m(2);return v(d.openPartDetail(s.part_number,t))}),l(7),n(),o(8,"button",74),u("click",function(t){let s=f(e).$implicit,d=m(2);return v(d.copyPartNumber(s.part_number,t))}),_(9,"i",75),n(),b(10,gt,3,0,"span",76),n(),b(11,ht,2,1,"div",77),n(),o(12,"td",78),l(13),n(),o(14,"td"),_(15,"app-classification-badge",79),n(),o(16,"td",78),l(17),n(),o(18,"td",67)(19,"span",78),l(20),n()(),o(21,"td",80),l(22),n(),o(23,"td",80),l(24),n(),o(25,"td",67)(26,"span",81),l(27),n()(),o(28,"td")(29,"div",82)(30,"span",83),u("click",function(t){let s=f(e).$implicit,d=m(2);return v(d.toggleOrderDetails(s.part_number,t))}),l(31),_(32,"i",84),n(),b(33,yt,7,1,"div",85),n()(),o(34,"td",67)(35,"div",86)(36,"button",87),u("click",function(){let t=f(e).$implicit,s=m(2);return v(s.openMultiOrderPick(t))}),_(37,"i",88),n(),o(38,"button",89),u("click",function(){let t=f(e).$implicit,s=m(2);return v(s.openReportIssue(t))}),_(39,"i",90),n()()()(),oe()}if(a&2){let e,i=p.$implicit,t=p.index,s=m(2);r(),c("ngIf",s.sortMode==="location"&&s.shouldShowLocationHeader(i,t)),r(),c("ngIf",s.sortMode==="assembly"&&s.shouldShowAssemblyGroupHeader(i,t)),r(),C("table-success",i.remaining===0)("table-warning",i.total_picked>0&&i.remaining>0)("table-danger",s.getQtyAvailable(i)===0&&i.remaining>0),c("id","part-row-"+t),r(4),h(i.part_number),r(2),c("ngClass",s.copiedPartNumber===i.part_number?"bi-check-lg text-success":"bi-copy"),r(),c("ngIf",s.hasPartIssue(i.part_number)),r(),c("ngIf",s.getPartAssemblies(i).length>0),r(),c("ngClass",Z(40,tt,i.remaining===0,i.total_picked>0&&i.remaining>0&&!(s.getQtyAvailable(i)===0&&i.remaining>0),s.getQtyAvailable(i)===0&&i.remaining>0,i.total_picked===0&&!(s.getQtyAvailable(i)===0&&i.remaining>0))),r(),h(i.description||"-"),r(2),c("classification",i.classification_type)("isAssembly",i.is_assembly)("isModified",i.is_modified)("showIcon",!1),r(),c("ngClass",B(45,te,i.remaining===0,i.total_picked>0&&i.remaining>0&&!(s.getQtyAvailable(i)===0&&i.remaining>0),s.getQtyAvailable(i)===0&&i.remaining>0)),r(),h(i.location||"-"),r(2),c("ngClass",Z(49,it,s.getQtyAvailable(i)===0&&i.remaining>0,s.getQtyAvailable(i)!==null&&s.getQtyAvailable(i)<i.remaining&&i.remaining!==0,i.total_picked>0&&i.remaining>0&&!(s.getQtyAvailable(i)===0&&i.remaining>0),i.remaining===0)),r(),x(" ",(e=s.getQtyAvailable(i))!==null&&e!==void 0?e:"-"," "),r(),c("ngClass",B(54,te,i.remaining===0,i.total_picked>0&&i.remaining>0&&!(s.getQtyAvailable(i)===0&&i.remaining>0),s.getQtyAvailable(i)===0&&i.remaining>0)),r(),h(i.total_needed),r(),c("ngClass",B(58,te,i.remaining===0,i.total_picked>0&&i.remaining>0&&!(s.getQtyAvailable(i)===0&&i.remaining>0),s.getQtyAvailable(i)===0&&i.remaining>0)),r(),h(i.total_picked),r(2),c("ngClass",i.remaining===0?"bg-success":"bg-warning text-dark"),r(),x(" ",i.remaining," "),r(3),C("bg-primary-subtle",s.activeDetailsPartId===i.part_number)("text-primary-emphasis",s.activeDetailsPartId===i.part_number)("border-primary",s.activeDetailsPartId===i.part_number),r(),D(" ",i.orders.length," Order",i.orders.length!==1?"s":""," "),r(),c("ngClass",s.activeDetailsPartId===i.part_number?"bi-chevron-up":"bi-chevron-down"),r(),c("ngIf",s.activeDetailsPartId===i.part_number),r(5),c("ngClass",s.hasPartIssue(i.part_number)?"btn-danger":"btn-outline-warning")}}function kt(a,p){if(a&1&&(o(0,"div",62)(1,"div",64)(2,"table",65)(3,"thead")(4,"tr",66)(5,"th"),l(6,"Part Number"),n(),o(7,"th"),l(8,"Description"),n(),o(9,"th"),l(10,"Type"),n(),o(11,"th"),l(12,"Location"),n(),o(13,"th",67),l(14,"Available"),n(),o(15,"th",67),l(16,"Needed"),n(),o(17,"th",67),l(18,"Picked"),n(),o(19,"th",67),l(20,"Remaining"),n(),o(21,"th"),l(22,"Orders"),n(),o(23,"th",67),l(24,"Actions"),n()()(),o(25,"tbody"),b(26,Ct,40,62,"ng-container",68),n()()()()),a&2){let e=m();r(26),c("ngForOf",e.sortedParts)}}var ri=(()=>{class a{constructor(e,i,t,s,d,g,y,k,O,Me,De){this.partsService=e,this.picksService=i,this.settingsService=t,this.partIssuesService=s,this.utils=d,this.excelService=g,this.route=y,this.router=k,this.catalogPartsService=O,this.modalService=Me,this.supabase=De,this.parts=[],this.loading=!0,this.error=null,this.searchQuery="",this.filter="all",this.copyMessage="",this.hideOutOfStock=!1,this.showOutOfStockOnly=!1,this.hideIssues=!1,this.sortMode="part_number",this.selectedAssemblies=new Set,this.showMultiOrderPick=!1,this.selectedPart=null,this.scrollToPartNumber=null,this.showReportIssue=!1,this.selectedPartForIssue=null,this.showPrintTagDialog=!1,this.printTagData=null,this.copiedPartNumber=null,this.activeDetailsPartId=null,this.subscriptions=[]}ngOnInit(){let e=this.route.snapshot.queryParamMap.get("search");e&&(this.searchQuery=e,this.router.navigate([],{queryParams:{},replaceUrl:!0})),this.partIssuesService.initialize(),this.subscriptions.push(this.partsService.parts$.subscribe(i=>{this.parts=i,this.scrollToPartNumber&&this.scrollToPartByNumber()}),this.partsService.loading$.subscribe(i=>{this.loading=i}),this.partsService.error$.subscribe(i=>{this.error=i}))}scrollToPartByNumber(){if(!this.scrollToPartNumber)return;let e=this.filteredParts.findIndex(i=>i.part_number===this.scrollToPartNumber);e>=0?setTimeout(()=>{let i=document.getElementById(`part-row-${e}`);i&&i.scrollIntoView({behavior:"smooth",block:"center"}),this.scrollToPartNumber=null},100):this.scrollToPartNumber=null}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}get uniqueAssemblies(){let e=new Set;return this.parts.forEach(i=>{i.orders.forEach(t=>{t.tool_model&&e.add(t.tool_model)})}),Array.from(e).sort((i,t)=>i.localeCompare(t,void 0,{numeric:!0}))}toggleAssembly(e){this.selectedAssemblies.has(e)?this.selectedAssemblies.delete(e):this.selectedAssemblies.add(e),this.selectedAssemblies=new Set(this.selectedAssemblies)}selectAllAssemblies(){this.selectedAssemblies=new Set(this.uniqueAssemblies)}deselectAllAssemblies(){this.selectedAssemblies=new Set}setFilter(e){this.filter=e}onHideOutOfStockChange(e){this.hideOutOfStock=e,e&&(this.showOutOfStockOnly=!1)}onShowOutOfStockOnlyChange(e){this.showOutOfStockOnly=e,e&&(this.hideOutOfStock=!1)}getQtyAvailable(e){return e.qty_available}get filteredParts(){return this.parts.filter(e=>{let i=e.part_number.toLowerCase().includes(this.searchQuery.toLowerCase())||e.description?.toLowerCase().includes(this.searchQuery.toLowerCase()),t=!0;switch(this.filter){case"remaining":t=e.remaining>0;break;case"complete":t=e.remaining===0;break;case"low_stock":let k=this.getQtyAvailable(e);t=k!==null&&k<e.remaining&&k>0;break;case"out_of_stock":t=this.getQtyAvailable(e)===0&&e.remaining>0;break;case"has_issues":t=this.partIssuesService.hasOpenIssue(e.part_number);break}let s=!this.hideOutOfStock||this.getQtyAvailable(e)!==0,d=!this.showOutOfStockOnly||this.getQtyAvailable(e)===0,g=this.selectedAssemblies.size===0||e.orders.some(k=>!!k.tool_model&&this.selectedAssemblies.has(k.tool_model)),y=!this.hideIssues||!this.partIssuesService.hasOpenIssue(e.part_number);return i&&t&&s&&d&&g&&y})}get lowStockCount(){return this.filteredParts.filter(e=>{let i=this.getQtyAvailable(e);return i!==null&&i<e.remaining&&i>0}).length}get outOfStockCount(){return this.filteredParts.filter(e=>this.getQtyAvailable(e)===0&&e.remaining>0).length}get completeCount(){return this.filteredParts.filter(e=>e.remaining===0).length}get totalOutOfStockCount(){return this.parts.filter(e=>this.getQtyAvailable(e)===0).length}get totalNeeded(){return this.parts.reduce((e,i)=>e+i.total_needed,0)}get totalPicked(){return this.parts.reduce((e,i)=>e+i.total_picked,0)}get totalRemaining(){return this.parts.reduce((e,i)=>e+i.remaining,0)}copyPartNumbers(){return T(this,null,function*(){let e=this.filteredParts.map(i=>i.part_number).join(`
`);try{yield navigator.clipboard.writeText(e),this.copyMessage=`Copied ${this.filteredParts.length} part numbers to clipboard`,setTimeout(()=>this.copyMessage="",3e3)}catch(i){console.error("Failed to copy:",i),this.copyMessage="Failed to copy to clipboard",setTimeout(()=>this.copyMessage="",3e3)}})}copyPartNumber(e,i){return T(this,null,function*(){i.stopPropagation(),(yield this.utils.copyToClipboard(e))&&(this.copiedPartNumber=e,setTimeout(()=>{this.copiedPartNumber===e&&(this.copiedPartNumber=null)},2e3))})}toggleOrderDetails(e,i){i.stopPropagation(),this.activeDetailsPartId===e?this.activeDetailsPartId=null:this.activeDetailsPartId=e}openMultiOrderPick(e){this.selectedPart=e,this.showMultiOrderPick=!0}handleMultiOrderPick(e){return T(this,null,function*(){let t=this.settingsService.getSettings().user_name||"Unknown",s=new Date;this.selectedPart&&(this.scrollToPartNumber=this.selectedPart.part_number);let d=[];try{for(let g of e)g.qty>0?(yield this.picksService.recordPick(g.lineItemId,g.toolId,g.qty,t))&&d.push(g):g.qty<0&&(yield this.undoPicksByQuantity(g.lineItemId,g.toolId,Math.abs(g.qty),t));if(yield this.partsService.fetchParts(),d.length>0&&this.selectedPart&&this.settingsService.isTagPrintingEnabled()){let g=d.map(y=>{let k=this.selectedPart?.orders.find(O=>O.line_item_id===y.lineItemId&&O.tool_id===y.toolId);return{partNumber:this.selectedPart.part_number,description:this.selectedPart.description,location:this.selectedPart.location,soNumber:k?.so_number||"Unknown",toolNumber:k?.tool_number||"Unknown",qtyPicked:y.qty,pickedBy:t,pickedAt:s,assembly:k?.assembly_group}});this.printTagData=g,this.showPrintTagDialog=!0}yield new Promise(g=>setTimeout(g,100))}catch(g){console.error("Error recording picks:",g)}finally{this.multiOrderPickDialog?.completePick()}})}closePrintTagDialog(){this.showPrintTagDialog=!1,this.printTagData=null}undoPicksByQuantity(e,i,t,s){return T(this,null,function*(){let{data:d,error:g}=yield this.supabase.from("picks").select("id, qty_picked").eq("line_item_id",e).eq("tool_id",i).is("undone_at",null).order("picked_at",{ascending:!1});if(g||!d){console.error("Error fetching picks to undo:",g);return}let y=t;for(let k of d){if(y<=0)break;if(k.qty_picked<=y)yield this.picksService.undoPick(k.id,s),y-=k.qty_picked;else{yield this.picksService.undoPick(k.id,s);let O=k.qty_picked-y;yield this.picksService.recordPick(e,i,O,s,"Corrected from partial undo"),y=0}}y>0&&console.warn(`Could not undo full quantity. ${y} remaining.`)})}get sortedParts(){let e=[...this.filteredParts];return this.sortMode==="location"?e.sort((i,t)=>{let s=this.getLocationPrefix(i.location)||"zzz",d=this.getLocationPrefix(t.location)||"zzz",g=s.localeCompare(d,void 0,{numeric:!0});return g!==0?g:i.part_number.localeCompare(t.part_number,void 0,{numeric:!0})}):this.sortMode==="assembly"?e.sort((i,t)=>{let s=this.getPartAssemblyName(i)||"zzz",d=this.getPartAssemblyName(t)||"zzz",g=s.localeCompare(d,void 0,{numeric:!0});return g!==0?g:i.part_number.localeCompare(t.part_number,void 0,{numeric:!0})}):e.sort((i,t)=>i.part_number.localeCompare(t.part_number,void 0,{numeric:!0})),e}getLocationPrefix(e){if(!e)return"";let i=e.split("-");return i.length>=2?i.slice(0,2).join("-"):i[0]}getPartAssemblyName(e){let i=new Set;return e.orders.forEach(t=>{t.tool_model&&i.add(t.tool_model)}),Array.from(i).sort().join(", ")}getPartAssemblies(e){let i=new Set;return e.orders.forEach(t=>{t.assembly_group&&i.add(this.formatAssemblyPath(t.assembly_group))}),Array.from(i).sort()}formatAssemblyPath(e){if(!e)return"";let i=e.split(" > ");return i.reverse()," < "+i.join(" < ")}shouldShowLocationHeader(e,i){if(i===0)return!0;let s=this.sortedParts[i-1];return this.getLocationPrefix(e.location)!==this.getLocationPrefix(s.location)}shouldShowAssemblyGroupHeader(e,i){if(i===0)return!0;let s=this.sortedParts[i-1];return this.getPartAssemblyName(e)!==this.getPartAssemblyName(s)}getLocationGroupCount(e){let i=this.getLocationPrefix(e.location);return this.sortedParts.filter(t=>this.getLocationPrefix(t.location)===i).length}getAssemblyGroupCount(e){let i=this.getPartAssemblyName(e);return this.sortedParts.filter(t=>this.getPartAssemblyName(t)===i).length}exportPartNumbers(){return T(this,null,function*(){let e=this.filteredParts.map(i=>i.part_number);yield this.excelService.exportPartNumbersToExcel(e)})}get issueCount(){return this.parts.filter(e=>this.partIssuesService.hasOpenIssue(e.part_number)).length}hasPartIssue(e){return this.partIssuesService.hasOpenIssue(e)}openReportIssue(e){this.selectedPartForIssue=e,this.showReportIssue=!0}handleSubmitIssue(e){return T(this,null,function*(){if(!this.selectedPartForIssue)return;let i=this.settingsService.getUserName();yield this.partIssuesService.reportIssue(this.selectedPartForIssue.part_number,e.issueType,e.description||void 0,i||void 0),this.showReportIssue=!1,this.selectedPartForIssue=null})}handleResolveIssue(e){return T(this,null,function*(){let i=this.settingsService.getUserName();yield this.partIssuesService.resolveIssue(e,i||void 0),this.showReportIssue=!1,this.selectedPartForIssue=null})}openPartDetail(e,i){return T(this,null,function*(){i?.stopPropagation();let t=yield this.catalogPartsService.getPartByPartNumber(e);if(t){let s=this.modalService.open(Pe,{size:"lg",scrollable:!0});s.componentInstance.partId=t.id}})}static{this.\u0275fac=function(i){return new(i||a)(P(he),P(be),P(ge),P(we),P(fe),P(ve),P(le),P(ce),P(ke),P(Ce),P(_e))}}static{this.\u0275cmp=M({type:a,selectors:[["app-consolidated-parts"]],viewQuery:function(i,t){if(i&1&&re(ee,5),i&2){let s;ae(s=se())&&(t.multiOrderPickDialog=s.first)}},standalone:!0,features:[N],decls:115,vars:63,consts:[[1,"page-header","d-flex","flex-wrap","justify-content-between","align-items-center","gap-3"],[1,"page-title"],[1,"page-subtitle"],[1,"d-flex","gap-2"],[1,"btn","btn-outline-primary",3,"click","disabled"],[1,"bi","bi-clipboard","me-1"],[1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"bi","bi-download","me-1"],[1,"row","g-3","mb-4"],[1,"col-6","col-lg-3"],[1,"card","stat-card","cursor-pointer",3,"click"],[1,"card-body"],[1,"stat-label"],[1,"stat-value"],[1,"stat-sublabel"],[1,"stat-value","text-warning"],[1,"stat-value","text-danger"],[1,"stat-value","text-success"],[1,"card","filter-bar"],[1,"row","g-3"],[1,"col-md-6"],[1,"input-group"],[1,"input-group-text"],[1,"bi","bi-search"],["type","text","placeholder","Search by part number or description...",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","gap-2","flex-wrap","align-items-center"],[1,"btn","btn-sm",3,"click"],["class","badge bg-secondary ms-1",4,"ngIf"],[1,"dropdown",3,"click"],["type","button","data-bs-toggle","dropdown","data-bs-auto-close","outside",1,"btn","btn-sm","btn-outline-secondary","dropdown-toggle","d-flex","align-items-center","gap-1"],[1,"bi","bi-tools"],[1,"dropdown-menu","p-0",2,"min-width","220px"],[1,"d-flex","border-bottom","p-2","gap-2"],[1,"btn","btn-sm","btn-ghost","flex-fill",3,"click"],[1,"p-2",2,"max-height","250px","overflow-y","auto"],["class","form-check px-2 py-1",4,"ngFor","ngForOf"],[1,"form-check","ms-3"],["type","checkbox","id","hideOutOfStock",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hideOutOfStock",1,"form-check-label"],["type","checkbox","id","showOutOfStockOnly",1,"form-check-input",3,"ngModelChange","ngModel"],["for","showOutOfStockOnly",1,"form-check-label"],["type","checkbox","id","hideIssues",1,"form-check-input",3,"ngModelChange","ngModel"],["for","hideIssues",1,"form-check-label"],[1,"form-select","form-select-sm","ms-3",2,"width","auto",3,"ngModelChange","ngModel"],["value","part_number"],["value","location"],["value","assembly"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","card",4,"ngIf"],[3,"showChange","pick","show","part"],[3,"showChange","submitIssue","resolveIssue","show","partNumber","partDescription","partLocation","existingIssue"],[3,"close","isOpen","tagData"],[1,"badge","bg-secondary","ms-1"],[1,"form-check","px-2","py-1"],["type","checkbox",1,"form-check-input",3,"change","id","checked"],[1,"form-check-label",3,"for"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"bi","bi-check-circle","me-2"],["type","button",1,"btn-close",3,"click"],["role","alert",1,"alert","alert-danger"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"card"],[1,"card-body","text-center","py-5","text-muted"],[1,"table-responsive"],[1,"table","table-hover","mb-0"],[1,"table-secondary"],[1,"text-center"],[4,"ngFor","ngForOf"],["class","location-group-header",4,"ngIf"],["class","assembly-group-header",4,"ngIf"],[3,"id"],[1,"d-flex","align-items-center","gap-2"],["onmouseover","this.style.textDecoration='underline'","onmouseout","this.style.textDecoration='none'",1,"font-mono","text-primary","fw-medium",2,"cursor","pointer",3,"click"],["title","Copy Part Number",1,"btn","btn-sm","btn-ghost","p-0","text-muted",3,"click"],[1,"bi",3,"ngClass"],["class","badge bg-danger",4,"ngIf"],["class","d-flex flex-direction-column gap-1 mt-1",4,"ngIf"],[3,"ngClass"],[3,"classification","isAssembly","isModified","showIcon"],[1,"text-center",3,"ngClass"],[1,"badge",3,"ngClass"],[1,"position-relative"],[1,"badge","rounded-pill","bg-light","text-dark","border","cursor-pointer",3,"click"],[1,"bi",2,"font-size","0.7em",3,"ngClass"],["class","order-details-popover shadow border rounded p-2 bg-white position-absolute start-0 top-100 mt-1","style","z-index: 1050; width: 320px;",3,"click",4,"ngIf"],[1,"d-flex","gap-1","justify-content-center"],["title","Pick across orders",1,"btn","btn-outline-primary",2,"width","40px","height","38px",3,"click"],[1,"bi","bi-box-arrow-in-down"],["title","Report issue",1,"btn",2,"width","40px","height","38px",3,"click","ngClass"],[1,"bi","bi-exclamation-triangle"],[1,"location-group-header"],["colspan","10",1,"py-2"],[1,"bi","bi-geo-alt","text-primary"],[1,"badge","bg-secondary"],[1,"assembly-group-header"],[1,"bi","bi-box-seam","text-purple"],[1,"badge","bg-danger"],[1,"bi","bi-exclamation-triangle-fill"],[1,"d-flex","flex-direction-column","gap-1","mt-1"],["class","badge small text-start fw-normal font-monospace","style","white-space: pre-wrap;",3,"ngClass",4,"ngFor","ngForOf"],[1,"badge","small","text-start","fw-normal","font-monospace",2,"white-space","pre-wrap",3,"ngClass"],[1,"order-details-popover","shadow","border","rounded","p-2","bg-white","position-absolute","start-0","top-100","mt-1",2,"z-index","1050","width","320px",3,"click"],[1,"d-flex","justify-content-between","align-items-center","mb-2","pb-2","border-bottom"],[1,"text-muted","fw-bold"],["type","button","aria-label","Close",1,"btn-close","btn-sm",3,"click"],[1,"d-flex","flex-column","gap-1",2,"max-height","300px","overflow-y","auto"],["class","badge border text-decoration-none text-start p-2 d-block text-wrap",3,"routerLink","ngClass","title",4,"ngFor","ngForOf"],[1,"badge","border","text-decoration-none","text-start","p-2","d-block","text-wrap",3,"routerLink","ngClass","title"],[1,"d-flex","justify-content-between","align-items-center","mb-1"],[1,"text-primary"],[1,"badge","bg-secondary-subtle","text-secondary","border"],[1,"d-flex","justify-content-between","align-items-center","small","text-muted","mb-1"],["class","small fst-italic text-break border-top pt-1 mt-1 text-muted",4,"ngIf"],["class","small text-break border-top pt-1 mt-1 text-muted",4,"ngIf"],[1,"small","fst-italic","text-break","border-top","pt-1","mt-1","text-muted"],[1,"bi","bi-diagram-3","me-1"],[1,"small","text-break","border-top","pt-1","mt-1","text-muted"],[1,"bi","bi-layers","me-1"]],template:function(i,t){if(i&1&&(o(0,"div")(1,"div",0)(2,"div")(3,"h1",1),l(4,"Part Picker"),n(),o(5,"p",2),l(6,"View all parts needed across active orders"),n()(),o(7,"div",3)(8,"button",4),u("click",function(){return t.copyPartNumbers()}),_(9,"i",5),l(10," Copy Part Numbers "),n(),o(11,"button",6),u("click",function(){return t.exportPartNumbers()}),_(12,"i",7),l(13," Export Part #s "),n()()(),o(14,"div",8)(15,"div",9)(16,"div",10),u("click",function(){return t.setFilter("all")}),o(17,"div",11)(18,"div",12),l(19,"Total Parts"),n(),o(20,"div",13),l(21),n(),o(22,"div",14),l(23,"\xA0"),n()()()(),o(24,"div",9)(25,"div",10),u("click",function(){return t.setFilter("low_stock")}),o(26,"div",11)(27,"div",12),l(28,"Low Stock"),n(),o(29,"div",15),l(30),n(),o(31,"div",14),l(32,"Available < Needed"),n()()()(),o(33,"div",9)(34,"div",10),u("click",function(){return t.setFilter("out_of_stock")}),o(35,"div",11)(36,"div",12),l(37,"Out of Stock"),n(),o(38,"div",16),l(39),n(),o(40,"div",14),l(41,"Qty Available = 0"),n()()()(),o(42,"div",9)(43,"div",10),u("click",function(){return t.setFilter("complete")}),o(44,"div",11)(45,"div",12),l(46,"Complete"),n(),o(47,"div",17),l(48),n(),o(49,"div",14),l(50,"Fully picked"),n()()()()(),o(51,"div",18)(52,"div",11)(53,"div",19)(54,"div",20)(55,"div",21)(56,"span",22),_(57,"i",23),n(),o(58,"input",24),E("ngModelChange",function(d){return S(t.searchQuery,d)||(t.searchQuery=d),d}),n()()(),o(59,"div",20)(60,"div",25)(61,"button",26),u("click",function(){return t.setFilter("all")}),l(62,"All"),n(),o(63,"button",26),u("click",function(){return t.setFilter("remaining")}),l(64,"Remaining"),n(),o(65,"button",26),u("click",function(){return t.setFilter("low_stock")}),l(66,"Low Stock"),n(),o(67,"button",26),u("click",function(){return t.setFilter("out_of_stock")}),l(68,"Out of Stock"),n(),o(69,"button",26),u("click",function(){return t.setFilter("complete")}),l(70,"Complete"),n(),o(71,"button",26),u("click",function(){return t.setFilter("has_issues")}),l(72," Has Issues "),b(73,rt,2,1,"span",27),n(),o(74,"div",28),u("click",function(d){return d.stopPropagation()}),o(75,"button",29),_(76,"i",30),l(77),n(),o(78,"div",31)(79,"div",32)(80,"button",33),u("click",function(){return t.selectAllAssemblies()}),l(81,"Select All"),n(),o(82,"button",33),u("click",function(){return t.deselectAllAssemblies()}),l(83,"Clear"),n()(),o(84,"div",34),b(85,at,4,4,"div",35),n()()(),o(86,"div",36)(87,"input",37),u("ngModelChange",function(d){return t.onHideOutOfStockChange(d)}),n(),o(88,"label",38),l(89,"Hide out of stock"),n()(),o(90,"div",36)(91,"input",39),u("ngModelChange",function(d){return t.onShowOutOfStockOnlyChange(d)}),n(),o(92,"label",40),l(93," Out of stock only "),b(94,st,2,1,"span",27),n()(),o(95,"div",36)(96,"input",41),E("ngModelChange",function(d){return S(t.hideIssues,d)||(t.hideIssues=d),d}),n(),o(97,"label",42),l(98," Hide issues "),b(99,lt,2,1,"span",27),n()(),o(100,"select",43),E("ngModelChange",function(d){return S(t.sortMode,d)||(t.sortMode=d),d}),o(101,"option",44),l(102,"Sort: Part Number"),n(),o(103,"option",45),l(104,"Sort: Location"),n(),o(105,"option",46),l(106,"Sort: Assembly"),n()()()()()()(),b(107,ct,4,1,"div",47)(108,dt,3,1,"div",48)(109,mt,3,0,"div",49)(110,pt,3,1,"div",49)(111,kt,27,1,"div",49),n(),o(112,"app-multi-order-pick-dialog",50),E("showChange",function(d){return S(t.showMultiOrderPick,d)||(t.showMultiOrderPick=d),d}),u("pick",function(d){return t.handleMultiOrderPick(d)}),n(),o(113,"app-report-part-issue-dialog",51),E("showChange",function(d){return S(t.showReportIssue,d)||(t.showReportIssue=d),d}),u("submitIssue",function(d){return t.handleSubmitIssue(d)})("resolveIssue",function(d){return t.handleResolveIssue(d)}),n(),o(114,"app-print-tag-dialog",52),u("close",function(){return t.closePrintTagDialog()}),n()),i&2){let s,d,g,y;r(8),c("disabled",t.filteredParts.length===0),r(3),c("disabled",t.filteredParts.length===0),r(5),C("border-primary",t.filter==="all"),r(5),h(t.filteredParts.length),r(4),C("border-warning",t.filter==="low_stock"),r(5),h(t.lowStockCount),r(4),C("border-danger",t.filter==="out_of_stock"),r(5),h(t.outOfStockCount),r(4),C("border-success",t.filter==="complete"),r(5),h(t.completeCount),r(10),I("ngModel",t.searchQuery),r(3),C("btn-primary",t.filter==="all")("btn-outline-secondary",t.filter!=="all"),r(2),C("btn-primary",t.filter==="remaining")("btn-outline-secondary",t.filter!=="remaining"),r(2),C("btn-warning",t.filter==="low_stock")("btn-outline-warning",t.filter!=="low_stock"),r(2),C("btn-danger",t.filter==="out_of_stock")("btn-outline-danger",t.filter!=="out_of_stock"),r(2),C("btn-success",t.filter==="complete")("btn-outline-success",t.filter!=="complete"),r(2),C("btn-info",t.filter==="has_issues")("btn-outline-info",t.filter!=="has_issues"),r(2),c("ngIf",t.issueCount>0),r(4),x(" ",t.selectedAssemblies.size===0?"All Assemblies":t.selectedAssemblies.size+" Assembly"+(t.selectedAssemblies.size!==1?"s":"")," "),r(8),c("ngForOf",t.uniqueAssemblies),r(2),c("ngModel",t.hideOutOfStock),r(4),c("ngModel",t.showOutOfStockOnly),r(3),c("ngIf",t.totalOutOfStockCount>0),r(2),I("ngModel",t.hideIssues),r(3),c("ngIf",t.issueCount>0),r(),I("ngModel",t.sortMode),r(7),c("ngIf",t.copyMessage),r(),c("ngIf",t.error),r(),c("ngIf",t.loading),r(),c("ngIf",!t.loading&&!t.error&&t.filteredParts.length===0),r(),c("ngIf",!t.loading&&t.filteredParts.length>0),r(),I("show",t.showMultiOrderPick),c("part",t.selectedPart),r(),I("show",t.showReportIssue),c("partNumber",(s=t.selectedPartForIssue==null?null:t.selectedPartForIssue.part_number)!==null&&s!==void 0?s:null)("partDescription",(d=t.selectedPartForIssue==null?null:t.selectedPartForIssue.description)!==null&&d!==void 0?d:null)("partLocation",(g=t.selectedPartForIssue==null?null:t.selectedPartForIssue.location)!==null&&g!==void 0?g:null)("existingIssue",t.selectedPartForIssue&&(y=t.partIssuesService.getOpenIssue(t.selectedPartForIssue.part_number))!==null&&y!==void 0?y:null),r(),c("isOpen",t.showPrintTagDialog)("tagData",t.printTagData||X(62,et))}},dependencies:[V,H,U,F,G,$,W,J,K,Q,de,Y,R,L,ee,Ae,ye,xe],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer;transition:border-color var(--transition-fast, .15s ease-in-out)}.cursor-pointer[_ngcontent-%COMP%]:hover{border-color:var(--brand-primary)!important}.location-group-header[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--brand-primary-subtle)!important;border-left:3px solid var(--brand-primary)}.assembly-group-header[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--color-purple-subtle)!important;border-left:3px solid var(--color-purple)}.text-purple[_ngcontent-%COMP%]{color:var(--color-purple)}.bg-purple-subtle[_ngcontent-%COMP%]{background-color:var(--color-purple-subtle)}.border-purple[_ngcontent-%COMP%]{border-color:var(--color-purple)!important}"]})}}return a})();export{ri as ConsolidatedPartsComponent};
